!function(){var rhLocalName="rhLocal"+Math.random().toString().substring(2,8);window.rhGlobal=window.rhGlobal||{},rhGlobal.modules=rhGlobal.modules||[];var old=rhGlobal.define;rhGlobal.define=function(e,t,n,i){function r(){define?define(e,t,n):setTimeout(r,100)}r(),i||rhGlobal.modules.push({a:e,b:t,c:n}),old&&old(e,t,n,!0)},rhGlobal.define.amd=!0,rhGlobal.define.rhLocalName=rhLocalName;var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,r){(n||!hasProp(e,r))&&(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[r]=t:(e[r]||(e[r]={}),mixin(e[r],t,n,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var r=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=i,n&&(r.originalError=n),r}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,i){var r,o,a,s,d,l,c,h,p,u,f,g,v=n&&n.split("/"),m=S.map,w=m&&m["*"];if(e&&(e=e.split("/"),c=e.length-1,S.nodeIdCompat&&jsSuffixRegExp.test(e[c])&&(e[c]=e[c].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&v&&(g=v.slice(0,v.length-1),e=g.concat(e)),t(e),e=e.join("/")),i&&m&&(v||w)){a=e.split("/");e:for(s=a.length;s>0;s-=1){if(l=a.slice(0,s).join("/"),v)for(d=v.length;d>0;d-=1)if(o=getOwn(m,v.slice(0,d).join("/")),o&&(o=getOwn(o,l))){h=o,p=s;break e}!u&&w&&getOwn(w,l)&&(u=getOwn(w,l),f=s)}!h&&u&&(h=u,p=f),h&&(a.splice(0,p,h),e=a.join("/"))}return r=getOwn(S.pkgs,e),r?r:e}function i(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===E.contextName?(t.parentNode.removeChild(t),!0):void 0})}function r(e){var t=getOwn(S.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),E.require.undef(e),E.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,i,r){var a,s,d,l,c=null,h=t?t.name:null,p=e,u=!0,f="";return e||(u=!1,e="_@r"+(N+=1)),l=o(e),c=l[0],e=l[1],c&&(c=n(c,h,r),s=getOwn(x,c)),e&&(c?f=s&&s.normalize?s.normalize(e,function(e){return n(e,h,r)}):-1===e.indexOf("!")?n(e,h,r):e:(f=n(e,h,r),l=o(f),c=l[0],f=l[1],i=!0,a=E.nameToUrl(f))),d=!c||s||i?"":"_unnormalized"+(H+=1),{prefix:c,name:f,parentMap:t,unnormalized:!!d,url:a,originalName:p,isDefine:u,id:(c?c+"!"+f:f)+d}}function s(e){var t=e.id,n=getOwn(O,t);return n||(n=O[t]=new E.Module(e)),n}function d(e,t,n){var i=e.id,r=getOwn(O,i);!hasProp(x,i)||r&&!r.defineEmitComplete?(r=s(e),r.error&&"error"===t?n(r.error):r.on(t,n)):"defined"===t&&n(x[i])}function l(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(O,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function c(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(E.defQueueMap[t]=!0),L.push(e)}),globalDefQueue=[])}function h(e){delete O[e],delete A[e]}function p(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,each(e.depMaps,function(i,r){var o=i.id,a=getOwn(O,o);!a||e.depMatched[r]||n[o]||(getOwn(t,o)?(e.defineDep(r,x[o]),e.check()):p(a,t,n))}),n[i]=!0)}function u(){var e,t,n=1e3*S.waitSeconds,o=n&&E.startTime+n<(new Date).getTime(),a=[],s=[],d=!1,c=!0;if(!w){if(w=!0,eachProp(A,function(e){var n=e.map,l=n.id;if(e.enabled&&(n.isDefine||s.push(e),!e.error))if(!e.inited&&o)r(l)?(t=!0,d=!0):(a.push(l),i(l));else if(!e.inited&&e.fetched&&n.isDefine&&(d=!0,!n.prefix))return c=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=E.contextName,l(e);c&&each(s,function(e){p(e,{},{})}),o&&!t||!d||!isBrowser&&!isWebWorker||_||(_=setTimeout(function(){_=0,u()},50)),w=!1}}function f(e){hasProp(x,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function g(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function v(e){var t=e.currentTarget||e.srcElement;return g(t,E.onScriptLoad,"load","onreadystatechange"),g(t,E.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function m(){var e;for(c();L.length;){if(e=L.shift(),null===e[0])return l(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));f(e)}E.defQueueMap={}}var w,b,E,y,_,S={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},O={},A={},I={},L=[],x={},C={},T={},N=1,H=1;return y={require:function(e){return e.require?e.require:e.require=E.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?x[e.map.id]=e.exports:e.exports=x[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(S.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},b=function(e){this.events=getOwn(I,e.id)||{},this.map=e,this.shim=getOwn(S.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,E.startTime=(new Date).getTime();var e=this.map;return this.shim?void E.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;C[e]||(C[e]=!0,E.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,i=this.depExports,r=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){try{r=E.execCb(n,o,i,r)}catch(a){e=a}if(this.map.isDefine&&void 0===r&&(t=this.module,t?r=t.exports:this.usingExports&&(r=this.exports)),e){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",l(this.error=e);"undefined"!=typeof console&&console.error||req.onError(e)}}else r=o;if(this.exports=r,this.map.isDefine&&!this.ignore&&(x[n]=r,req.onResourceLoad)){var s=[];each(this.depMaps,function(e){s.push(e.normalizedMap||e)}),req.onResourceLoad(E,this.map,s)}h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(E.defQueueMap,n)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=a(e.prefix);this.depMaps.push(i),d(i,"defined",bind(this,function(i){var r,o,c,p=getOwn(T,this.map.id),u=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,g=E.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(u=i.normalize(u,function(e){return n(e,f,!0)})||""),o=a(e.prefix+"!"+u,this.map.parentMap),d(o,"defined",bind(this,function(e){this.map.normalizedMap=o,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),c=getOwn(O,o.id),void(c&&(this.depMaps.push(o),this.events.error&&c.on("error",bind(this,function(e){this.emit("error",e)})),c.enable()))):p?(this.map.url=E.nameToUrl(p),void this.load()):(r=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),r.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(O,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&h(e.map.id)}),l(e)}),r.fromText=bind(this,function(n,i){var o=e.name,d=a(o),c=useInteractive;i&&(n=i),c&&(useInteractive=!1),s(d),hasProp(S.config,t)&&(S.config[o]=S.config[t]);try{req.exec(n)}catch(h){return l(makeError("fromtexteval","fromText eval for "+t+" failed: "+h,h,[t]))}c&&(useInteractive=!0),this.depMaps.push(d),E.completeLoad(o),g([o],r)}),void i.load(e.name,g,r,S))})),E.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){A[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,i,r;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,r=getOwn(y,e.id))return void(this.depExports[t]=r(this));this.depCount+=1,d(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?d(e,"error",bind(this,this.errback)):this.events.error&&d(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,i=O[n],hasProp(y,n)||!i||i.enabled||E.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(O,e.id);t&&!t.enabled&&E.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},E={config:S,contextName:e,registry:O,defined:x,urlFetched:C,defQueue:L,defQueueMap:{},Module:b,makeModuleMap:a,nextTick:req.nextTick,onError:l,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=S.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(S[t]||(S[t]={}),mixin(S[t],e,!0,!0)):S[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(T[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=E.makeShimExports(e)),t[n]=e}),S.shim=t),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(S.paths[n]=e.location),S.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(O,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t,null,!0))}),(e.deps||e.callback)&&E.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,r){function o(n,i,d){var c,h,p;return r.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof n?isFunction(i)?l(makeError("requireargs","Invalid require call"),d):t&&hasProp(y,n)?y[n](O[t.id]):req.get?req.get(E,n,t,o):(h=a(n,t,!1,!0),c=h.id,hasProp(x,c)?x[c]:l(makeError("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(m(),E.nextTick(function(){m(),p=s(a(null,t)),p.skipMap=r.skipMap,p.init(n,i,d,{enabled:!0}),u()}),o)}return r=r||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var i,r=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return-1!==r&&(!a||r>1)&&(i=e.substring(r,e.length),e=e.substring(0,r)),E.nameToUrl(n(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(x,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(x,e)||hasProp(O,e)}}),t||(o.undef=function(e){c();var n=a(e,t,!0),r=getOwn(O,e);r.undefed=!0,i(e),delete x[e],delete C[n.url],delete I[e],eachReverse(L,function(t,n){t[0]===e&&L.splice(n,1)}),delete E.defQueueMap[e],r&&(r.events.defined&&(I[e]=r.events),h(e))}),o},enable:function(e){var t=getOwn(O,e.id);t&&s(e).enable()},completeLoad:function(e){var t,n,i,o=getOwn(S.shim,e)||{},a=o.exports;for(c();L.length;){if(n=L.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);f(n)}if(E.defQueueMap={},i=getOwn(O,e),!t&&!hasProp(x,e)&&i&&!i.inited){if(!(!S.enforceDefine||a&&getGlobal(a)))return r(e)?void 0:l(makeError("nodefine","No define call for "+e,null,[e]));f([e,o.deps||[],o.exportsFn])}u()},nameToUrl:function(e,t,n){var i,r,o,a,s,d,l,c=getOwn(S.pkgs,e);if(c&&(e=c),l=getOwn(T,e))return E.nameToUrl(l,t,n);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(i=S.paths,r=e.split("/"),o=r.length;o>0;o-=1)if(a=r.slice(0,o).join("/"),d=getOwn(i,a)){isArray(d)&&(d=d[0]),r.splice(0,o,d);break}s=r.join("/"),s+=t||(/^data\:|\?/.test(s)||n?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":S.baseUrl)+s}return S.urlArgs?s+((-1===s.indexOf("?")?"?":"&")+S.urlArgs):s},load:function(e,t){req.load(E,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=v(e);E.completeLoad(t.id)}},onScriptError:function(e){var t=v(e);if(!r(t.id)){var n=[];return eachProp(O,function(e,i){0!==i.indexOf("_@r")&&each(e.depMaps,function(e){return e.id===t.id&&n.push(i),!0})}),l(makeError("scripterror",'Script error for "'+t.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[t.id]))}}},E.require=E.makeRequire(),E}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.22",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var r,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=i):e=[]),o&&o.context&&(a=o.context),r=getOwn(contexts,a),r||(r=contexts[a]=req.s.newContext(a)),o&&r.configure(o),r.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var i=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=e.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(e,t,n){var i,r=e&&e.config||{};if(isBrowser)return i=req.createNode(r,t,n),r.onNodeCreated&&r.onNodeCreated(i,r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript(),i&&(e||(e=i.getAttribute("data-requiremodule")),r=contexts[i.getAttribute("data-requirecontext")])),r?(r.defQueue.push([e,t,n]),r.defQueueMap[e]=!0):globalDefQueue.push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("almond",function(){}),define("jquery-private",["jquery"],function(e){return e.noConflict(!0)}),define("common/extensions/customScrollbar",["jquery"],function(e){!function(t,n){function i(e,n,i){e._eventHandlers=e._eventHandlers||[{element:e.scroller,handler:function(t){e.scroll(t)},type:"scroll"},{element:e.scroller,handler:function(){e.update()},type:"keyup"},{element:e.bar,handler:function(t){t.preventDefault(),e.selection(),e.drag.now=1},type:"touchstart mousedown"},{element:document,handler:function(){e.selection(1),e.drag.now=0},type:"mouseup blur touchend"},{element:document,handler:function(t){2!=t.button&&e._pos0(t)},type:"touchstart mousedown"},{element:document,handler:function(t){e.drag.now&&e.drag(t)},type:"mousemove touchmove"},{element:t,handler:function(){e.update()},type:"resize"},{element:e.root,handler:function(){e.update()},type:"sizeChange"}],p(e._eventHandlers,function(e){e.element&&n(e.element,e.type,e.handler,i)})}function r(e,t,n){var i="data-baron-"+t;if("on"==n)e.setAttribute(i,"inited");else{if("off"!=n)return e.getAttribute(i);e.removeAttribute(i)}}function o(e){if(r(e.root,e.direction))throw new Error("Second baron initialization");var t=new f.prototype.constructor(e);return i(t,e.event,"on"),r(t.root,e.direction,"on"),t.update({initMode:!0}),t}function a(e){var t={};e=e||{};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function s(e){var t=a(e);t.direction=t.direction||"v";var n=e.event||function(e,n,i,r){t.$(e)[r||"on"](n,i)};return t.event=function(e,t,i,r){p(e,function(e){n(e,t,i,r)})},t}function d(e){if(this.events&&this.events[e])for(var t=0;t<this.events[e].length;t++){var n=Array.prototype.slice.call(arguments,1);this.events[e][t].apply(this,n)}}if(t){var l=u,c=["left","top","right","bottom","width","height"],h={v:{x:"Y",pos:c[1],oppos:c[3],crossPos:c[0],crossOpPos:c[2],size:c[5],crossSize:c[4],client:"clientHeight",crossClient:"clientWidth",crossScroll:"scrollWidth",offset:"offsetHeight",crossOffset:"offsetWidth",offsetPos:"offsetTop",scroll:"scrollTop",scrollSize:"scrollHeight"},h:{x:"X",pos:c[0],oppos:c[2],crossPos:c[1],crossOpPos:c[3],size:c[4],crossSize:c[5],client:"clientWidth",crossClient:"clientHeight",crossScroll:"scrollHeight",offset:"offsetWidth",crossOffset:"offsetHeight",offsetPos:"offsetLeft",scroll:"scrollLeft",scrollSize:"scrollWidth"}},p=function(e,i){var r=0;for((e.length===n||e===t)&&(e=[e]);e[r];)i.call(this,e[r],r),r++},u=function(e){var n,i,r;return e=e||{},r=e.$||t.jQuery,n=this instanceof r,n?e.root=i=this:i=r(e.root||e.scroller),new u.fn.constructor(i,e,r)};u.fn={constructor:function(e,t,n){var i=s(t);i.$=n,p.call(this,e,function(e,t){var n=a(i);i.root&&i.scroller?(n.scroller=i.$(i.scroller,e),n.scroller.length||(n.scroller=e)):n.scroller=e,n.root=e,this[t]=o(n),this.length=t+1}),this.params=i},dispose:function(){var e=this.params;p(this,function(t){t.dispose(e)}),this.params=null},update:function(){for(var e=0;this[e];)this[e].update.apply(this[e],arguments),e++},baron:function(e){return e.root=[],e.scroller=this.params.scroller,p.call(this,this,function(t){e.root.push(t.root)}),e.direction="v"==this.params.direction?"h":"v",e._chain=!0,u(e)}};var f={};f.prototype={constructor:function(e){function t(e,t){return c(e,t)[0]}function i(e){var t=this.barMinSize||20;e>0&&t>e&&(e=t),this.bar&&c(this.bar).css(this.origin.size,parseInt(e,10)+"px")}function r(e){this.bar&&c(this.bar).css(this.origin.pos,+e+"px")}function o(){return f[this.origin.client]-this.barTopLimit-this.bar[this.origin.offset]}function a(e){return e*o.call(this)+this.barTopLimit}function s(e){return(e-this.barTopLimit)/o.call(this)}function l(){return!1}var c,p,u,f,g,v,m,w,b,E,y;return E=b=(new Date).getTime(),c=this.$=e.$,this.event=e.event,this.events={},this.root=e.root,this.scroller=t(e.scroller),this.bar=t(e.bar,this.root),f=this.track=t(e.track,this.root),!this.track&&this.bar&&(f=this.bar.parentNode),this.clipper=this.scroller.parentNode,this.direction=e.direction,this.origin=h[this.direction],this.barOnCls=e.barOnCls,this.scrollingCls=e.scrollingCls,this.barTopLimit=0,w=1e3*e.pause||0,this.cursor=function(e){return e["client"+this.origin.x]||(((e.originalEvent||e).touches||{})[0]||{})["page"+this.origin.x]},this.pos=function(e){var t="page"+this.origin.x+"Offset",i=this.scroller[t]?t:this.origin.scroll;return e!==n&&(this.scroller[i]=e),this.scroller[i]},this.rpos=function(e){var t,n=this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client];return t=e?this.pos(e*n):this.pos(),t/(n||1)},this.barOn=function(e){this.barOnCls&&(e||this.scroller[this.origin.client]>=this.scroller[this.origin.scrollSize]?c(this.root).removeClass(this.barOnCls):c(this.root).addClass(this.barOnCls))},this._pos0=function(e){u=this.cursor(e)-p},this.drag=function(e){this.scroller[this.origin.scroll]=s.call(this,this.cursor(e)-u)*(this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client])},this.selection=function(e){this.event(document,"selectpos selectstart",l,e?"off":"on")},this.resize=function(){function t(){var t,i;n.barOn(),i=n.scroller[n.origin.crossClient],t=n.scroller[n.origin.crossOffset]-i,e.freeze&&!n.clipper.style[n.origin.crossSize]&&c(n.clipper).css(n.origin.crossSize,n.clipper[n.origin.crossClient]-t+"px"),c(n.scroller).css(n.origin.crossSize,n.clipper[n.origin.crossClient]+t+"px"),Array.prototype.unshift.call(arguments,"resize"),d.apply(n,arguments),E=(new Date).getTime()}var n=this,i=0;(new Date).getTime()-E<w&&(clearTimeout(g),i=w),i?g=setTimeout(t,i):t()},this.updatePositions=function(){var e,t=this;t.bar&&(e=(f[t.origin.client]-t.barTopLimit)*t.scroller[t.origin.client]/t.scroller[t.origin.scrollSize],parseInt(y,10)!=parseInt(e,10)&&(i.call(t,e),y=e),p=a.call(t,t.rpos()),r.call(t,p)),Array.prototype.unshift.call(arguments,"scroll"),d.apply(t,arguments),b=(new Date).getTime()},this.scroll=function(){var e=0,t=this;(new Date).getTime()-b<w&&(clearTimeout(v),e=w),(new Date).getTime()-b<w&&(clearTimeout(v),e=w),e?v=setTimeout(function(){t.updatePositions()},e):t.updatePositions(),t.scrollingCls&&(m||this.$(this.scroller).addClass(this.scrollingCls),clearTimeout(m),m=setTimeout(function(){t.$(t.scroller).removeClass(t.scrollingCls),m=n},300))},this},update:function(e){return d.call(this,"upd",e),this.resize(1),this.updatePositions(),this},dispose:function(t){i(this,this.event,"off"),r(this.root,t.direction,"off"),e(this.scroller).css(this.origin.crossSize,""),this.barOn(!0),d.call(this,"dispose")},on:function(e,t,n){for(var i=e.split(" "),r=0;r<i.length;r++)"init"==i[r]?t.call(this,n):(this.events[i[r]]=this.events[i[r]]||[],this.events[i[r]].push(function(e){t.call(this,e||n)}))}},u.fn.constructor.prototype=u.fn,f.prototype.constructor.prototype=f.prototype,u.noConflict=function(){return t.baron=l,u},u.version="0.7.7",e&&e.fn&&(e.fn.baron=u),t.baron=u,t.module&&module.exports&&(module.exports=u.noConflict())}}(window),function(e,t){var n=function(e){function n(e,n,i){var r=1==i?"pos":"oppos";s<(d.minView||0)&&(n=t),this.$(a[e]).css(this.origin.pos,"").css(this.origin.oppos,"").removeClass(d.outside),n!==t&&(n+="px",this.$(a[e]).css(this.origin[r],n).addClass(d.outside))}function r(e){try{i=document.createEvent("WheelEvent"),i.initWebKitWheelEvent(e.originalEvent.wheelDeltaX,e.originalEvent.wheelDeltaY),p.dispatchEvent(i),e.preventDefault()}catch(e){}}function o(e){var t;for(var n in e)d[n]=e[n];if(a=this.$(d.elements,this.scroller)){s=this.scroller[this.origin.client];for(var i=0;i<a.length;i++)t={},t[this.origin.size]=a[i][this.origin.offset],a[i].parentNode!==this.scroller&&this.$(a[i].parentNode).css(t),t={},t[this.origin.crossSize]=a[i].parentNode[this.origin.crossClient],this.$(a[i]).css(t),s-=a[i][this.origin.offset],h[i]=a[i].parentNode[this.origin.offsetPos],l[i]=l[i-1]||0,c[i]=c[i-1]||Math.min(h[i],0),a[i-1]&&(l[i]+=a[i-1][this.origin.offset],c[i]+=a[i-1][this.origin.offset]),(0!=i||0!=h[i])&&(this.event(a[i],"mousewheel",r,"off"),this.event(a[i],"mousewheel",r));d.limiter&&a[0]&&(this.track&&this.track!=this.scroller?(t={},t[this.origin.pos]=a[0].parentNode[this.origin.offset],this.$(this.track).css(t)):this.barTopLimit=a[0].parentNode[this.origin.offset],this.scroll()),d.limiter===!1&&(this.barTopLimit=0)}var o={element:a,handler:function(){for(var e,t=f(this)[0].parentNode,n=t.offsetTop,i=0;i<a.length;i++)a[i]===this&&(e=i);var r=n-l[e];d.scroll?d.scroll({x1:g.scroller.scrollTop,x2:r}):g.scroller.scrollTop=r},type:"click"};d.clickable&&(this._eventHandlers.push(o),u(o.element,o.type,o.handler,"on"))}var a,s,d={outside:"",inside:"",before:"",after:"",past:"",future:"",radius:0,minView:0},l=[],c=[],h=[],p=this.scroller,u=this.event,f=this.$,g=this;this.on("init",o,e);var v=[],m=[];this.on("init scroll",function(){var e,i,r;if(a){for(var o,p=0;p<a.length;p++)e=0,h[p]-this.pos()<c[p]+d.radius?(e=1,i=l[p]):h[p]-this.pos()>c[p]+s-d.radius?(e=2,i=this.scroller[this.origin.client]-a[p][this.origin.offset]-l[p]-s):(e=3,i=t),r=!1,(h[p]-this.pos()<c[p]||h[p]-this.pos()>c[p]+s)&&(r=!0),(e!=v[p]||r!=m[p])&&(n.call(this,p,i,e),v[p]=e,m[p]=r,o=!0);if(o)for(p=0;p<a.length;p++)1==v[p]&&d.past&&this.$(a[p]).addClass(d.past).removeClass(d.future),2==v[p]&&d.future&&this.$(a[p]).addClass(d.future).removeClass(d.past),3==v[p]?((d.future||d.past)&&this.$(a[p]).removeClass(d.past).removeClass(d.future),d.inside&&this.$(a[p]).addClass(d.inside)):d.inside&&this.$(a[p]).removeClass(d.inside),v[p]!=v[p+1]&&1==v[p]&&d.before?this.$(a[p]).addClass(d.before).removeClass(d.after):v[p]!=v[p-1]&&2==v[p]&&d.after?this.$(a[p]).addClass(d.after).removeClass(d.before):this.$(a[p]).removeClass(d.before).removeClass(d.after),d.grad&&(m[p]?this.$(a[p]).addClass(d.grad):this.$(a[p]).removeClass(d.grad))}}),this.on("resize upd",function(e){o.call(this,e&&e.fix)})};baron.fn.fix=function(e){for(var t=0;this[t];)n.call(this[t],e),t++;return this}}(window),function(e,t){var n=function(e){var t,n,i,r,o,a=this;r=e.screen||.9,e.forward&&(t=this.$(e.forward,this.clipper),o={element:t,handler:function(){var t=a.pos()-e.delta||30;a.pos(t)},type:"click"},this._eventHandlers.push(o),this.event(o.element,o.type,o.handler,"on")),e.backward&&(n=this.$(e.backward,this.clipper),o={element:n,handler:function(){var t=a.pos()+e.delta||30;a.pos(t)},type:"click"},this._eventHandlers.push(o),this.event(o.element,o.type,o.handler,"on")),e.track&&(i=e.track===!0?this.track:this.$(e.track,this.clipper)[0],i&&(o={element:i,handler:function(e){var t=e["offset"+a.origin.x],n=a.bar[a.origin.offsetPos],i=0;n>t?i=-1:t>n+a.bar[a.origin.offset]&&(i=1);var o=a.pos()+i*r*a.scroller[a.origin.client];a.pos(o)},type:"mousedown"},this._eventHandlers.push(o),this.event(o.element,o.type,o.handler,"on")))};baron.fn.controls=function(e){for(var t=0;this[t];)n.call(this[t],e),t++;return this}}(window),function(e,t){var n=function(e){function t(){return m.scroller[m.origin.scroll]+m.scroller[m.origin.offset]}function n(){return m.scroller[m.origin.scrollSize]}function i(){return m.scroller[m.origin.client]}function r(e,t){var n=5e-4*e;return Math.floor(t-n*(e+550))}function o(e){c=e,e?(a(),s=setInterval(a,200)):clearInterval(s)}function a(){var a,s,c={},_=t(),S=n(),O=1==w;if(s=0,w>0&&(s=40),a=r(E,s),_>=S-E&&w>-1?O&&(E+=a):E=0,0>E&&(E=0),c[p]=E+"px",i()<=n()){m.$(h).css(c);for(var A=0;A<g.length;A++)m.$(g[A].self).css(g[A].property,Math.min(E/u*100,100)+"%")}v&&E&&m.$(m.root).addClass(v),0==E&&e.onCollapse&&e.onCollapse(),w=0,d=setTimeout(function(){w=-1},y),f&&E>u&&!l&&(f(),l=!0),0==E?b++:b=0,b>1&&(o(!1),l=!1,v&&m.$(m.root).removeClass(v))}var s,d,l,c,h=this.$(e.block),p=e.size||this.origin.size,u=e.limit||80,f=e.onExpand,g=e.elements||[],v=e.inProgress||"",m=this,w=0,b=0,E=0,y=e.waiting||500;this.on("init",function(){o(!0)}),this.on("dispose",function(){o(!1)}),this.event(this.scroller,"mousewheel DOMMouseScroll",function(e){var i=e.wheelDelta<0||e.originalEvent&&e.originalEvent.wheelDelta<0||e.detail>0;i&&(w=1,clearTimeout(d),!c&&t()>=n()&&o(!0))})};baron.fn.pull=function(e){for(var t=0;this[t];)n.call(this[t],e),t++;return this}}(window),function(e,t){var n=e.MutationObserver||e.WebKitMutationObserver||e.MozMutationObserver||null,i=function(){var e=this;this._observer=new MutationObserver(function(){e.update()}),this.on("init",function(){e._observer.observe(e.root,{childList:!0,subtree:!0,characterData:!0})}),this.on("dispose",function(){e._observer.dissconect(),delete e._observer})};baron.fn.autoUpdate=function(e){if(!n)return this;for(var t=0;this[t];)i.call(this[t],e),t++;return this}}(window)}),define("common/extensions/browserDetect",[],function(){var e={init:function(){this.browser=this.searchString(this.dataBrowser)||"-",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"",this.OS=this.searchString(this.dataOS)||"-","Opera"===this.browser&&(navigator.userAgent.split("Version/")[1]?this.version=navigator.userAgent.split("Version/")[1]:this.version=parseFloat(navigator.userAgent.split("OPR/")[1]).toFixed(1)),this.isMobile=navigator.userAgent.indexOf("Mobile")>-1},searchString:function(e){var t;for(t=0;t<e.length;t++){var n=e[t].string,i=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,n){if(-1!==n.indexOf(e[t].subString))return e[t].identity+(e[t].version?" "+e[t].version():"")}else if(i)return e[t].identity+(e[t].version?" "+e[t].version():"")}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);return-1!==t?parseFloat(e.substring(t+this.versionSearchString.length+1)):void 0},dataBrowser:[{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"OPR/",identity:"Opera"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Safari",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,
subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko/",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer",versionSearch:"rv"}],dataOS:[{string:navigator.userAgent,subString:"Android",identity:"android",version:function(){return navigator.userAgent.substr(navigator.userAgent.indexOf("Android ")+8,3)}},{string:navigator.platform,subString:"Win",identity:"windows",version:function(){var e=navigator.userAgent.substr(navigator.userAgent.indexOf("NT ")+3,3);switch(e){case"6.3":return"8.1";case"6.2":return"8";case"6.1":return"7";case"6.0":return"Vista";case"5.1":return"XP";case"5.0":return"2000";case"4.1":return"NT 4.1";default:return""}}},{string:navigator.platform,subString:"Mac",identity:"mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.userAgent,subString:"iPod",identity:"iOS"},{string:navigator.platform,subString:"Linux",identity:"linux"}],isMobile:!1};return e.init(),e}),define("common/extensions/jquery.disableSelection",["jquery","common/extensions/browserDetect"],function(e,t){"Firefox"===t.browser?(e.fn.disableTextSelect=function(){return this.each(function(){e(this).css("MozUserSelect","none")})},e.fn.enableTextSelect=function(){return this.each(function(){e(this).css("MozUserSelect","")})}):navigator&&navigator.userAgent&&navigator.userAgent.indexOf("WebKit")>-1?(e.fn.disableTextSelect=function(){return this.each(function(){e(this).css("-webkit-user-select","none")})},e.fn.enableTextSelect=function(){return this.each(function(){e(this).css("-webkit-user-select","")})}):"Explorer"===t.browser?(e.fn.disableTextSelect=function(){return this.each(function(){e(this).bind("selectstart.disableTextSelect",function(){return!1})})},e.fn.enableTextSelect=function(){return this.each(function(){e(this).unbind("selectstart.disableTextSelect")})}):(e.fn.disableTextSelect=function(){return this.each(function(){e(this).bind("mousedown.disableTextSelect",function(){return!1})})},e.fn.enableTextSelect=function(){return this.each(function(){e(this).unbind("mousedown.disableTextSelect")})})}),define("common/extensions/jquery.easing",["jquery"],function(e){e.easing.rh_expIn=function(e,t,n,i){return 0==t?n:n+i*Math.pow(2,10*(e-1))},e.easing.rh_expOut=function(e,t,n,i){return 1==e?n+i:n+i*(1-Math.pow(2,-10*e))},e.easing.rh_in=function(e,t,n,i){return n+i*e*e*(3*e-2)},e.easing.rh_out=function(e,t,n,i){return n+i*((e-1)*(e-1)*(3*(e-1)+2)+1)},e.easing.rh_bounce=function(e,t,n,i){var r=1/2.75;return r>e?n+i*(7.5625*e*e):2*r>e?n+i*(7.5625*(e-1.5*r)*(e-1.5*r)+.75):2.5*r>e?n+i*(7.5625*(e-2.25*r)*(e-2.25*r)+.9375):n+i*(7.5625*(e-2.625*r)*(e-2.625*r)+.984375)}}),define("common/extensions/jquery.fix",["jquery"],function(e){function t(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}e.fn.oldIs=e.fn.oldIs||e.fn.is,e.fn.is=function(e){return":visible"==e?"none"!=this.css("display")&&this.oldIs(":visible"):this.oldIs(e)},e.fn.oldFind=e.fn.oldFind||e.fn.find,e.fn.find=function(e){var n=this.oldFind(e),i=n[0];return i&&i[0]&&!t(i)&&(n=i),n},e.fn.oldHeight=e.fn.oldHeight||e.fn.height,e.fn.height=function(){return this[0]===window?window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight:this.oldHeight()},e.acceptData=function(t){if("string"==typeof t.nodeName){var n=e.noData[t.nodeName.toLowerCase()];if(n)return!(n===!0||t.getAttribute("classid")!==n)}return!0}}),define("common/extensions/jquery.getpath",["jquery"],function(e){function t(e){for(var t=[],n=[],i=e,r=Number(new Date);i.length;){var o=i[0];if(void 0!==o.path&&r-o.pathTime<1e3){n.push(o.path);break}var a=o.localName||o.tagName||o.nodeName;if(!a||"#document"==a)break;a=a.toLowerCase();var s=i.parent(),d=s.children(a);d.length>1&&(a+=":eq("+d.index(i)+")"),t.push(i[0]),n.push(a),i=s}var l=t.length,c=n.pop();n.length===t.length&&n.length>0&&(c=c+">"+n.pop());for(var h=l-1;h>=0;h--)t[h].path=c,t[h].pathTime=r,h>0&&(c+=">"+n[h-1]);return c}e.fn.getPath=function(){if(0==this.length)throw"Requires one element.";return t(this)}}),define("common/extensions/jquery.getvisible",["jquery"],function(e){return e.fn.getVisible=function(){if(this.length<=1)return this;var t=function(t){if(!e(t).is(":visible"))return{top:0,left:0,width:0,height:0};var n={left:parseInt(e(t).css("padding-left")),right:parseInt(e(t).css("padding-right")),top:parseInt(e(t).css("padding-top")),bottom:parseInt(e(t).css("padding-bottom"))};for(var i in n)n[i]!=n[i]&&(n[i]=0);var r={left:parseInt(e(t).css("border-left-width")),right:parseInt(e(t).css("border-right-width")),top:parseInt(e(t).css("border-top-width")),bottom:parseInt(e(t).css("border-bottom-width"))};for(i in r)r[i]!=r[i]&&(r[i]=0);var o=e(t).offset();return o.width=e(t).width()+n.left+n.right+r.left+r.right,o.height=e(t).height()+n.top+n.bottom+r.top+r.bottom,o},n=function(e,t){return e.left+e.width>t.left&&t.left+t.width>e.left&&e.top+e.height>t.top&&t.top+t.height>e.top},i={left:e(window).scrollLeft(),top:e(window).scrollTop(),width:e(window).width(),height:e(window).height()},r=null;return e.each(this,function(e,o){return n(i,t(o))?(r=o,!1):void 0}),e(r)},e}),define("common/extensions/jquery.maskedinput",["jquery"],function(e){return function(e){function t(){var e=document.createElement("input"),t="onpaste";return e.setAttribute(t,""),"function"==typeof e[t]?"paste":"input"}var n,i=t()+".mask",r=navigator.userAgent,o=/iphone/i.test(r),a=/android/i.test(r);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;return 0===this.length||this.is(":hidden")?void 0:"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,r){var s,d,l,c,h,p;return!t&&this.length>0?(s=e(this[0]),s.data(e.mask.dataName)()):(r=e.extend({placeholder:e.mask.placeholder,completed:null},r),d=e.mask.definitions,l=[],c=p=t.length,h=null,e.each(t.split(""),function(e,t){"?"==t?(p--,c=e):d[t]?(l.push(new RegExp(d[t])),null===h&&(h=l.length-1)):l.push(null)}),this.trigger("unmask").each(function(){function s(e){for(;++e<p&&!l[e];);return e}function u(e){for(;--e>=0&&!l[e];);return e}function f(e,t){var n,i;if(!(0>e)){for(n=e,i=s(t);p>n;n++)if(l[n]){if(!(p>i&&l[n].test(_[i])))break;_[n]=_[i],_[i]=r.placeholder,i=s(i)}b(),y.caret(Math.max(h,e))}}function g(e){var t,n,i,o;for(t=e,n=r.placeholder;p>t;t++)if(l[t]){if(i=s(t),o=_[t],_[t]=n,!(p>i&&l[i].test(o)))break;n=o}}function v(e){var t,n,i,r=e.which;8===r||46===r||o&&127===r?(t=y.caret(),n=t.begin,i=t.end,i-n===0&&(n=46!==r?u(n):i=s(n-1),i=46===r?s(i):i),w(n,i),f(n,i-1),e.preventDefault()):27==r&&(y.val(S),y.caret(0,E()),e.preventDefault())}function m(t){var n,i,o,d=t.which,c=y.caret();t.ctrlKey||t.altKey||t.metaKey||32>d||d&&(c.end-c.begin!==0&&(w(c.begin,c.end),f(c.begin,c.end-1)),n=s(c.begin-1),p>n&&(i=String.fromCharCode(d),l[n].test(i)&&(g(n),_[n]=i,b(),o=s(n),a?setTimeout(e.proxy(e.fn.caret,y,o),0):y.caret(o),r.completed&&o>=p&&r.completed.call(y))),t.preventDefault())}function w(e,t){var n;for(n=e;t>n&&p>n;n++)l[n]&&(_[n]=r.placeholder)}function b(){y.val(_.join(""))}function E(e){var t,n,i=y.val(),o=-1;for(t=0,pos=0;p>t;t++)if(l[t]){for(_[t]=r.placeholder;pos++<i.length;)if(n=i.charAt(pos-1),l[t].test(n)){_[t]=n,o=t;break}if(pos>i.length)break}else _[t]===i.charAt(pos)&&t!==c&&(pos++,o=t);return e?b():c>o+1?(y.val(""),w(0,p)):(b(),y.val(y.val().substring(0,o+1))),c?t:h}var y=e(this),_=e.map(t.split(""),function(e,t){return"?"!=e?d[e]?r.placeholder:e:void 0}),S=y.val();y.data(e.mask.dataName,function(){return e.map(_,function(e,t){return l[t]&&e!=r.placeholder?e:null}).join("")}),y.attr("readonly")||y.one("unmask",function(){y.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){y.removeClass("placeholder"),clearTimeout(n);var e;S=y.val(),e=E(),n=setTimeout(function(){b(),e==t.length?y.caret(0,e):y.caret(e)},10)}).bind("blur.mask",function(){E(),y.val()!=S?y.change():y.addClass("placeholder")}).bind("keydown.mask",v).bind("keypress.mask",m).bind(i,function(){setTimeout(function(){var e=E(!0);y.caret(e),r.completed&&e==y.val().length&&r.completed.call(y)},0)}),E()}))}})}(e),e}),define("common/extensions/jquery.minbox",["jquery"],function(e){var t=function(e){var t={"font-family":e.css("font-family"),"font-size":e.css("font-size"),"font-weight":e.css("font-weight"),"line-height":e.css("line-height")};return t},n=function(n,i,r){r=r||4048;var o=0,a=t(n),s=e("<div/>").css(a).html(n.html());s.css("float","left"),s.css("height",i+"px"),s.appendTo("body"),o=s.width(),s.css("height","auto"),s.css("float","none"),s.css("width",r/2);var d=1,l=r,c=l;for(l/=2;Math.abs(c-l)>d;)s.height()<=i?(c=l,l/=2):l=(c+l)/2,s.css("width",l);var h;return h=s.height()>i?c:l,s.remove(),h>1?h:o};e.fn.minBox=function(e){return n(this,e)}}),define("common/extensions/jquery.placeholder",["jquery"],function(e){!function(e,t,n){function i(e){var t={},i=/^jQuery\d+$/;return n.each(e.attributes,function(e,n){n.specified&&!i.test(n.name)&&(t[n.name]=n.value)}),t}function r(e,t){var i=this,r=n(i);if(r.hasClass("placeholder"))if(r.data("placeholder-password")){if(r=r.hide().next().show().attr("id",r.removeAttr("id").data("placeholder-id")),e===!0)return r[0].value=t;r.focus()}else i.value="",r.removeClass("placeholder"),i==a()&&i.select()}function o(){var e,t=this,o=n(t),a=this.id;if(""==t.value){if("password"==t.type){if(!o.data("placeholder-textinput")){try{e=o.clone().attr({type:"text"})}catch(s){e=n("<input>").attr(n.extend(i(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":o,"placeholder-id":a}).bind("focus.placeholder",r),o.data({"placeholder-textinput":e,"placeholder-id":a}).before(e)}o=o.removeAttr("id").hide().prev().attr("id",a).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}function a(){try{return t.activeElement}catch(e){}}var s,d,l="placeholder"in t.createElement("input"),c="placeholder"in t.createElement("textarea"),h=n.fn,p=n.valHooks,u=n.propHooks;l&&c?(d=h.placeholder=function(){return this},d.input=d.textarea=!0):(d=h.placeholder=function(){var e=this;return e.filter((l?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":r,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},d.input=l,d.textarea=c,s={get:function(e){var t=n(e),i=t.data("placeholder-password");return i?i[0].value:t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,t){var i=n(e),s=i.data("placeholder-password");return s?s[0].value=t:i.data("placeholder-enabled")?(""==t?(e.value=t,e!=a()&&o.call(e)):i.hasClass("placeholder")?r.call(e,!0,t)||(e.value=t):e.value=t,i):e.value=t}},l||(p.input=s,u.value=s),c||(p.textarea=s,u.value=s),n(function(){n(t).delegate("form","submit.placeholder",function(){var e=n(".placeholder",this).each(r);setTimeout(function(){e.each(o)},10)})}),n(e).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})}))}(window,document,e)}),define("common/extensions/jquery.postMessage",["jquery"],function(e){window.postMessage&&(e.postMessage=function(e,t){e.postMessage(t,"*")},e.receiveMessage=function(e){window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent&&window.attachEvent("onmessage",e)})}),define("common/extensions/jquery.pulse",["jquery"],function(e){e.fn.pulse=function(t){var n=e(this).css("opacity");e(this).animate({opacity:0},{duration:100,queue:!0}).animate({opacity:n},{duration:120,queue:!0}).animate({opacity:0},{duration:150,queue:!0}).animate({opacity:n},{duration:170,queue:!0}).animate({opacity:0},{duration:200,queue:!0}).animate({opacity:n},{duration:300,queue:!0}).animate({opacity:0},{duration:600,queue:!0,complete:function(){e(this).hide().css("opacity",n),t()}})}}),define("common/extensions/jquery.plugins",["jquery","common/extensions/customScrollbar","common/extensions/jquery.disableSelection","common/extensions/jquery.easing","common/extensions/jquery.fix","common/extensions/jquery.getpath","common/extensions/jquery.getvisible","common/extensions/jquery.maskedinput","common/extensions/jquery.minbox","common/extensions/jquery.placeholder","common/extensions/jquery.postMessage","common/extensions/jquery.pulse"],function(e){return e}),define("common/extensions/debug",[],function(){return{log:function(e){},eventLog:function(e){},sessionLog:function(e){},info:function(e){},clear:function(){},debug:function(e){},time:function(e){},timeEnd:function(e){},profile:function(){},profileEnd:function(){},error:function(e){},assert:function(e,t){}}}),define("common/application/eventTarget",["common/extensions/debug"],function(e){function t(e,t){this.message=t,this.name="Custom Event Exception",this.target=e}var n=function(e){this._listeners={},this.targetName=e};return n.prototype={addEventListener:function(n,i){var r="dispatcher_"+n;if(void 0===n||""===n||"number"==typeof n&&isNaN(n)||null===n)throw new t(this.targetName,"empty type");if("function"!=typeof i)throw new t(this.targetName,"provided listener for event type "+n+" is not a function");this._listeners[r]instanceof Array||(this._listeners[r]=[]);for(var o in this._listeners[r])if(this._listeners[o]===i)return void e.eventLog("Listener already exists:\ntargetName="+this.targetName+", type="+n);this._listeners[r].push(i);try{e.eventLog("New event listener added:\ntargetName="+this.targetName+", type="+n)}catch(a){}},addOneShotEventListener:function(e,t){var n=function(){this.removeEventListener(e,n),t.apply(this,arguments)};this.addEventListener(e,n)},removeAllEventListeners:function(t){var n="dispatcher_"+t;if(this._listeners[n]){this._listeners[n]=[];try{e.eventLog("All listeners were removed\ntargetName="+this.targetName+", type="+t)}catch(i){}}},removeEventListener:function(t,n){var i="dispatcher_"+t;if(this._listeners[i]){var r=this._listeners[i].indexOf(n);if(-1!==r){this._listeners[i].splice(r,1);try{e.eventLog("One listener was removed\ntargetName="+this.targetName+", type="+t)}catch(o){}}}},fire:function(n,i,r){var o=n;if("string"==typeof n&&(n={type:n}),n._target||(n._target=this),!n.type)throw new t(this.targetName,"Event missing 'type' property");if("object"==typeof i)for(var a in i)"webkitStorageInfo"!=a&&"webkitIndexedDB"!=a&&(i.hasOwnProperty=i.hasOwnProperty||Object.prototype.hasOwnProperty,i.hasOwnProperty(a)&&(n[a]=i[a]));else"function"==typeof i&&(r=i,i=null);var s=0,d="dispatcher_"+("string"==typeof o?o:n.type);if(this._listeners[d])for(var l=this._listeners[d].slice(0),c=l.length;c>s;s++)if(l[s])try{l[s].call(this,n)}catch(h){e.error(h)}if("*"!==n.type){var p="*";if(this._listeners[p])for(var l=this._listeners[p],c=l.length;c>s;s++)try{l[s].call(this,n)}catch(h){e.error(h)}}if("function"==typeof r)try{r()}catch(h){e.error(h)}if(i&&!i.isMessageTarget)try{e.eventLog("Event was fired, "+s+" listeners was called:\ntargetName="+this.targetName+", type="+n.type)}catch(h){}}},n}),define("common/constants/type",{STRING:0,BOOLEAN:1,INTEGER:2,OBJECT:3}),define("common/extensions/base64",[],function(){var e={CA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",CAS:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",IA:new Array(256),IAS:new Array(256),isUtf8:function(e){for(var t=!1,n=0;n<e.length;n++)if(e.charCodeAt(n)>255){t=!0;break}return t},toByteArray:function(e,t){var n,i,r=[];for(t="undefined"!=typeof t?t:!0,n=0;n<e.length;n++)i=e.charCodeAt(n),127>=i||!t?r.push(i):2047>=i?(r.push(i>>6|192),r.push(63&i|128)):65535>=i?(r.push(i>>12|224),r.push(i>>6&63|128),r.push(63&i|128)):(r.push(i>>18|240),r.push(i>>12&63|128),r.push(i>>6&63|128),r.push(63&i|128));return r},fromByteArray:function(e,t){var n,i="",r=0;for(t="undefined"!=typeof t?t:!0,r=0;r<e.length;r++)n=e[r],127>=n||!t||(192==(224&n)?(n=(31&n)<<6,n+=63&e[++r]):224==(240&n)?(n=(15&n)<<12,n+=(63&e[++r])<<6,n+=63&e[++r]):(n=(7&n)<<18,n+=(63&e[++r])<<12,n+=(63&e[++r])<<6,n+=63&e[++r])),0!==n&&(i+=String.fromCharCode(n));return i},init:function(){var t;for(t=0;256>t;t++)e.IA[t]=-1,e.IAS[t]=-1;for(t=0,iS=e.CA.length;t<iS;t++)e.IA[e.CA.charCodeAt(t)]=t,e.IAS[e.CAS.charCodeAt(t)]=t;e.IA["="]=e.IAS["="]=0},encode:function(t,n){var i,r,o,a,s,d,l,c,h,p;for(i=n?e.CAS:e.CA,o=t.constructor==Array?t:e.toByteArray(t),a=o.length,s=a/3*3,d=(a-1)/3+1<<2,r=new Array(d),l=0,c=0;s>l;)p=(255&o[l++])<<16|(255&o[l++])<<8|255&o[l++],r[c++]=i.charAt(p>>18&63),r[c++]=i.charAt(p>>12&63),r[c++]=i.charAt(p>>6&63),r[c++]=i.charAt(63&p);h=a-s,h>0&&(p=(255&o[s])<<10|(2==h?(255&o[a-1])<<2:0),r[d-4]=i.charAt(p>>12),r[d-3]=i.charAt(p>>6&63),r[d-2]=2==h?i.charAt(63&p):"=",r[d-1]="=");var u=r.join("");return u},decode:function(t,n){var i,r,o,a,s,d,l,c,h,p,u,f,g,v,m,w;for(i=n?e.IAS:e.IA,t.constructor==Array?(o=t,s=!0):(o=e.toByteArray(t),s=!1),a=o.length,d=0,l=a-1;l>d&&i[o[d]]<0;)d++;for(;l>0&&i[o[l]]<0;)l--;for(c="="==o[l]?"="==o[l-1]?2:1:0,h=l-d+1,p=a>76?("\r"==o[76]?h/78:0)<<1:0,u=(6*(h-p)>>3)-c,r=new Array(u),f=0,g=0,eLen=u/3*3;f<eLen;)v=i[o[d++]]<<18|i[o[d++]]<<12|i[o[d++]]<<6|i[o[d++]],r[f++]=v>>16&255,r[f++]=v>>8&255,r[f++]=255&v,p>0&&19==++g&&(d+=2,g=0);if(u>f){for(v=0,m=0;l-c>=d;m++)v|=i[o[d++]]<<18-6*m;for(w=16;u>f;w-=8)r[f++]=v>>w&255}return s?r:e.fromByteArray(r)},_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeOld:function(t,n){var i,r,o,a,s,d,l,c="",h=0;for(t=e._UTF8Encode(t,n);h<t.length;)i=t.charCodeAt(h++),r=t.charCodeAt(h++),o=t.charCodeAt(h++),a=i>>2,s=(3&i)<<4|r>>4,d=(15&r)<<2|o>>6,l=63&o,isNaN(r)?d=l=64:isNaN(o)&&(l=64),c=c+this._keyStr.charAt(a)+this._keyStr.charAt(s)+this._keyStr.charAt(d)+this._keyStr.charAt(l);return c},decodeOld:function(t,n){var i,r,o,a,s,d,l,c="",h=0;for(t=t.replace(/[^A-Za-z0-9\+\/=]/g,"");h<t.length;)a=this._keyStr.indexOf(t.charAt(h++)),s=this._keyStr.indexOf(t.charAt(h++)),d=this._keyStr.indexOf(t.charAt(h++)),l=this._keyStr.indexOf(t.charAt(h++)),i=a<<2|s>>4,r=(15&s)<<4|d>>2,o=(3&d)<<6|l,c+=String.fromCharCode(i),64!==d&&(c+=String.fromCharCode(r)),64!==l&&(c+=String.fromCharCode(o));return c=e._UTF8Decode(c,n)},_UTF8Encode:function(e,t){return e=e.replace(/\r\n/g,"\n"),t?encodeURIComponent(e):unescape(encodeURIComponent(e))},_UTF8Decode:function(e,t){return t?decodeURIComponent(e):decodeURIComponent(escape(e))}};return e.init(),e}),define("common/constants/scope",{LOCAL:0,SESSION:1,STORAGE:2}),define("common/application/session",["common/extensions/jquery.plugins","common/application/eventTarget","common/constants/type","common/extensions/debug","common/extensions/base64","common/constants/scope"],function(e,t,n,i,r,o){function a(e){return e===o.STORAGE?localStorage:e===o.LOCAL?f:sessionStorage}function s(e,t,i){var r;switch("undefined"==typeof t&&(t=n.STRING),!e&&i&&(e=g.get(i)),t){case n.BOOLEAN:var o=e.toLowerCase();r="true"===o||"yes"===o||"ok"===o||"1"===o;break;case n.INTEGER:r=+e,!r&&i&&(r=+g.get(i)),r!==r&&(r=0);break;case n.OBJECT:try{if(r=JSON.parse(e),"string"==typeof r)try{r=JSON.parse(r)}catch(a){}}catch(a){r=void 0}break;default:r=e}return r}if(!window.sessionStorage||!window.localStorage)return{};var d=null,l=function(){},c=null,h="",p=!1,u="",f={setItem:function(e,t){f[e+""]=t+""},getItem:function(e){return f[e+""]?f[e+""]:null}},g=e.extend(new Image,{dispatcher:new t("Session"),init:function(e,t){u="rhlp."+e+".",d=t,g.fields=[];for(var r in d)d.hasOwnProperty(r)&&!function(e){var t=function(){var t=g.get(e),n=s(t,d[e].type,d[e].fallback);return d[e].value&&""===t?d[e].value:n},i=function(t){if(t===t&&void 0!==t&&null!==t){var i=d[e].scope,r=d[e].type;r===n.OBJECT&&(t=JSON.stringify(t)),void 0===i&&(i=o.SESSION),g.set(e,t,i)}};!Object.__defineGetter__&&Object.defineProperty?Object.defineProperty(g,e,{get:t,set:i}):g.__defineGetter__&&(g.__defineGetter__(e,t),g.__defineSetter__(e,i)),g.fields.push(e)}(r);var a=function(e){if((!e.storageArea||e.storageArea!==sessionStorage)&&"key"in e&&0===e.key.indexOf(u)){var t=e.key.substr(u.length);g.dispatcher.fire("on"+t.charAt(0).toUpperCase()+t.substr(1)+"Changed",{inCurrentTab:!1})}};window.addEventListener?(window.addEventListener("storage",a,!1),window.addEventListener("onstorage",a,!1)):(window.attachEvent("onstorage",a),document.attachEvent("onstorage",a)),i.sessionLog(["INIT | ",u])},onLoad:function(e){"function"==typeof e&&(l=e),(!c||p)&&l()},get:function(e){if(!d[e])return"";var t=e;e=u+e;var n=a(d[t].scope);return null!==n.getItem(e)?n.getItem(e):""},set:function(e,t,n,r){if(!r&&c&&c.send("updateSession",{name:e,value:t,scope:n}),g.get(e)!==""+t){var o=e;e=u+e;var s=a(n);s.setItem(e,t),g.dispatcher.fire("on"+o.charAt(0).toUpperCase()+o.substr(1)+"Changed",{inCurrentTab:!0}),i.sessionLog("STORAGE | "+e+" = "+t)}},attachTo:function(e,t,i){c=e,h=i,c.addHandler("initSession",function(e){e=JSON.parse(e.value);for(var i in e)e.hasOwnProperty(i)&&(t[i].priority||(t[i].priority="external"),t[i]&&h!==t[i].priority&&(t[i].type===n.OBJECT&&(e[i]=JSON.stringify(e[i])),g.set(i,e[i],t[i].scope,!0)));p=!0,"function"==typeof l&&l()}),c.addHandler("requestSession",function(e){e=JSON.parse(e.value);var t={};for(var n in e)e.hasOwnProperty(n)&&"undefined"!=typeof g[n]&&(t[n]=g[n]);c.send("initSession",{value:JSON.stringify(t)})}),c.addHandler("updateSession",function(e){t[e.name]&&(t[e.name].type===n.OBJECT&&(e.value=JSON.stringify(e.value)),g.set(e.name,e.value,e.scope,!0))})},clear:function(e){for(var t in d)if(d.hasOwnProperty(t)){if(!e&&"vid"===t)continue;g[t]=d[t].value||""}},sendRequest:function(){c.send("requestSession",{value:JSON.stringify(d)})}});return g}),define("common/constants/chatState",{MINIMIZED:0,INVITATION:1,MAXIMIZED:2,WINDOW:3}),define("common/extensions/punycode",[],function(){var e={};return function(e){function t(e){throw RangeError(A[e])}function n(e,t){for(var n=e.length;n--;)e[n]=t(e[n]);return e}function i(e,t){var i=".";return n(e.split(i),t).join(i)}function r(e){for(var t,n,i=[],r=0,o=e.length;o>r;)t=e.charCodeAt(r++),55296==(63488&t)&&o>r?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):i.push(t,n)):i.push(t);return i}function o(e){return n(e,function(e){var t="";return e>65535&&(e-=65536,t+=x(e>>>10&1023|55296),e=56320|1023&e),t+=x(e)}).join("")}function a(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:g}function s(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function d(e,t,n){var i=0;for(e=n?L(e/b):e>>1,e+=L(e/t);e>I*m>>1;i+=g)e=L(e/I);return L(i+(I+1)*e/(e+w))}function l(e){var n,i,r,s,l,c,h,p,u,w,b=[],S=e.length,O=0,A=y,I=E;for(i=e.lastIndexOf(_),0>i&&(i=0),r=0;i>r;++r)e.charCodeAt(r)>=128&&t("not-basic"),b.push(e.charCodeAt(r));for(s=i>0?i+1:0;S>s;){for(l=O,c=1,h=g;s>=S&&t("invalid-input"),p=a(e.charCodeAt(s++)),(p>=g||p>L((f-O)/c))&&t("overflow"),O+=p*c,u=I>=h?v:h>=I+m?m:h-I,!(u>p);h+=g)w=g-u,c>L(f/w)&&t("overflow"),c*=w;n=b.length+1,I=d(O-l,n,0==l),L(O/n)>f-A&&t("overflow"),A+=L(O/n),O%=n,b.splice(O++,0,A)}return o(b)}function c(e){var n,i,o,a,l,c,h,p,u,w,b,S,O,A,I,C=[];for(e=r(e),S=e.length,n=y,i=0,l=E,c=0;S>c;++c)b=e[c],128>b&&C.push(x(b));for(o=a=C.length,a&&C.push(_);S>o;){for(h=f,c=0;S>c;++c)b=e[c],b>=n&&h>b&&(h=b);for(O=o+1,h-n>L((f-i)/O)&&t("overflow"),i+=(h-n)*O,n=h,c=0;S>c;++c)if(b=e[c],n>b&&++i>f&&t("overflow"),b==n){for(p=i,u=g;w=l>=u?v:u>=l+m?m:u-l,!(w>p);u+=g)I=p-w,A=g-w,C.push(x(s(w+I%A,0))),p=L(I/A);C.push(x(s(p,0))),l=d(i,O,o==a),i=0,++o}++i,++n}return C.join("")}function h(e){return i(e,function(e){return O.test(e)?l(e.slice(4).toLowerCase()):e})}function p(e){return i(e,function(e){return S.test(e)?"xn--"+c(e):e})}var u,f=2147483647,g=36,v=1,m=26,w=38,b=700,E=72,y=128,_="-",S=/[^ -~]/,O=/^xn--/,A={overflow:"Overflow: input needs wider integers to process.","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=g-v,L=Math.floor,x=String.fromCharCode;u={version:"1.1.1",ucs2:{decode:r,encode:o},decode:l,encode:c,toASCII:p,toUnicode:h,decodeUri:function(e){var t=e.split("//").pop().split("/")[0],n=h(t);return e.replace(t,n)},encodeUri:function(e){var t=e.split("//").pop().split("/")[0],n=p(t);return e.replace(t,n)}},e.punycode=u}(e),e.punycode}),define("config/core",["common/extensions/punycode"],function(e){var t={},n=document.getElementById("rhlpscrtg").src;if(t.__CLIENT_NAME=n.split("?c=")[1].split("&")[0].toLowerCase(),t.__PROTOCOL=n.split("//")[0],t.__TEST=n.indexOf("/test")>-1,t.__NX_URL=t.__PROTOCOL+(n.indexOf("://test.")>-1?"//test.web.redhelper.ru":"//web.redhelper.ru"),~n.indexOf(".com/")&&(t.__NX_URL=t.__PROTOCOL+"//web.redhelper.com"),t.__NX_URL+="/nx/presence/"+t.__CLIENT_NAME,location.hostname&&void 0!==sessionStorage){var i=e.decodeUri(location.hostname),r="rh_"+t.__CLIENT_NAME+"_url_"+i;sessionStorage.getItem(r)||(sessionStorage.setItem(r,1),t.__NX_URL+="?url="+encodeURIComponent(i))}return t.__APP_URL=null,t}),define("common/extensions/compatibility",[],function(){"function"!=typeof Date.now&&(Date.now=function(){return(new Date).getTime()}),"bind"in Function.prototype||(Function.prototype.bind=function(e){var t=this;if(arguments.length<=1)return function(){return t.apply(e,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,0===arguments.length?n:n.concat(Array.prototype.slice.call(arguments)))}}),"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"indexOf"in Array.prototype&&"function"==typeof Array.prototype.indexOf&&-1==[].indexOf(0)||(Array.prototype.indexOf=function(e,t){void 0===t&&(t=0),0>t&&(t+=this.length),0>t&&(t=0);for(var n=this.length;n>t;t++)if(this[t]===e)return t;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(e,t){for(void 0===t&&(t=this.length-1),0>t&&(t+=this.length),t>this.length-1&&(t=this.length-1),t++;t-- >0;)if(t in this&&this[t]===e)return t;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(e,t){for(var n=0,i=this.length;i>n;n++)n in this&&e.call(t,this[n],n,this)}),"map"in Array.prototype||(Array.prototype.map=function(e,t){for(var n=new Array(this.length),i=0,r=this.length;r>i;i++)i in this&&(n[i]=e.call(t,this[i],i,this));return n}),"filter"in Array.prototype||(Array.prototype.filter=function(e,t){for(var n,i=[],r=0,o=this.length;o>r;r++)r in this&&e.call(t,n=this[r],r,this)&&i.push(n);return i}),"every"in Array.prototype||(Array.prototype.every=function(e,t){for(var n=0,i=this.length;i>n;n++)if(n in this&&!e.call(t,this[n],n,this))return!1;return!0}),"some"in Array.prototype||(Array.prototype.some=function(e,t){for(var n=0,i=this.length;i>n;n++)if(n in this&&e.call(t,this[n],n,this))return!0;return!1}),"reduce"in Array.prototype||(Array.prototype.reduce=function(e,t){if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,i,r=this.length>>>0,o=!1;for(1<arguments.length&&(i=t,o=!0),n=0;r>n;++n)this.hasOwnProperty(n)&&(o?i=e(i,this[n],n,this):(i=this[n],o=!0));if(!o)throw new TypeError("Reduce of empty array with no initial value");return i}),JSON&&"function"!=typeof JSON.stringify&&(JSON.stringify=JSON.encode),JSON&&"function"!=typeof JSON.parse&&(JSON.parse=JSON.decode),window.rhlpSetInterval=function(e,t){var n=function(){try{e()}catch(i){}setTimeout(n,t)};n()},window.rhlpSetRealInterval=function(e,t){var n=Math.ceil(1e3/t),i=function(){setTimeout(i,n*t);for(var r=0;n>r;r++)setTimeout(function(){e()},r*t)};i()}}),define("common/communication/encoder",["common/extensions/base64"],function(e){return{serialize:function(e){return JSON.stringify(e)},parse:function(e){return JSON.parse(e)},compress:function(t){return e.encodeOld(JSON.stringify(t))},decompress:function(t){return JSON.parse(e.decodeOld(t))}}}),define("config/setup",["common/extensions/jquery.plugins","config/core","common/extensions/browserDetect","common/extensions/compatibility","common/communication/encoder"],function(e,t,n,i,r){var o={DEBUG:!1,SHOW_EVENTS:!1,SHOW_SESSION:!1,CLIENT_NAME:t.__CLIENT_NAME,APP_URL:t.__APP_URL,DATA_URL:t.__PROTOCOL+"//dh7xgsr9ech2h.cloudfront.net",TEST_MODE:e("#rhlpscrtg").attr("src").split("://").pop().indexOf("/test")>-1,BLOCK:!1,CODENAME:"BETA",IS_PHONE:n.isMobile||"iPhone"===n.OS||"Android"===n.OS||"iPhone"===n.browser,referrer:document.referrer};if(o.TEST_MODE){var a=e("#rhlpscrtg").attr("src"),s=a.substr(a.indexOf("/test")+1).split("/")[0];o.APP_URL+=s+"/"}return void 0===o.CLIENT_NAME&&(o.BLOCK=!0),o.IFRAME_URL=o.APP_URL+"chat/?c="+o.CLIENT_NAME+"&version=3.1.570.1459872528712#"+encodeURIComponent(r.compress({url:location.href})),o.SITE_URL=location.href.substr(location.href.indexOf("//")+2,location.href.length-1).split("/")[0],o.getImageUrl=function(e){if(e&&~e.indexOf("://"))return e;var t=["Ava_default.png","Ava_man_1.jpg","Ava_woman_1.jpg","Ava_def_man.png","Ava_man_2.jpg","Ava_woman_2.jpg","Ava_def_woman.png","Ava_man_3.jpg","Ava_woman_3.jpg"];return-1!==t.indexOf(e)?o.APP_URL+"container/images/common/avatar/"+e:o.DATA_URL+"/images/"+e},o.empty=function(e){return void 0===e||""===e||"number"==typeof e&&isNaN(e)||null===e},o.eachSubelement=function(t,n){t.children().map(function(){var t=e(this);return n(t),t.children()[0]&&o.eachSubelement(t,n),null})},o}),define("common/communication/messageTarget",["common/extensions/jquery.plugins","common/application/eventTarget","common/communication/encoder","common/extensions/debug"],function(e,t,n,i){function r(){this._dispatcher=new t("MessageTarget"),this._fireCounter=1;var e=[],n=!1;this.queueMessage=function(t,n){e.push({type:t,obj:n})},this.startMessaging=function(){n=!0;for(var t=0,i=e.length;i>t;t++)this.send(e[t].type,e[t].obj)},this.isAllowed=function(){return n},this.allow=function(){n=!0}}return r.prototype={init:function(t,n,r,o){this._targetUri=r,this._targetWindow=t,this._origin=n,o&&this.allow();var a=this;try{e.receiveMessage(function(e){a._handle(e)})}catch(s){i.error(s)}},_handle:function(e){try{if("string"!=typeof e.data||-1===e.data.indexOf("__rh__"))return}catch(t){return void i.log(t)}var r=n.parse(e.data.replace("__rh__",""));if(r._messageType)if(r.isMessageTarget=!0,r._messageId){var o=this;this._dispatcher.fire(r._messageType,{type:r._messageType,obj:r},function(){o.send("msg-handlers-completed-"+r._messageId)})}else this._dispatcher.fire(r._messageType,{type:r._messageType,obj:r})},setOrigin:function(e){this._origin=e},addHandler:function(e,t){this._dispatcher.addEventListener(e,function(e){t(e.obj)})},removeHandler:function(e,t){this._dispatcher.removeEventListener(e,t)},removeHandlers:function(e){this._dispatcher.removeAllEventListeners(e)},send:function(t,i,r){if(!this.isAllowed())return void this.queueMessage(t,i);if("undefined"==typeof i?i={}:"function"==typeof i&&"undefined"==typeof r?(r=i,i={}):"object"!=typeof i&&(i={value:i}),i._messageType=t,"function"==typeof r){i._messageId=this._fireCounter++;var o=this,a=function(){o.removeHandlers("msg-handlers-completed-"+i._messageId),r()};this.addHandler("msg-handlers-completed-"+i._messageId,a)}var s="__rh__"+n.serialize(i);e.postMessage(this._targetWindow,s,this._origin,this._targetUri);
}},r}),define("application/chatWindow",["common/communication/messageTarget"],function(e){var t=new e;return t}),define("config/nxSettings",[function(){function e(){var e,t,n=0;for(e=0;e<localStorage.length;e++)t=localStorage.key(e),0==t.indexOf("rhlp."+i)&&t.indexOf(".vid")>4&&0==n&&(n=localStorage.getItem(t));if(!n)for(e=0;e<localStorage.length;e++)t=localStorage.key(e),0==t.indexOf("rhlp."+i)&&t.indexOf(".visIdFromNx")>4&&0==n&&(n=localStorage.getItem(t));return n}var t=function(){var e={};return function(e){function t(e){throw RangeError(A[e])}function n(e,t){for(var n=e.length;n--;)e[n]=t(e[n]);return e}function i(e,t){var i=".";return n(e.split(i),t).join(i)}function r(e){for(var t,n,i=[],r=0,o=e.length;o>r;)t=e.charCodeAt(r++),55296==(63488&t)&&o>r?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):i.push(t,n)):i.push(t);return i}function o(e){return n(e,function(e){var t="";return e>65535&&(e-=65536,t+=x(e>>>10&1023|55296),e=56320|1023&e),t+=x(e)}).join("")}function a(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:g}function s(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function d(e,t,n){var i=0;for(e=n?L(e/b):e>>1,e+=L(e/t);e>I*m>>1;i+=g)e=L(e/I);return L(i+(I+1)*e/(e+w))}function l(e){var n,i,r,s,l,c,h,p,u,w,b=[],S=e.length,O=0,A=y,I=E;for(i=e.lastIndexOf(_),0>i&&(i=0),r=0;i>r;++r)e.charCodeAt(r)>=128&&t("not-basic"),b.push(e.charCodeAt(r));for(s=i>0?i+1:0;S>s;){for(l=O,c=1,h=g;s>=S&&t("invalid-input"),p=a(e.charCodeAt(s++)),(p>=g||p>L((f-O)/c))&&t("overflow"),O+=p*c,u=I>=h?v:h>=I+m?m:h-I,!(u>p);h+=g)w=g-u,c>L(f/w)&&t("overflow"),c*=w;n=b.length+1,I=d(O-l,n,0==l),L(O/n)>f-A&&t("overflow"),A+=L(O/n),O%=n,b.splice(O++,0,A)}return o(b)}function c(e){var n,i,o,a,l,c,h,p,u,w,b,S,O,A,I,C=[];for(e=r(e),S=e.length,n=y,i=0,l=E,c=0;S>c;++c)b=e[c],128>b&&C.push(x(b));for(o=a=C.length,a&&C.push(_);S>o;){for(h=f,c=0;S>c;++c)b=e[c],b>=n&&h>b&&(h=b);for(O=o+1,h-n>L((f-i)/O)&&t("overflow"),i+=(h-n)*O,n=h,c=0;S>c;++c)if(b=e[c],n>b&&++i>f&&t("overflow"),b==n){for(p=i,u=g;w=l>=u?v:u>=l+m?m:u-l,!(w>p);u+=g)I=p-w,A=g-w,C.push(x(s(w+I%A,0))),p=L(I/A);C.push(x(s(p,0))),l=d(i,O,o==a),i=0,++o}++i,++n}return C.join("")}function h(e){return i(e,function(e){return O.test(e)?l(e.slice(4).toLowerCase()):e})}function p(e){return i(e,function(e){return S.test(e)?"xn--"+c(e):e})}var u,f=2147483647,g=36,v=1,m=26,w=38,b=700,E=72,y=128,_="-",S=/[^ -~]/,O=/^xn--/,A={overflow:"Overflow: input needs wider integers to process.","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=g-v,L=Math.floor,x=String.fromCharCode;u={version:"1.1.1",ucs2:{decode:r,encode:o},decode:l,encode:c,toASCII:p,toUnicode:h,decodeUri:function(e){var t=e.split("//").pop().split("/")[0],n=h(t);return e.replace(t,n)},encodeUri:function(e){var t=e.split("//").pop().split("/")[0],n=p(t);return e.replace(t,n)}},e.punycode=u}(e),e.punycode}(),n=document.getElementById("rhlpscrtg").src,i=n.split("?c=")[1].split("&")[0].toLowerCase(),r=n.indexOf("://test.")>-1?"//test.web.redhelper.ru":"//web.redhelper.ru";if(n.indexOf("//development/")>=0&&(r="//development"),~n.indexOf(".com/")&&(r="//web.redhelper.com"),r=(~n.indexOf("https://")?"https:":"http:")+r,r+="/nx/presence/"+i,location.hostname&&void 0!==sessionStorage){var o=t.decodeUri(location.hostname),a="rh_"+i+"_url_"+o;sessionStorage.getItem(a)||(sessionStorage.setItem(a,1),r+="?url="+encodeURIComponent(o))}var s;s=window.redhlpSettings&&window.redhlpSettings.page?window.redhlpSettings.page:location.href.substr(0,256),s=s||"",s=s.split("!")[0];var d=r+(r.indexOf("?")>-1?"&":"?")+"callback="+("undefined"!=typeof rhLocalName?rhLocalName+".":"")+"define&_="+(new Date).getTime();return d+="&page="+encodeURIComponent(s),e()>0&&(d+="&vid="+encodeURIComponent(e())),d}()],function(e){return"{}"===JSON.stringify(e)?{companyId:-1}:e}),define("application/session.objects",["common/application/session","common/constants/scope","common/constants/type","common/constants/chatState","config/setup","common/extensions/jquery.plugins","application/chatWindow","config/nxSettings"],function(e,t,n,i,r,o,a,s){var d,l={activeSalesShown:{type:n.BOOLEAN,value:!1,scope:t.STORAGE,priority:"internal"},allowed:{type:n.BOOLEAN,scope:t.STORAGE,value:!0},animateBadge:{type:n.BOOLEAN},audioEnabled:{value:!0,type:n.BOOLEAN,scope:t.STORAGE,priority:"internal"},badge:{value:"badge1.png",scope:t.LOCAL},badgeColor:{},badgeFontSize:{type:n.INTEGER,value:0},badgePadding:{type:n.INTEGER,value:0},badgePosition:{value:"left",scope:t.LOCAL},badgeText:{},badgeVersion:{type:n.INTEGER},badgeX:{value:"70%"},badgeY:{value:"40%"},cachedEvent:{},chatColor:{},chatHeight:{type:n.INTEGER,fallback:"defaultChatHeight"},chatIntensity:{},chatStarted:{value:"",scope:t.STORAGE,priority:"internal"},chatState:{type:n.INTEGER,value:i.MINIMIZED},chatWidth:{type:n.INTEGER,fallback:"defaultChatWidth"},chatX:{type:n.INTEGER},chatY:{type:n.INTEGER},city:{scope:t.SESSION},city_ru:{scope:t.SESSION},cloneSession:{type:n.BOOLEAN},codename:{scope:t.STORAGE},companyId:{type:n.INTEGER,value:0},country:{scope:t.SESSION},country_ru:{scope:t.SESSION},currentChatHeight:{type:n.INTEGER},currentChatWidth:{type:n.INTEGER},currentChatX:{type:n.INTEGER},currentChatY:{type:n.INTEGER},currentDepartment:{type:n.INTEGER,value:0,scope:t.STORAGE,priority:"internal"},currentFirstMessage:{},currentHeader:{},currentInviteTime:{type:n.INTEGER,value:-1},currentOfflineHeader:{},currentOfflineText:{},currentOperator:{scope:t.STORAGE,priority:"internal"},currentOperAvatar:{scope:t.SESSION},currentInvitation:{scope:t.SESSION,type:n.INTEGER,value:0},currentTopText:{},currentTypedText:{},currentWelcome:{},customFields:{scope:t.SESSION},defaultChatHeight:{type:n.INTEGER,value:420},defaultChatWidth:{type:n.INTEGER,value:300},defaultFace:{},defaultHeader:{},defaultText:{},defaultWelcome:{},departments:{type:n.OBJECT,value:[],scope:t.LOCAL},departmentsType:{},disableCobrowse:{type:n.BOOLEAN,value:!1},disableDOMObserver:{type:n.BOOLEAN},disableForms:{type:n.BOOLEAN,value:!1},extraAuth:{value:""},firstMessage:{},free:{value:!1,type:n.BOOLEAN},hideRedHelper:{value:!1,type:n.BOOLEAN,scope:t.SESSION},invitationsShown:{value:0,type:n.INTEGER,priority:"internal",scope:t.STORAGE},inviteState:{value:"none",priority:"internal"},inviteTime:{scope:t.STORAGE,type:n.INTEGER},ip:{scope:t.STORAGE},isOnline:{type:n.BOOLEAN},isPartiallyOnline:{type:n.BOOLEAN,value:!1},lastActivity:{type:n.INTEGER,scope:t.STORAGE},lastChat:{type:n.INTEGER,value:0,scope:t.STORAGE,priority:"internal"},lastInvitation:{scope:t.STORAGE},lastInvitationTime:{scope:t.STORAGE,priority:"interval",type:n.INTEGER},lastMessageTime:{scope:t.STORAGE,priority:"internal"},lastShownInvitation:{scope:t.SESSION,type:n.INTEGER,value:0},lastVisit:{value:"1/1/2000",scope:t.STORAGE},lastVisitTime:{type:n.INTEGER,value:0,scope:t.STORAGE},locale:{scope:t.STORAGE},messageUnread:{scope:t.STORAGE,type:n.BOOLEAN,value:!1},offlineEnabled:{type:n.BOOLEAN,value:!0,scope:t.STORAGE},offlineFields:{value:["name","email","message"],type:n.OBJECT},offlineHeader:{},offlineText:{},onlineOperators:{value:[],type:n.OBJECT},openApi:{type:n.BOOLEAN,value:!0},operAvatar:{scope:t.STORAGE},operDisplayName:{scope:t.STORAGE},preferredOperator:{value:""},preferredOperatorError:{value:""},previousDay:{value:"1/1/2000",scope:t.STORAGE},rateEnabled:{type:n.BOOLEAN},realDepartment:{type:n.INTEGER,value:0,scope:t.STORAGE,priority:"internal"},reconnecting:{value:!1,type:n.BOOLEAN},reconnects:{type:n.INTEGER,value:0},referrer:{scope:t.STORAGE,priority:"internal"},referrerStored:{scope:t.STORAGE,priority:"internal",type:n.BOOLEAN,value:!1},region:{scope:t.SESSION},requiredOperator:{value:""},rid:{value:0,type:n.INTEGER,priority:"internal"},sessionViewers:{type:n.OBJECT,value:[]},sid:{value:"",priority:"internal"},siteVisitLastTime:{value:0,type:n.INTEGER,priority:"internal",scope:t.STORAGE},skin:{scope:t.STORAGE},stringChatState:{scope:t.STORAGE,priority:"internal",value:"browse"},time:{type:n.INTEGER,value:0},tracking:{},trigger:{scope:t.STORAGE,priority:"internal"},unreadMessages:{type:n.INTEGER,value:0,scope:t.STORAGE},userLocale:{value:""},vid:{scope:t.STORAGE,type:n.INTEGER,priority:"internal"},visIdFromNx:{scope:t.STORAGE,type:n.INTEGER},viewedPages:{type:n.INTEGER,value:0,scope:t.STORAGE,noNaN:!0},visitorCode:{type:n.OBJECT,value:{}},visits:{type:n.INTEGER,value:0,scope:t.STORAGE}},c=function(t){e.dispatcher.addEventListener("on"+t.charAt(0).toUpperCase()+t.substr(1)+"Changed",function(){o("span.redhlp_"+t).html(e[t])})},h=r.CLIENT_NAME+(s.companyId?"."+s.companyId:"");e.attachTo(a,l,"external"),e.init(h,l),e.codename||(e.codename=r.CODENAME),e.codename!==r.CODENAME&&(e.clear(),e.codename=r.CODENAME);for(d in l)l.hasOwnProperty(d)&&c(d);return e.dispatcher.addEventListener("onVidChanged",function(){o(".redhlp_code").text((e.vid+"").substr((e.vid+"").length-4))}),o(".redhlp_code").text((e.vid+"").substr((e.vid+"").length-4)),e}),define("config/default",["application/session.objects"],function(e){return{template:"modern"==e.skin?"template-modern.html":"template.html"}}),define("application/dispatcher",["common/application/eventTarget"],function(e){var t=new e("Container");return t}),define("view/badgeDimensions",[],function(){var e=15.4,t=.08*e,n=function(){},i=e,r=6,o=10,a="bottom",s=t;return{setFontSize:function(r){i=Math.round(e*(1+parseFloat(r)));var o=s-t;t=Math.round(.08*i),s=t+o,n()},setPadding:function(e){s=Math.round(t*(1+parseFloat(e))),n()},setPosition:function(e){a=e,n()},addHandler:function(e){n=e},setDefault:function(){this.setFontSize(0),this.setPadding(0)},getFontSize:function(){return i},getPadding:function(){return s},getShadow:function(){return o},getRadius:function(){return r},getPosition:function(){return a}}}),define("view/badgePNG",["common/extensions/jquery.plugins","application/session.objects","config/setup"],function(e,t,n){var i="",r=document.createElement("div");r.setAttribute("class","rh-inner"),r.style.display="none",e(r).append("<div id='rh-badgeImage'></div>");var o=0,a=0,s=function(){},d=e("<img src='"+i+"' />")[0],l=function(){if(t.badgeVersion){var n=Math.min(o,a),i=e(r);i.removeClass("rh-small rh-medium rh-large"),i.removeClass("rh-dark");var s=0;t.badgeColor.indexOf("#")>-1&&(s=1);var d=parseInt(t.badgeColor.substr(s,2),16),l=parseInt(t.badgeColor.substr(s+2,2),16),c=parseInt(t.badgeColor.substr(s+4,2),16);return Math.sqrt(d*d*.241+l*l*.391+c*c*.068)>160&&i.addClass("rh-dark"),42>n?void i.addClass("rh-small"):n>47?void i.addClass("rh-large"):void i.addClass("rh-medium")}};i&&e("<img src='"+i+"' />").css({visibility:"hidden",position:"absolute",top:0,left:0}).appendTo("#rh-snippet").load(function(){o=e(this)[0].width>0?e(this)[0].width:o,a=e(this)[0].height>0?e(this)[0].height:a,e(this).remove(),l(),s()}),d.src=i,d.title=t.badgeText||"",r.appendChild(d),t.hideBadge&&(r.style.display="none",d.style.display="none");var c={getBadge:function(){return r},updateBadge:function(){i=~t.badge.indexOf("://")?t.badge:t.badge.length<20?n.DATA_URL+"/images/badge/default/"+t.locale+"/"+t.badgePosition+"/"+t.badge:n.DATA_URL+"/images/badge/custom/"+t.badge,"https://dh7xgsr9ech2h.cloudfront.net/images/badge/default/ru/left/badge13.png"==i?i=n.APP_URL+"container/images/common/badges/badge13.png":"http://dh7xgsr9ech2h.cloudfront.net/images/badge/default/ru/left/badge13.png"==i?i=n.APP_URL+"container/images/common/badges/badge13.png":"http://dh7xgsr9ech2h.cloudfront.net/images/badge/default/ru/left/badge1.png"==i?i=n.APP_URL+"container/images/common/badges/badge1.png":"http://dh7xgsr9ech2h.cloudfront.net/images/badge/default/ru/left/badge1.png"==i&&(i=n.APP_URL+"container/images/common/badges/badge1.png"),e(d).attr("src",i),i&&e("<img src='"+i+"' />").css({visibility:"hidden",position:"absolute",top:0,left:0}).appendTo("#rh-snippet").load(function(){o=e(this)[0].width>0?e(this)[0].width:o,a=e(this)[0].height>0?e(this)[0].height:a,e(this).remove(),l(),s()})},getBox:function(){return{width:o,height:a}},getVisibleBox:function(){return{width:t.badgePosition.indexOf("bottom")>-1?o:o*(t.badgeVersion?.65:.78),height:t.badgePosition.indexOf("bottom")>-1?a*(t.badgeVersion?.65:.78):a}},setReset:function(e){s=e}};return c}),define("common/application/viewUtils",["common/extensions/jquery.plugins"],function(e){function t(e,t){return"number"==typeof e?e:"string"==typeof e?-1===e.indexOf("%")?+e.replace("px",""):t*e.replace("%","")/100:0}var n={parseX:function(n){return t(n,e(window).width())},parseY:function(n){return t(n,e(window).height())},getPosition:function(t){var n=!1;e(t).is(":visible")||(n=!0,e(t).show());var i=e(t).position();return n&&e(t).hide(),i},getOffset:function(t){var n=!1;e(t).is(":visible")||(n=!0,e(t).show());var i=e(t).offset();return i.left-=e(window).scrollLeft(),i.top-=e(window).scrollTop(),n&&e(t).hide(),i},getSize:function(t){var n=!1;e(t).is(":visible")||(n=!0,e(t).show());var i={width:e(t).width(),height:e(t).height()};return n&&e(t).hide(),i},getMinSize:function(t){return{"min-width":n.parseY(e(t).css("min-width")),"min-height":n.parseX(e(t).css("min-height"))}},getMaxSize:function(t){return{"max-width":n.parseY(e(t).css("max-width")),"max-height":n.parseX(e(t).css("max-height"))}},getBox:function(t){var n=!1;e(t).is(":visible")&&"none"!==e(t).css("display")||(n=!0);var i=e(t).is(":hidden");n&&e(t).show();var r=e(t).offset()||{left:0,top:0};return r.left-=e(window).scrollLeft(),r.top-=e(window).scrollTop(),r.width=e(t).width(),r.height=e(t).height(),i?e(t).hide():e(t).css("display",""),r},getBoundingBox:function(t,n){if(!e(t).is(":visible")&&"block"!==e(t).css("display")){if(!n)return{top:0,left:0,width:0,height:0};e(t).show()}var i={left:parseInt(e(t).css("padding-left"),10),right:parseInt(e(t).css("padding-right"),10),top:parseInt(e(t).css("padding-top"),10),bottom:parseInt(e(t).css("padding-bottom"),10)};for(var r in i)i[r]!==i[r]&&(i[r]=0);var o={left:parseInt(e(t).css("border-left-width"),10),right:parseInt(e(t).css("border-right-width"),10),top:parseInt(e(t).css("border-top-width"),10),bottom:parseInt(e(t).css("border-bottom-width"),10)};for(r in o)o[r]!==o[r]&&(o[r]=0);var a=e(t).offset();return a.width=e(t).width()+i.left+i.right+o.left+o.right,a.height=e(t).height()+i.top+i.bottom+o.top+o.bottom,a},getIndents:function(t){return"string"==typeof t&&(t=e(t)),{padding:{left:parseInt(t.css("padding-left"),10)?parseInt(t.css("padding-left"),10):0,right:parseInt(t.css("padding-right"),10)?parseInt(t.css("padding-right"),10):0,top:parseInt(t.css("padding-top"),10)?parseInt(t.css("padding-top"),10):0,bottom:parseInt(t.css("padding-bottom"),10)?parseInt(t.css("padding-bottom"),10):0},border:{left:parseInt(t.css("border-left-width"),10)?parseInt(t.css("border-left-width"),10):0,right:parseInt(e(t).css("border-right-width"),10)?parseInt(e(t).css("border-right-width"),10):0,top:parseInt(e(t).css("border-top-width"),10)?parseInt(e(t).css("border-top-width"),10):0,bottom:parseInt(e(t).css("border-bottom-width"),10)?parseInt(e(t).css("border-bottom-width"),10):0}}}};return n}),define("view/badgePosition",["common/extensions/jquery.plugins","view/badgeDimensions","view/badgePNG","common/application/viewUtils","application/dispatcher","application/session.objects"],function(e,t,n,i,r,o){var a,s,d,l,c,h,p,u={init:function(){a||(a=e("#rh-badge"),s=e(n.getBadge()),e(window).resize(function(){u.reset()}),n.setReset(function(){u.reset(),r.fire("badgeLoaded")}))},reset:function(){p&&this.setPosition(p),c&&this.setX(c),h&&this.setY(h)},setX:function(t){if(a||this.init(),-1===p.indexOf("bottom"))return void(d=t);d=!1,c=t,a.css({left:"",right:""}),s.css({left:"",right:""});var n="-"!==t[0]?"left":"right",i="-"===t[0]?"left":"right";if(t.indexOf("%")>-1){var r=Math.abs(parseInt(t,10));a.css(n,e(window).width()*r/100-s.width()*r/100+"px"),a.css(i,"")}else a.css(n,Math.abs(parseInt(t,10))+"px"),a.css(i,"");this.setBox()},setY:function(t){if(a||this.init(),p.indexOf("bottom")>-1)return void(l=t);l=!1,h=t;var n="-"!==t[0]?"top":"bottom",i="-"===t[0]?"top":"bottom";if(t.indexOf("%")>-1){var r=Math.abs(parseInt(t,10));a.css(n,e(window).height()*r/100-s.height()*r/100+"px"),a.css(i,"")}else a.css(n,Math.abs(parseInt(t,10))+"px"),a.css(i,"");this.setBox()},setPosition:function(e){a||this.init(),p=e,t.setPosition(e),a.css(n.getBox()),s.css(n.getBox()),a.removeClass("rh-left rh-right rh-bottom").addClass("rh-"+e);var i={};s.css(i),this.setBox()},setBox:function(){switch(p){case"left":l&&this.setY(l),a.css("left",-a.width()*(o.badgeVersion?.22:.35)+"px"),s.css("left","");break;case"right":l&&this.setY(l),a.css("right",-a.width()*(o.badgeVersion?.22:.35)+"px"),s.css("left",""),a.css("left","");break;case"bottom":case"bottom-left":case"bottom-right":d&&this.setX(d),s.css("top",""),a.css({bottom:-a.height()*(o.badgeVersion?.22:.35)+"px",top:""})}},getBox:function(){var e=i.getBox(n.getBadge());switch(p){case"left":e.left=0;break;case"bottom":case"bottom-left":case"bottom-right":e.bottom=0;break;case"right":e.right=0}return e},getOffset:function(){var t=i.getOffset(e(n.getBadge()));return"left"===p&&(t.left=0),t}};return u}),define("text",["module"],function(e){var t,n,i,r,o,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,d=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,c=l&&location.protocol&&location.protocol.replace(/\:/,""),h=l&&location.hostname,p=l&&(location.port||void 0),u={},f=e.config&&e.config()||{};return t={version:"2.0.14",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(d);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=a[t];try{e=new ActiveXObject(n)}catch(i){}if(e){a=[n];break}}return e},parseName:function(e){var t,n,i,r=!1,o=e.lastIndexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!a||o>1)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,i=n||t,o=i.indexOf("!"),-1!==o&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,r){var o,a,s,d=t.xdRegExp.exec(e);return d?(o=d[2],a=d[3],a=a.split(":"),s=a[1],a=a[0],!(o&&o!==n||a&&a.toLowerCase()!==i.toLowerCase()||(s||a)&&s!==r)):!0},finishLoad:function(e,n,i,r){i=n?t.strip(i):i,f.isBuild&&(u[e]=i),r(i)},load:function(e,n,i,r){if(r&&r.isBuild&&!r.inlineText)return void i();f.isBuild=r&&r.isBuild;var o=t.parseName(e),a=o.moduleName+(o.ext?"."+o.ext:""),s=n.toUrl(a),d=f.useXhr||t.useXhr;return 0===s.indexOf("empty:")?void i():void(!l||d(s,c,h,p)?t.get(s,function(n){t.finishLoad(e,o.strip,n,i)},function(e){i.error&&i.error(e)}):n([a],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)}))},write:function(e,n,i,r){if(u.hasOwnProperty(n)){var o=t.jsEscape(u[n]);i.asModule(e+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,n,i,r,o){var a=t.parseName(n),s=a.ext?"."+a.ext:"",d=a.moduleName+s,l=i.toUrl(a.moduleName+s)+".js";t.load(d,i,function(n){var i=function(e){return r(l,e)};i.asModule=function(e,t){return r.asModule(e,l,t)},t.write(e,d,i,o)},o)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var r=n.readFileSync(e,"utf8");"\ufeff"===r[0]&&(r=r.substring(1)),t(r)}catch(o){i&&i(o)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,i,r){var o,a=t.createXhr();if(a.open("GET",e,!0),r)for(o in r)r.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),r[o]);f.onXhr&&f.onXhr(a,e),a.onreadystatechange=function(t){var r,o;4===a.readyState&&(r=a.status||0,r>399&&600>r?(o=new Error(e+" HTTP status: "+r),o.xhr=a,i&&i(o)):n(a.responseText),f.onXhrComplete&&f.onXhrComplete(a,e))},a.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,r="utf-8",o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),d="";try{for(n=new java.lang.StringBuffer,i=s.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=s.readLine());)n.append(a),n.append(i);d=String(n.toString())}finally{s.close()}t(d)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,r=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,a,s,d={};o&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),n.init(s,1,0,!1),a=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),a.init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),d),a.close(),n.close(),t(d.value)}catch(l){throw new Error((s&&s.path||"")+": "+l)}}),t}),define("text!config/../../template.html",[],function(){return'<template>\n    <div id="chooseDepartment" style="display: none">\n        <div class="colorifier"></div>\n        <div class="topPanel">\n            <div class="topHeader"></div>\n            <div class="topText"></div>\n        </div>\n        <div class="chooseDepartmentTextWrapper">\n            <div class="chooseDepartmentText"></div>\n            <span class="hideDepartments"><span class="icon"><div class="colorifier"></div><span></span></span><span class="txt"></span></span>\n        </div>\n        <div id="departmentsWrapper">\n            <div id="departmentsContainer">\n                <ul id="departments"></ul>\n                <div class="scroller__track">\n                    <div class="scroller__bar" id="departments_bar"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div id="offline" style="display: none;">\n   <div class="colorifier"></div>\n    <div class="center">\n      <div class="topPanel">\n                <span class="showDepartments"><span class="icon"><div class="colorifier"></div><span></span></span><span class="txt"></span></span>\n       <div class="header"></div>\n        <div class="description"></div>\n     </div>\n      <div id="offlineError"></div>\n     <div id="mailSuccess"></div>\n      <div id="feedbackForm">\n       <div class="inputField name inputField_name">\n         <input id="name" type="text" name="name"/>\n        </div>\n        <div class="inputField email">\n          <input id="email" type="email" name="email"/>\n       </div>\n                <div class="inputField phone">\n                    <input id="phone" type="text" name="phone"/>\n                </div>\n        <div class="inputField message">\n          <textarea id="message" name="message"></textarea>\n       </div>\n        <div id="actionPanel">\n          <div id="sendButton"></div>\n         <div id="throbber" style="display: none;"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div id="offlineSuccess" style="display: none;">\n    <div></div>\n </div>\n  <div id="online" style="display: none;">\n    <div class="colorifier"></div>\n    <div id="onlinePanel">\n      <div class="center">\n        <div class="wrapper">\n         <div class="topPanel">\n            <div id="faceWrapper">\n              <div id="faceRate">\n                                <div id="faceImgWrapper"><img id="face" alt=""></div>\n                                <div id="rate">\n                                    <div class="colorifier"></div>\n                                    <a id="like">&nbsp;</a>\n                                    <a id="dislike">&nbsp;</a>\n                                </div>\n                            </div>\n              <div id="topDescription">\n               <div id="topHeader"></div>\n                <div id="topText"></div>\n                                <div style="clear: both;"></div>\n                                <a class="showDepartments"><span class="icon"><div class="colorifier"></div><span></span></span><span class="txt"></span></a>\n             </div>\n            </div>\n          </div>\n          <div id="scrollBarContainer">\n           <div id="scrollBar"></div>\n          </div>\n                    <div id="chatContainer">\n                        <div id="chatItself">\n                            <div id="invitation"></div>\n\n                            <div class="msg" id="typingLabel">\n                                <div class="textWrapper">\n                                    <div class="text">%text%</div>\n                                </div>\n                            </div>\n                            <div class="msg" id="chatLabel">\n                                <div class="textWrapper">\n                                    <div class="text">%text%</div>\n                                </div>\n                            </div>\n                            <div class="scroller__track">\n                                <div class="scroller__bar" id="chat_bar"></div>\n                            </div>\n                        </div>\n                    </div>\n          <div id="chatInput">\n            <div id="textAreaWrapper">\n              <textarea id="chatTextarea" spellcheck="false"></textarea>\n            </div>\n            <a id="chatSend"><div class="colorifier"></div></a>\n                        <a id="fileSend"><div class="colorifier"></div></a>\n          </div>\n                    <div id="fileUploadWrapper">\n                        <div class="text">\n                        </div>\n                        <input type="file" name="file" id="uploadedFile"/>\n                    </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n    <div id="fromOperatorHeader" class="msgHeader fromOperator">\n    <span class="sender">%displayName%</span>\n </div>\n\n  <div id="fromOperator" class="msg">\n   <span class="time" title="%date%">%time%</span>\n   <div class="textWrapper">\n     <div class="text">%text%</div>\n    </div>\n  </div>\n\n  <div id="fromVisitorHeader" class="msgHeader fromVisitor">\n    <span class="sender">%displayName%</span>\n </div>\n\n  <div id="fromVisitor" class="msg">\n    <span class="time" title="%date%"><span class="delivery"></span>%time%</span>\n   <div class="textWrapper">\n     <div class="text">%text%</div>\n    </div>\n  </div>\n  <div id="promptContainer" class="msg">\n    <span class="time" title="%date%">%promptTime%</span>\n   <div class="textWrapper">\n     <div class="text">%text%</div>\n    </div>\n  </div>\n</template>'}),define("text!config/../../template-modern.html",[],function(){return'<template>\n  <div id="chooseDepartment" style="display: none">\n   <div class="center">\n      <div class="topPanel">\n        <div class="topHeader colorText"></div>\n       <div class="topText colorText"></div>\n       <div style="clear:both;"></div>\n     </div>\n      <div class="chooseDepartmentTextWrapper">\n       <div class="chooseDepartmentText colorText"></div>\n        <span class="hideDepartments"><span class="icon"><div class="colorifier"></div><span></span></span><span class="txt colorText"></span></span>\n     </div>\n      <div id="departmentsWrapper">\n       <div id="departmentsContainer">\n         <ul id="departments"></ul>\n          <div class="scroller__track">\n           <div class="scroller__bar" id="departments_bar"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div id="offline" style="display: none;">\n   <div class="center">\n      <div class="topPanel">\n        <div class="topHeader header colorText"></div>\n        <div class="topText description colorText"></div>\n       <span class="showDepartments"><span class="icon"><div class="colorifier"></div><span></span></span><span class="txt colorText"></span></span>\n       <div style="clear: both;"></div>\n      </div>\n\n      <div id="offlineError"></div>\n     <div id="mailSuccess"></div>\n      <div id="feedbackForm">\n       <div class="inputField name inputField_name">\n         <input id="name" type="text" name="name"/>\n        </div>\n        <div class="inputField email">\n          <input id="email" type="email" name="email"/>\n       </div>\n        <div class="inputField phone">\n          <input id="phone" type="text" name="phone"/>\n        </div>\n        <div class="inputField message">\n          <textarea id="message" name="message"></textarea>\n       </div>\n        <div id="actionPanel">\n          <div id="sendButton"></div>\n         <div id="throbber" style="display: none;"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div id="offlineSuccess" style="display: none;">\n    <div></div>\n </div>\n  <div id="online" style="display: none;">\n    <div id="onlinePanel">\n      <div class="center">\n        <div class="wrapper">\n         <div class="topPanel">\n            <div id="faceWrapper">\n              <div id="faceRate">\n               <div id="faceImgWrapper"><img id="face" alt=""></div>\n               <div id="rate">\n                 <a id="like">&nbsp;</a>\n                 <a id="dislike">&nbsp;</a>\n                </div>\n              </div>\n              <div id="topDescription">\n               <div id="topHeader" class="topHeader colorText"></div>\n                <div id="topText" class="topText colorText"></div>\n              </div>\n              <div style="clear: both;"></div>\n            </div>\n            <div id="chatOperatorInfo">\n             <a class="showDepartments"><span class="icon"><div class="colorifier"></div><span></span></span><span class="txt colorText"></span></a>\n             <span id="operatorArrow" class="colorText">&raquo;</span>\n             <span id="operatorLabel" class="colorText"></span>\n              <span id="operatorName" class="colorText"></span>\n           </div>\n          </div>\n\n          <div id="scrollBarContainer">\n           <div id="scrollBar"></div>\n          </div>\n          <div id="chatContainer">\n            <div id="chatItself">\n             <div id="invitation"></div>\n\n             <div class="msg" id="typingLabel">\n                <div class="textWrapper">\n                 <div class="text">%text%</div>\n                </div>\n              </div>\n              <div class="msg" id="chatLabel">\n                <div class="textWrapper">\n                 <div class="text">%text%</div>\n                </div>\n              </div>\n              <div class="scroller__track">\n               <div class="scroller__bar" id="chat_bar"></div>\n             </div>\n            </div>\n          </div>\n          <div id="chatResize"></div>\n         <div id="chatInput">\n            <div id="textAreaWrapper">\n              <textarea id="chatTextarea" spellcheck="false"></textarea>\n            </div>\n            <a id="chatSend"></a>\n           <a id="fileSend"></a>\n         </div>\n          <div id="fileUploadWrapper">\n            <div class="text">\n            </div>\n            <input type="file" name="file" id="uploadedFile"/>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div id="fromOperatorHeader" class="msgHeader fromOperator">\n    <span class="time" title="%date%">%time%</span>\n   <div class="msgHeaderFace">\n     <div class="chatFace"><img class="face" width="21" alt=""/></div>\n     <div class="speak"></div>\n   </div>\n  </div>\n\n  <div id="fromOperator" class="msg">\n   <div class="textWrapper">\n     <div class="text">%text%</div>\n    </div>\n    <div style="clear: both;"></div>\n  </div>\n\n  <div id="fromVisitorHeader" class="msgHeader fromVisitor">\n    <span class="time" title="%date%">%time%</span>\n   <div class="msgHeaderFace">\n     <div class="chatFace"><img src="../container/images/modern/visitor_small.png?v=2" alt=""/></div>\n      <div class="speak"></div>\n   </div>\n  </div>\n\n  <div id="fromVisitor" class="msg">\n    <div class="textWrapper">\n     <div class="text">%text%</div>\n    </div>\n    <div style="clear: both;"></div>\n  </div>\n  \n  <div id="promptContainer" class="msg">\n    <span class="time" title="%date%">%promptTime%</span>\n   %text%\n  </div>  \n</template>';
});var rhlpSettingsURL=function(){try{var e=document.getElementById("rhlpscrtg").dataset?document.getElementById("rhlpscrtg").dataset.settings:document.getElementById("rhlpscrtg").getAttribute("data-settings");if(e){if(e.indexOf("://")>-1)return e+=e.indexOf("?")>-1?"&":"?",e+="callback=redhelper.define";var t=location.protocol+"//"+location.host;return 0!=e.indexOf("/")&&(t+="/"),"text!"+t+e}return"config/default"}catch(n){return console&&console.error,"config/default"}}();define("config/api",["common/extensions/jquery.plugins","application/dispatcher",rhlpSettingsURL||"config/default","text!../../template.html","text!../../template-modern.html","application/session.objects"],function(e,t,n,i,r,o){function a(){if("config/default"===rhlpSettingsURL||o.free||!p.template)c="modern"==o.skin?r:i,h=!0;else{var n="";n=p.template.indexOf("://")>-1?p.template:/^\//.test(p.template)?/(.*?:\/\/.*?)\//.exec(rhlpSettingsURL)[1]+p.template:/(.*?:\/\/.*)\//.exec(rhlpSettingsURL)[0]+p.template,-1!==rhlpSettingsURL.indexOf("text!")||p.template&&p.template.indexOf("nojsonp")>-1?(e.support.cors=!0,e.ajax({url:p.template.indexOf("://")>-1?p.template:location.protocol+"//"+location.host+"/"+p.template,dataType:"html",success:function(e){c=e,h=!1,t.fire("templateReceived",{template:c,isDefault:!1})}})):e.ajax({url:n,dataType:"jsonp",success:function(e){c=e,h=!1,t.fire("templateReceived",{template:c,isDefault:!1})}})}if(t.addEventListener("templateRequest",function(){c&&t.fire("templateReceived",{template:c,isDefault:h})}),(!o.free||o.openApi)&&(p.innerCSS&&(p.innerCSS=l(p.innerCSS,d)),p.outerCSS&&(p.outerCSS=l(p.outerCSS,location.protocol)),p.additionalJS))for("string"==typeof p.additionalJS&&(p.additionalJS=[p.additionalJS]),s=p.additionalJS.length-1;s>-1;s--)p.additionalJS[s]=l(p.additionalJS[s],d)}var s,d=e("#rhlpscrtg").attr("src").indexOf("https://")>-1?"https:":"http:",l=function(e,t){return e.indexOf("://")>-1?e.replace(/.*?:/,t):0===rhlpSettingsURL.indexOf("text!")?t+"//"+location.hostname+"/"+e:rhlpSettingsURL.indexOf("://")>-1?/^\//.test(e)?(/(.*?:\/\/.*?)\//.exec(rhlpSettingsURL)[1]+e).replace(/.*?:/,t):(/(.*?:\/\/.*)\//.exec(rhlpSettingsURL)[0]+e).replace(/.*?:/,t):void 0},c="",h=!1,p="string"==typeof n?JSON.parse(n):n;return o.skin?a():o.dispatcher.addEventListener("onSkinChanged",function(){a()}),p}),define("locales",{enabled:["az","bg","cs","de","dk","ee","en","es","fa","fi","hu","it","kk","lt","lv","md","pl","ru","sk","uk","zh"],locales:{az:{YES_LABEL:"Bəli",NO_LABEL:"Xeyir",MINIMIZE_CHAT:"çatı aşağı çevir",MAXIMIZE_CHAT:"ayrı səhifədə açmaq",NEW_MESSAGE:"Operatordan yeni mesaj",BADGE_LABEL:"Sual soruşmaq",WEBSITE:"http://redhelper.ru",SOUND_ONOFF:"Səsi yandırmaq/söndürmək",COPYRIGHT:"online məsləhətçi",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Diqqət yetirin",HIGHLIGHT_LINK:"Keçmək",HINT_CLOSE:"Bağlamaq üçün tıklayın",DEFAULT_LABEL:"Sual soruşmaq",SOUND:"səs",CODE_HEADER:"Sizin müştəri kodunuz"},bg:{YES_LABEL:"Да",NO_LABEL:"Не",MINIMIZE_CHAT:"Минимизирайте чата",MAXIMIZE_CHAT:"Отворете чата в нов таб",NEW_MESSAGE:"Ново съобщение от оператор",BADGE_LABEL:"Пишете ни",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"Звук вкл/изкл",COPYRIGHT:"powered by",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Моля, внимавай",HIGHLIGHT_LINK:"'Отиди на'",HINT_CLOSE:"Кликни, за да затвориш",DEFAULT_LABEL:"Пишете ни",SOUND:"Звук",CODE_HEADER:"Вашият клиентски код"},cs:{YES_LABEL:"Ano",NO_LABEL:"Ne",MINIMIZE_CHAT:"zavřít chat",MAXIMIZE_CHAT:"otevřít v novém okně",NEW_MESSAGE:"Nová zpráva od operátora",BADGE_LABEL:"Zeptat se operátora",WEBSITE:"http://redhelper.ru",SOUND_ONOFF:"Zapnout/vypnout zvuk",COPYRIGHT:"Konzultace online od",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Pozor",HIGHLIGHT_LINK:"Přejít",HINT_CLOSE:"Pro zavření stiskněte",DEFAULT_LABEL:"Zeptat se",SOUND:"Zvuk",CODE_HEADER:"Vaš personální kód"},de:{YES_LABEL:"Ja",NO_LABEL:"Nein",MINIMIZE_CHAT:"Fenster  verkleinern",MAXIMIZE_CHAT:"Chat in neuem Tab öffnen",NEW_MESSAGE:"Sie haben eine neue Nachricht von dem Berater",BADGE_LABEL:"Live Chat",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"Ton ein/aus",COPYRIGHT:"Berater von",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Bitte beachten Sie",HIGHLIGHT_LINK:"weiter",HINT_CLOSE:"Klicken Sie hier, um zu schließen",DEFAULT_LABEL:"Live Chat",SOUND:"Ton"},dk:{YES_LABEL:"Ja",NO_LABEL:"Ingen",MINIMIZE_CHAT:"Collapse Chat",MAXIMIZE_CHAT:"åben i et separat faneblad",NEW_MESSAGE:"Ny besked fra operatøren",BADGE_LABEL:"Stil et spørgsmål",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"Aktiver / deaktiver lyd",COPYRIGHT:"online konsulent fra",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Notice",HIGHLIGHT_LINK:"Go",HINT_CLOSE:"Klik for at lukke",DEFAULT_LABEL:"Stil et spørgsmål",SOUND:"Sound",CODE_HEADER:"Din klient kode"},ee:{YES_LABEL:"Jah",NO_LABEL:"Ei",MINIMIZE_CHAT:"minimeeri vestlus",MAXIMIZE_CHAT:"ava teisel vahelehel",NEW_MESSAGE:"Operaator saatis uue sõnumi",BADGE_LABEL:"Esita küsimus",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"Lülita heli sisse/välja",COPYRIGHT:"online-konsultant firmalt",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Pöörake tähelepanu",HIGHLIGHT_LINK:"Mine üle",HINT_CLOSE:"Klikake sulgemiseks",DEFAULT_LABEL:"Esita küsimus",SOUND:"Heli"},en:{YES_LABEL:"Yes",NO_LABEL:"No",MINIMIZE_CHAT:"Minimize chat",MAXIMIZE_CHAT:"Open chat in a new tab",NEW_MESSAGE:"New message from operator",BADGE_LABEL:"Live Chat",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"Sound on/off",COPYRIGHT:"powered by",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Please note",HIGHLIGHT_LINK:"Go to",HINT_CLOSE:"Click to close",DEFAULT_LABEL:"Live Chat",SOUND:"Sound",CODE_HEADER:"Your client code"},es:{YES_LABEL:"Si",NO_LABEL:"No",MINIMIZE_CHAT:"Minimizar",MAXIMIZE_CHAT:"abrir en nueva pestaña",NEW_MESSAGE:"Nuevo mensaje de operador",BADGE_LABEL:"Haz una pregunta",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"Activar/desactivar sonido",COPYRIGHT:"consultor online de",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Tenga en cuenta",HIGHLIGHT_LINK:"Acceder",HINT_CLOSE:"Haga clic para cerrar",DEFAULT_LABEL:"Haz una pregunta",SOUND:"Sonido"},fa:{YES_LABEL:" بله",NO_LABEL:"خیر",MINIMIZE_CHAT:"پنهان کردن پنجره چت",MAXIMIZE_CHAT:"باز کردن چت در یک تب جدید",NEW_MESSAGE:" پیام جدید از اپراتور",BADGE_LABEL:"چت آنلاین",WEBSITE:" http://redhelper.com",SOUND_ONOFF:"قطع/وصل صدا",COPYRIGHT:"طراحی شده توسط ",COPYRIGHT_NAME:" <span>Red</span>Helper",HIGHLIGHT_LABEL:"لطفا توجه کنید",HIGHLIGHT_LINK:"'برو به'",HINT_CLOSE:"برای بستن کلیک کنید",DEFAULT_LABEL:"چت آنلاین",SOUND:"صدا",CODE_HEADER:"کد مشتری شما",RTL:"RTL"},fi:{YES_LABEL:"Kyllä",NO_LABEL:"Ei",MINIMIZE_CHAT:"sulje chat",MAXIMIZE_CHAT:"avata erillisessä välilehdessä",NEW_MESSAGE:"Uusi viesti operaattorit",BADGE_LABEL:"Kysy kysymys",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"Päälle / pois päältä äänen",COPYRIGHT:"Online konsultti",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Huomio",HIGHLIGHT_LINK:"Siirry",HINT_CLOSE:"Sulje napsauttamalla",DEFAULT_LABEL:"Kysy kysymyksen",SOUND:"Ääni"},hu:{YES_LABEL:"Igen",NO_LABEL:"Nem",MINIMIZE_CHAT:"Csevegőablak kicsinyítése",MAXIMIZE_CHAT:"csevegőablak megnyitása új lapon",NEW_MESSAGE:"Új üzenet a munkatársunktól",BADGE_LABEL:"Élő csevegés",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"Hang be/ki",COPYRIGHT:"fejlesztette:",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Kérjük jegyezze fel",HIGHLIGHT_LINK:"Ugrás ide",HINT_CLOSE:"Kattintson ide a bezáráshoz",DEFAULT_LABEL:"Élő csevegés",SOUND:"Hang",CODE_HEADER:"A látogató kódja"},it:{YES_LABEL:"Si",NO_LABEL:"No",MINIMIZE_CHAT:"Ridurre chat",MAXIMIZE_CHAT:"Aprire in una nuova finestra",NEW_MESSAGE:"Nuovo messaggio da parte dell'assistente",BADGE_LABEL:"Fare una domanda",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"Attivare/disattivare audio",COPYRIGHT:"Assistente online di",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Fate attenzione",HIGHLIGHT_LINK:"Vai al",HINT_CLOSE:"Clicca per chiudere",DEFAULT_LABEL:"Fare una domanda",SOUND:"Audio",CODE_HEADER:"Suo codice cliente"},kk:{YES_LABEL:" Иә",NO_LABEL:" Жоқ",MINIMIZE_CHAT:" Чаттытасалау",MAXIMIZE_CHAT:" Косымшабеттеашу",NEW_MESSAGE:"Оператордан жаңа хабарлама",BADGE_LABEL:"Сұрақ қою",WEBSITE:"http://redhelper.ru",SOUND_ONOFF:"Дауысын қосу/сөндіру",COPYRIGHT:"онлайн кеңесші",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Назар аударыңыз",HIGHLIGHT_LINK:"Ету",HINT_CLOSE:"Жабу үшін, батырманы басыңыз",DEFAULT_LABEL:"Сұрақ қою",SOUND:"Дауыс",CODE_HEADER:"Сіздің клиент кодыңыз"},lt:{YES_LABEL:"Taip",NO_LABEL:"Ne",MINIMIZE_CHAT:"sumažinti pokalbį",MAXIMIZE_CHAT:"atidaryti pokalbį naujoje kortelėje",NEW_MESSAGE:"Nauja žinutė nuo operatoriaus",BADGE_LABEL:"Live Chat",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"Garsas įjungtas/išjungtas",COPYRIGHT:"sukurta",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Prašome atkreipti dėmesį",HIGHLIGHT_LINK:"Eiti į",HINT_CLOSE:"Spausti uždarymui",DEFAULT_LABEL:"Live Chat",SOUND:"Garsas",CODE_HEADER:"Jūsų kliento kodas"},lv:{YES_LABEL:"Jā",NO_LABEL:"Nē",MINIMIZE_CHAT:"noslēpt čatu",MAXIMIZE_CHAT:"atvērt atsevišķā cilnē",NEW_MESSAGE:"Jauns ziņojums no operatora",BADGE_LABEL:"Uzdot jautājumu",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"Ieslēgt / izslēgt skaņu",HIGHLIGHT_LABEL:"Pievērstet uzmanību",HIGHLIGHT_LINK:"Pāriet",HINT_CLOSE:"Spiediet, lai aizvērt",DEFAULT_LABEL:"Uzdot jautājumu",SOUND:"Garso"},md:{YES_LABEL:"Da",NO_LABEL:"Nu",MINIMIZE_CHAT:"minimizează chat-ul",MAXIMIZE_CHAT:"deschide în fereastra de alături",NEW_MESSAGE:"Mesaj nou de la operator",BADGE_LABEL:"Dă o întrebare",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"Activează/Dezactivează sunetul",COPYRIGHT:"consultant online de la",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Atrageți atenția",HIGHLIGHT_LINK:"Trecere",HINT_CLOSE:"Faceți click pentru a închide",DEFAULT_LABEL:"Dă o întrebare",SOUND:"Sunet"},pl:{YES_LABEL:"Tak",NO_LABEL:"Nie",MINIMIZE_CHAT:"Zminimalizować okno",MAXIMIZE_CHAT:"Maksymalizować okno w nowej zakładce",NEW_MESSAGE:"Nowa wiadomość od operatora",BADGE_LABEL:"Konwersacja na żywo",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"Dźwięk wł./wył.",COPYRIGHT:" Usługę udziela",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Zwróć uwagę",HIGHLIGHT_LINK:"Przejść",HINT_CLOSE:"Zamknąć",DEFAULT_LABEL:" Konwersacja na żywo",SOUND:"Dźwięk",CODE_HEADER:"Twój kod klienta"},ru:{YES_LABEL:"Да",NO_LABEL:"Нет",MINIMIZE_CHAT:"Свернуть чат",MAXIMIZE_CHAT:"Открыть в отдельной вкладке",NEW_MESSAGE:"Новое сообщение от оператора",BADGE_LABEL:"Задать вопрос",WEBSITE:"http://redhelper.ru",SOUND_ONOFF:"Включить/выключить звук",COPYRIGHT:"Сервис предоставлен",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Обратите внимание",HIGHLIGHT_LINK:"Перейти",HINT_CLOSE:"Кликните, чтобы закрыть",DEFAULT_LABEL:"Задать вопрос",SOUND:"Звук",CODE_HEADER:"Ваш код клиента"},sk:{YES_LABEL:"Áno",NO_LABEL:"Nie",MINIMIZE_CHAT:"Minimalizovať okno",MAXIMIZE_CHAT:"Otvoriť okno v novej záložke",NEW_MESSAGE:"Nová správa od operátora",BADGE_LABEL:"Živá konverzácia",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"Zvuk zap/vyp",COPYRIGHT:"poskytovateľ",COPYRIGHT_NAME:"<span>Red</span>Helper",HIGHLIGHT_LABEL:"Všimnite si",HIGHLIGHT_LINK:"‘Choď’",HINT_CLOSE:"Zavrite",DEFAULT_LABEL:"Živá konverzácia",SOUND:"Zvuk",CODE_HEADER:"Mód Vášho klienta"},uk:{YES_LABEL:"Так",NO_LABEL:"Ні",MINIMIZE_CHAT:"згорнути чат",MAXIMIZE_CHAT:"відкрити в окремій вкладці",NEW_MESSAGE:"Нове повідомлення від оператора",BADGE_LABEL:"Задати питання",SOUND_ONOFF:"Увімкнути/вимкнути звук",COPYRIGHT:"Онлайн консультант от",HIGHLIGHT_LABEL:"Зверніть увагу",HIGHLIGHT_LINK:"Перейти",HINT_CLOSE:"Клацніть, щоб закрити",DEFAULT_LABEL:"Задати питання",SOUND:"Звук",WEBSITE:"http://redhelper.ru"},zh:{YES_LABEL:"是的",NO_LABEL:"不是",MINIMIZE_CHAT:"最小化对话框",MAXIMIZE_CHAT:"在一个新标签里打开对话",NEW_MESSAGE:"顾问发来的新的信息",BADGE_LABEL:"在线聊天",WEBSITE:"http://redhelper.com",SOUND_ONOFF:"声音打开/关闭",COPYRIGHT:"技术支持由",COPYRIGHT_NAME:"<span>红色</span>助手",HIGHLIGHT_LABEL:"请留笔记",HIGHLIGHT_LINK:"'到'",HINT_CLOSE:"点击关闭",DEFAULT_LABEL:"在线聊天",SOUND:"声音",CODE_HEADER:"您的客户号码"}}}),define("config/lang",["application/session.objects","config/api","common/extensions/jquery.plugins","locales"],function(e,t,n,i){var r={YES_LABEL:"",NO_LABEL:"",MINIMIZE_CHAT:"",MAXIMIZE_CHAT:"",NEW_MESSAGE:"",BADGE_LABEL:"",WEBSITE:"",SOUND_ONOFF:"",COPYRIGHT:"",HIGHLIGHT_LABEL:"",HIGHLIGHT_LINK:"",HINT_CLOSE:"",DEFAULT_LABEL:"",COPYRIGHT_NAME:"<span>Red</span>Helper",SOUND:"",CODE_HEADER:"",RTL:""};return r.setFields=function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},r.initLanguage=function(){var o,a=i.enabled,s=function(){return window.redhlpSettings&&window.redhlpSettings.lang&&a.indexOf(window.redhlpSettings.lang)>-1?(e.userLocale=window.redhlpSettings.lang,window.redhlpSettings.lang):e&&e.locale&&a.indexOf(e.locale)>-1?(e.userLocale=e.locale,e.locale):"ru"}();if(s&&"ru"!==s&&n(".rh-copy").hide(),r.RTL&&n("#rh-snippet").addClass("rh-rtl"),r.setFields(i.locales[s]),!e.free&&t&&t.Lang)for(o in r)r.hasOwnProperty(o)&&t.Lang.hasOwnProperty(o)&&(r[o]=t.Lang[o])},r.initLanguage(),r}),define("config/settings",["common/extensions/jquery.plugins","config/api"],function(e,t){var n={};return n}),define("common/extensions/performance",[],function(){var e={},t=0,n=function(){var t="";t=JSON.stringify(e);try{localStorage.setItem("rhlp.performance",t)}catch(n){}};if(localStorage.getItem("rhlp.performance"))try{e=JSON.parse(localStorage.getItem("rhlp.performance"))}catch(i){}return setInterval(function(){t+=20},20),{addPoint:function(i){e[i]?(e[i].times++,e[i].sum+=t):(e[i]={},e[i].times=1,e[i].sum=t),n()},getStats:function(){return e},clearStats:function(){e={},n()}}}),define("view/badge",["application/session.objects","view/badgeDimensions","view/badgePosition","view/badgePNG","common/extensions/jquery.plugins","application/dispatcher","common/constants/chatState","config/setup","config/lang","config/settings","common/extensions/performance","common/extensions/browserDetect"],function(e,t,n,i,r,o,a,s,d,l,c,h){return{_htmlContent:'<div id="rh-badge" style="overflow: visible; display: none; position: fixed;"><div id="rh-badgeContent" style="display: none">'+d.BADGE_LABEL+'</div><div id="rh-badgeExpander"></div></div>',_element:null,_wrapper:null,_apiElements:null,_dontShow:!1,_blinkingId:null,_isBlinking:!1,_docTitle:"",_style:null,_lockResize:!1,_activeElement:null,_addBlinkStyle:function(){var t=this;e.dispatcher.addEventListener("onBadgeChanged",function(){t._addBlinkStyle()})},append:function(o){function a(){(l.button||l.buttonBadge)&&(c._dontShow=!!l.button,c._apiElements=r(l.button||l.buttonBadge))}l.iframe||o.append(this._htmlContent),this._wrapper=r("#rh-badge"),this._element=r(i.getBadge()),this._element.hide(),this._wrapper.css({"z-index":99990}),r("rh-inner",this._wrapper).css({position:"relative",margin:"1px","font-family":'"Segoe UI", Tahoma, Arial, Verdana, sans-serif'});var s=this,d=function(){!s._lockResize&&s._wrapper&&s._wrapper.css(i.getBox())};t.addHandler(d),this._wrapper.append(i.getBadge()),n.init(),e.dispatcher.addEventListener("onBadgeChanged",function(){i.updateBadge()}),e.dispatcher.addEventListener("onBadgePaddingChanged",function(){t.setPadding(e.badgePadding)}),e.dispatcher.addEventListener("onBadgePositionChanged",function(){n.setPosition(e.badgePosition)}),e.dispatcher.addEventListener("onBadgeXChanged",function(){n.setX(e.badgeX)}),e.dispatcher.addEventListener("onBadgeYChanged",function(){n.setY(e.badgeY)});var c=this;setInterval(a,1e3),a()},init:function(){function s(){h._apiElements&&h._apiElements.not(".rh-initialized").addClass("rh-initialized").click(function(t){t.preventDefault(),e.chatState!==a.WINDOW&&(d._activeElement=r(this),o.fire("openChat"),o.fire("openChatButtonClicked"))})}var d=this;this._element.click(function(){d._activeElement=d._wrapper,o.fire("openChat"),o.fire("openChatButtonClicked")}).mousedown(function(){});var h=this;if(setInterval(s,1e3),s(),e.skin&&this._addBlinkStyle(),e.messageUnread&&(l.button||this._element.addClass("active"),this._docTitle=document.title,document.title="("+e.unreadMessages+") "+document.title),o.addEventListener("openChat",function(){l.button||d.hide()}),o.addEventListener("closeChat",function(){l.button||d.show()}),o.addEventListener("start",function(){if(o.fire("badgeInit"),e.chatState!==a.WINDOW){e.badgePosition&&n.setPosition(e.badgePosition),e.badgeX&&n.setX(e.badgeX),e.badgeY&&n.setY(e.badgeY),e.skin&&d._addBlinkStyle(),i.updateBadge(),e.badgeFontSize&&t.setFontSize(e.badgeFontSize),e.badgePadding&&t.setPadding(e.badgePadding);var r=function(){e.animateBadge?d.slideOut():d.show(),o.removeEventListener("badgeLoaded",r)};o.addEventListener("badgeLoaded",r)}}),e.hideBadge&&(this._dontShow=!0),e.badgePosition&&("bottom-left"===e.badgePosition&&(e.badgeX="0%"),"bottom-right"===e.badgePosition&&(e.badgeX="-0%"),n.setPosition(e.badgePosition)),e.badge&&i.updateBadge(),e.badgeFontSize&&t.setFontSize(e.badgeFontSize),e.badgePadding&&t.setPadding(e.badgePadding),e.badgeX&&n.setX(e.badgeX),e.badgeY&&n.setY(e.badgeY),e.chatState!==a.WINDOW){var p=function(){e.animateBadge?d.slideOut():d.show(),o.removeEventListener("badgeLoaded",p)};o.addEventListener("badgeLoaded",p)}o.fire("badgeInit"),c.addPoint("badge")},show:function(){this._dontShow||(this._wrapper.show(),this._element.show(),o.fire("badgeShown"))},slideOut:function(){if(!(this._wrapper.is(":visible")&&this._element.is(":visible")||this._dontShow)){var t,n="Explorer"===h.browser&&document.documentMode<9;switch(e.badgePosition){case"left":t="right";break;case"right":t="left";break;case"bottom":case"bottom-left":case"bottom-right":t="top"}var i={};this._wrapper.show(),this._element.show(),i[t]=this._element.height()+"px",i.position="absolute",this._element.css(i);var r={};r[t]="0px";var a=this;try{var s=function(){a._element[0].style.display="inline-block",a._element[0].offsetHeight,a._element[0].style.display="block",setTimeout(function(){o.fire("badgeShown")},50)};n?(this._element.css(r),s()):this._element.animate(r,{duration:500,complete:s})}catch(d){i.position="static",i[t]="0%",this._element.css(i),this.show()}}},hide:function(){this._element.hide()},getActiveElement:function(){return l.button?this._activeElement?this._activeElement:this._apiElements?l.buttonBadge?this._element:r(this._apiElements.filter(":visible")[0]):this._wrapper:this._wrapper}}}),define("view/chat.html",["config/lang"],function(e){var t='<div id="rh-chatWrapper"><div id="rh-chat" style="display:none;"><div id="rh-chatBack" class=""></div><div id="rh-chatShadow"></div><div id="rh-chatInnerWrapper"><div class="rh-draggable rh-reset" id="rh-topPanel"><div id="rh-chatIcon"></div><div id="rh-chatTitle"></div></div><div id="rh-close" title="'+e.MINIMIZE_CHAT+'"><div></div></div><div id="rh-sound" title="'+e.SOUND_ONOFF+'"><div></div></div><div id="rh-chatWindow"><div id="rh-frameWrapper"><div id="rh-frameHelper"></div><div id="rh-frameLoading" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; background: url(data:image/gif;base64,R0lGODlhWwAZAPAAAAAAAAAAACH5BAlGAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAWwAZAAACMISPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEopFYAAAh+QQJRgABACwAAAAAWwAZAID///8AAAACX4x/oAvoD6OctE6Gld28+5SFzUeWnoia6gqhLgur7hzX55zaOoXT+//ovYDEgNBX3B2HSd0y17Q9RVHnNFOVXjHZ2pbbjX01YfG47N2i09c1e+nWHuPWHv2HvOOxelgBACH5BAlGAAEALAAAAABbABkAgP///wAAAAKIjH+gC+gPEVux2nunxlZPDoaJ54kGWZrqg5Jim64r7HJ0LId33e1brvN9MkIGEFT8RZLDY4+peEKdUmgDYjVSsdkot7v9Zpfda1hSJoPP6DUrzR65HWVzvK4ex+XTynz/R6e3x1eEYUUoyHTYl1i4g5Tk+ObzIjQpBqNSiZmHs9nSydh09NlZAAAh+QQJRgABACwAAAAAWwAZAID///8AAAACnox/oAvoDxFbsdap7MNTa854Fkh9ZCdKZ5gmawm9aCqzdJ1tOGzujejLuYK/EbF4OaqIniMy4hwqk1Hq1CmMYY1RLG+51XrHT2lVR/ZCx+t0GP12uNXiOHgebNvN+J3+LMdG95dnxRQwWHdI6MOH0zTFVWgAyFgDuUg52eMHtOl40oLYefNoySGqKZM6usqJygr6lboiChsbOIPrWFEAADs=) 50% 50% no-repeat;"></div><div id="rh-copy"><a href="'+e.WEBSITE+'?copy" target="_blank"><span class="rh-textWrapper">'+e.COPYRIGHT+"</span> "+e.COPYRIGHT_NAME+'</a></div><iframe id="rh-chatFrame" frameBorder="0"></iframe></div></div><div id="rh-resizeBoth"></div></div></div></div><div id="rh-block"></div>';return t}),define("view/minbox",["application/chatWindow","common/extensions/jquery.plugins","application/session.objects"],function(e,t,n){var i={width:300,height:420},r={width:Math.ceil(4*i.width/3),height:Math.ceil(4*i.height/3)},o=i.width/i.height,a=.001;return e.addHandler("setMinSize",function(e){var s={width:0,height:0};e.width&&(s.width=parseInt(e.width,10)),e.height&&(s.height=parseInt(e.height,10)),(s.width>r.width||s.height>r.height)&&(s=r),s.width*o-s.height>a&&(s.height=s.width/o),s.height-s.width*o>a&&(s.width=s.height*o),s.width<i.width&&(s=i),n.defaultChatHeight===n.chatHeight&&(n.chatHeight=0),n.defaultChatWidth===n.chatWidth&&(n.chatWidth=0),n.defaultChatHeight=Math.ceil(s.height),n.defaultChatWidth=Math.ceil(s.width),i=s,t("#rh-chat").css({width:n.chatWidth+"px",height:n.chatHeight+"px"})}),!0}),define("common/extensions/color",{parseRGB:function(e){var t=[];return t.push(parseInt(e.substr(1,2),16)),t.push(parseInt(e.substr(3,2),16)),t.push(parseInt(e.substr(5,2),16)),t},rgb2hsl:function(e){var t=e[0]/255,n=e[1]/255,i=e[2]/255,r=Math.max(t,n,i),o=Math.min(t,n,i),a=(r+o)/2,s=0,d=0;r!==o&&(s=.5>a?(r-o)/(r+o):(r-o)/(2-r-o),d=t===r?(n-i)/(r-o):n===r?2+(i-t)/(r-o):4+(t-n)/(r-o)),a=100*a,s=100*s,d=60*d,0>d&&(d+=360);var l=[d,s,a];return l},hsl2rgb:function(e){var t,n,i,r=e[0],o=e[1]/100,a=e[2]/100,s=(1-Math.abs(2*a-1))*o,d=r/60,l=s*(1-Math.abs(d%2-1));void 0===r||isNaN(r)||null===r?t=n=i=0:d>=0&&1>d?(t=s,n=l,i=0):d>=1&&2>d?(t=l,n=s,i=0):d>=2&&3>d?(t=0,n=s,i=l):d>=3&&4>d?(t=0,n=l,i=s):d>=4&&5>d?(t=l,n=0,i=s):d>=5&&6>d&&(t=s,n=0,i=l);var c,h,p,u=a-s/2;return c=255*(t+u),h=255*(n+u),p=255*(i+u),c=Math.round(c),h=Math.round(h),p=Math.round(p),[c,h,p]},blend:function(e,t,n){return e=this.parseRGB(e),t=this.parseRGB(t),[Math.floor(e[0]*n+t[0]*(1-n)),Math.floor(e[1]*n+t[1]*(1-n)),Math.floor(e[2]*n+t[2]*(1-n))]},rgb2string:function(e){return"#"+e[0].toString(16)+e[1].toString(16)+e[2].toString(16)},toRGB:function(e){return e=e.replace("#",""),3==e.length&&(e=e.replace(/(.)/g,"$1$1")),e=parseInt(e,16),[e>>16,(65280&e)>>8,255&e]}}),define("application/command",["application/chatWindow","application/dispatcher"],function(e,t){var n={},i={execute:function(t,n,i){e.send("command.send",{command:t,arguments:n,ignoreAfter:i})},setHandler:function(e,t){n[e]=t},clearHandler:function(e){delete n[e]}};return e.addHandler("command.received",function(e){if(e.command in n)try{n[e.command](e.args)}catch(t){}}),i}),define("view/chat",["common/extensions/jquery.plugins","application/session.objects","common/application/viewUtils","application/dispatcher","application/chatWindow","view/chat.html","config/settings","config/setup","config/lang","common/constants/chatState","view/badge","common/extensions/browserDetect","view/minbox","common/extensions/color","application/command"],function(e,t,n,i,r,o,a,s,d,l,c,h,p,u,f){var g={height:e(window).height(),width:e(window).width()},v={_htmlContent:o,_separateChatWindow:null,_element:null,_isDragged:!1,_inProgress:!1,_attachedBottom:!1,_isResized:!1,_dragOffsetX:0,_dragOffsetY:0,_resizeX1:0,_resizeY1:0,_resizeX2:0,_resizeY2:0,_resizeOffsetX:0,_resizeOffsetY:0,_cursor:"default",_fixMobile:function(){h.isMobile||"iPhone"===h.OS||"Android"===h.OS||"iPhone"===h.browser},_fixBox:function(){var r={height:e(window).height(),width:e(window).width()};if(h.isMobile&&r.height===g.height!=(r.width===g.width))return void v._element.css({top:t.chatY+"px",left:t.chatX+"px",width:t.chatWidth+"px",height:t.chatHeight+"px"});g=r;var o=n.getBox(v._element);o.top<0&&(v._element.css({top:"0px"}),o.top=0),(o.top<0||o.top+o.height>r.height)&&v._element.css({bottom:"0px"}),t.chatHeight&&r.height>o.height&&o.height!==t.chatHeight&&(v._element.height(t.chatHeight),o.height=t.chatHeight),t.chatHeight&&r.height>o.height+o.top&&o.top!==t.chatY&&t.chatY>0&&(v._element.css({top:t.chatY+"px"}),o.top=t.chatY),t.chatWidth&&r.width>o.width&&o.width!==t.chatWidth&&(v._element.width(t.chatWidth),o.width=t.chatWidth),t.chatWidth&&r.width>o.width+o.left&&t.chatX>0&&o.left!==t.chatX&&(v._element.css({left:t.chatX+"px"}),o.left=t.chatX),r.height<o.height?(v._element.height(r.height),v._element.css({top:"0px"})):r.height<o.height+o.top&&v._element.css({top:r.height-o.height}),r.width<o.width?(v._element.width(r.width),v._element.css({left:"0px"})):r.width<o.width+o.left&&v._element.css({left:r.width-o.width+"px"});var a=n.getBox(v._element);v._element&&v._element.is(":visible")&&t.chatState===l.WINDOW&&(t.chatHeight||(t.chatHeight=a.height),t.chatWidth||(t.chatWidth=a.width),i.fire("chatBoxChanged",a))},fillTexts:function(){e("#rh-close").attr("title",d.MINIMIZE_CHAT),e("#rh-copy a").html('<span class="rh-textWrapper">'+d.COPYRIGHT+"</span> "+d.COPYRIGHT_NAME),e("#rh-maximize").val(d.MAXIMIZE_CHAT)},append:function(t){a.iframe||t.append(this._htmlContent),this._element=e("#rh-chat")},init:function(){t.chatX&&(parseInt(t.chatX,10)>=0?this._element.css("left",t.chatX):this._element.css({right:-parseInt(t.chatX,10)+"px",left:"auto"})),t.chatY&&this._element.css("top",t.chatY>0?t.chatY:0);try{JSON.parse(t.offlineFields).length>3&&!t.chatWidth&&(t.chatWidth=380),JSON.parse(t.offlineFields).length>3&&!t.chatHeight&&(t.chatHeight=420)}catch(n){t.offlineFields.length>3&&!t.chatWidth&&(t.chatWidth=380),t.offlineFields.length>3&&!t.chatHeight&&(t.chatHeight=420)}if(t.chatWidth&&this._element.css("width",t.chatWidth),t.chatHeight&&this._element.css("height",t.chatHeight),!t.free)if("mac"==t.skin)t.chatColor&&e(".rh-colorifier").css({background:"#"+t.chatColor,display:"block"}),t.dispatcher.addEventListener("onChatColorChanged",function(){t.chatColor?e(".rh-colorifier").css("background","#"+t.chatColor):e(".rh-colorifier").css("background","none")}),t.chatIntensity&&e(".rh-colorifier").css({opacity:t.chatIntensity/600}),t.dispatcher.addEventListener("onChatIntensityChanged",function(){t.chatColor?e(".rh-colorifier").css({opacity:t.chatIntensity/600}):e(".rh-colorifier").css({opacity:.6})});else{if(t.badgeColor){var o=u.toRGB(t.badgeColor),a=.2126*o[0]+.7152*o[1]+.0722*o[2];e("#rh-topPanel").css("background",t.badgeColor),e("#rh-arrow").css("border-color",t.badgeColor).find(".rh-arrow_itself").css("border-color",t.badgeColor),a>170?e("#rh-chatInnerWrapper").addClass("rh-lightPanel"):e("#rh-chatInnerWrapper").removeClass("rh-lightPanel")}t.dispatcher.addEventListener("onBadgeColorChanged",function(){if(t.badgeColor){var n=u.toRGB(t.badgeColor),i=.2126*n[0]+.7152*n[1]+.0722*n[2];e("#rh-topPanel").css("background",t.badgeColor),e("#rh-arrow").css("border-color",t.badgeColor).find(".rh-arrow_itself").css("border-color",t.badgeColor),i>170?e("#rh-chatInnerWrapper").addClass("rh-lightPanel"):e("#rh-chatInnerWrapper").removeClass("rh-lightPanel")}else e("#rh-topPanel").css("background","none"),e("#rh-topPanel").removeClass("rh-lightPanel")})}v._fixMobile(),i.addEventListener("chatOpened",function(){v._fixBox()}),this.fillTexts(),e(window).resize(function(){v._fixBox()});var s=function(t){var n=!!t.touches;if(t.touches&&(t=t.touches[0]),!n&&("Explorer"===h.browser&&!t.button&&document.documentMode<9&&1===t.which&&(t.which=0),!t.which&&(v._isDragged||v._isResized)))return g(t),!1;if(v._isDragged){var r=t.clientY-v._dragOffsetY,o=v._element.height(),a=e(window).height(),s=t.clientX-v._dragOffsetX,d=e(window).width(),l=v._element.width();r+o>a-20&&a+70>r+o?(r=a-o,v._attachedBottom||(i.fire("attachedBottom"),v._attachedBottom=!0)):v._attachedBottom&&(i.fire("unattachedBottom"),v._attachedBottom=!1),10>r&&(r=0),r>a-20&&(r=a-20),10>s&&(s=0),s+l+10>d&&(s=d-l),v._element.position().top-e(window).scrollTop()===a-o&&r>a-o&&v._attachedBottom&&(i.fire("unattachedBottom"),v._attachedBottom=!1),v._element.css({left:s,top:r})}else v._isResized&&(v._resizeX2=t.clientX,v._resizeY2=t.clientY,v._element.css({width:v._resizeX2-v._resizeX1+v._resizeOffsetX,height:v._resizeY2-v._resizeY1+v._resizeOffsetY}));return!1},d=function(t){return v._inProgress=!0,e("#rh-block").show(),e("#rh-frameHelper").show(),t.touches&&(t=t.touches[0]),v._isDragged=!0,v._dragOffsetX=t.clientX-v._element.position().left,v._dragOffsetY=t.clientY-v._element.position().top,e(document).bind("mousemove",s),!1};e(".rh-draggable").bind("mousedown touchstart",d);try{e(".rh-draggable")[0].addEventListener("touchstart",d)}catch(c){}e("#rh-close").click(function(){i.fire("minifyChat")}),e("#rh-close, #rh-maximize").mousedown(function(){e(this).addClass("pressed").removeClass("hover")}).mouseleave(function(){e(this).hasClass("pressed")&&e(this).removeClass("pressed")}).mouseenter(function(){e(this).hasClass("hover")&&e(this).removeClass("hover").addClass("pressed")}),e(window).mouseup(function(){e("#rh-close, #rh-maximize").removeClass("pressed").removeClass("hover")});var p=function(t){return t.touches&&(t=t.touches[0]),v._inProgress=!0,e("#rh-block").css("cursor","se-resize").show(),v._isResized=!0,v._resizeX1=+v._element.css("left").replace("px",""),v._resizeY1=+v._element.css("top").replace("px",""),v._resizeX2=t.clientX,v._resizeY2=t.clientY,v._resizeOffsetX=5,v._resizeOffsetY=5,v._element.css({left:v._resizeX1,top:v._resizeY1}),e(document).bind("mousemove",s),!1};e("#rh-resizeBoth").bind("mousedown touchstart",p);try{e("#rh-resizeBoth")[0].addEventListener("touchstart",p)}catch(f){}var g=function(n){v._inProgress&&(v._inProgress=!1,e(document).unbind("mousemove",s),n.touches&&(n=n.touches[0]),e("#rh-block").css("cursor","default").hide(),v._isDragged?(t.chatX=n.clientX-v._dragOffsetX,t.chatY=n.clientY-v._dragOffsetY):v._isResized&&(t.chatWidth=v._element.width(),t.chatHeight=v._element.height()),v._isDragged=!1,v._isResized=!1,e("#rh-frameHelper").hide(),e("#rh-block").hide(),v._fixBox())};e(document).bind("mouseup",g);try{e("#rh-block")[0].addEventListener("touchend",g),e("#rh-block")[0].addEventListener("touchmove",s)}catch(m){}i.addEventListener("openChat",function(e){e.first?v.show():v.open()}),i.addEventListener("minifyChat",function(){v.close(),v._fixBox()});var w=!1;if(v._element.is(":visible")||(w=!0,v._element.show()),!w&&v._element.position().top-e(window).scrollTop()+v._element.height()+20>=e(window).height()&&(v._attachedBottom||(i.fire("attachedBottom"),v._attachedBottom=!0),v._element.css({top:e(window).height()-v._element.height()})),w&&v._element.hide(),t.chatState===l.WINDOW&&i.fire("openChat",{first:!0}),t.audioEnabled||e("#rh-sound").addClass("rh-soundOff"),t.dispatcher.addEventListener("onAudioEnabledChanged",function(){e("#rh-sound").toggleClass("rh-soundOff",!t.audioEnabled)}),e("#rh-sound").click(function(){t.audioEnabled?r.send("soundOff"):r.send("soundOn"),e("#rh-sound").toggleClass("rh-soundOff")}),!t.free&&t.chatColor){var b=t.chatColor;b.indexOf("#")<0&&(b="#"+b),"mac"==t.skin?e("#rh-frameWrapper").css("background-color",u.rgb2string(u.blend(b,"#cccccc",(t.chatIntensity||360)/600))):e("#rh-frameWrapper").css("background-color",b)}},show:function(){if(s.IS_PHONE)return void this.runChatInSeparateWindow();if(window.redhlpSettings&&window.redhlpSettings.showInSeparateWindow)return void this.runChatInSeparateWindow(window.redhlpSettings.windowWidth||350,window.redhlpSettings.windowHeight||450);v.fillTexts(),v._element.show();var t=e(window).height()-v._element.position().top+e(window).scrollTop()-v._element.height();20>t&&t>-70?i.fire("attachedBottom"):i.fire("unattachedBottom"),i.fire("chatOpened")},hide:function(){v._element.hide(),i.fire("closeChat")},runChatInSeparateWindow:function(t,n){var r=(t?"width="+t+",":"")+(n?"height="+n+",":""),o=window.redhlpSettings&&window.redhlpSettings.page?window.redhlpSettings.page:page=location.href.substr(0,256),a="?page="+encodeURIComponent(o)+(e("#rhlpscrtg").attr("src").split("://").pop().indexOf("test")>-1?"&test":""),d=this;if(!d._separateChatWindow){
d._separateChatWindow=window.open("http://rhlp.net/"+s.CLIENT_NAME+a,"RedHelper",r+"toolbar=no,status=no,location=no,directories=no,menubar=no");var l=setInterval(function(){return d._separateChatWindow?void(d._separateChatWindow.closed&&(d._separateChatWindow=null,i.fire("closeChat"),clearInterval(l))):void clearInterval(l)},100)}d._separateChatWindow.focus()},open:function(){if(!this._separateChatWindow){if(s.IS_PHONE)return void this.runChatInSeparateWindow();if(window.redhlpSettings&&window.redhlpSettings.showInSeparateWindow)return void this.runChatInSeparateWindow(window.redhlpSettings.windowWidth||350,window.redhlpSettings.windowHeight||450);f.execute("ensureWeHaveOperator",{},1e4),v.fillTexts();var r=n.getBox(this._element);r.opacity=1,t.chatWidth!==r.width&&(t.chatWidth=r.width),t.chatHeight!==r.height&&(t.chatHeight=r.height),t.chatX=r.left>0?r.left:0,t.chatY=r.top>0?r.top:0,this._element.find("iframe").attr("style","display: none !important;");var o=n.getMinSize(this._element);v._element.css(n.getBox(c.getActiveElement())).show().css({opacity:0,"min-width":0,"min-height":0});var a=!1;v._element.animate(r,{duration:300,useCSS3:!1,complete:function(){e("#rh-chatFrame").animate({opacity:"show"},200),a=!0,i.fire("chatOpened"),e(this).css(o),v._element.position().top-e(window).scrollTop()+v._element.height()>=e(window).height()&&(v._attachedBottom||(i.fire("attachedBottom"),v._attachedBottom=!0))},step:function(e,t){!a&&t.pos>.95}})}},close:function(){var t=n.getBox(this._element),r=n.getMinSize(this._element),o=n.getBox(c.getActiveElement(),!0);o.opacity=0,this._element.css({"min-width":0,"min-height":0});var a=!1,s=this;e("#rh-chatFrame").animate({opacity:"0"},100,function(){s._element.animate(o,{duration:300,useCSS3:!1,complete:function(){e(this).css(t).css(r).hide(),i.fire("closeChat"),e("#rh-chatFrame").css({opacity:"1"}),a=!0},step:function(e,t){!a&&t.pos>.2}})})}};return i.addEventListener("chatOpened",function(){r.send("chatOpened")}),v}),define("view/loader",["common/extensions/jquery.plugins","application/dispatcher"],function(e,t){var n=0,i={_defaultCssLoadSelector:"rh-loadCss",_checkLoadInterval:40,_uris:[],loadCss:function(t,n,i){t&&(this._uris.indexOf(t)>-1||(this._uris.push(t),void 0===n&&(n=this._defaultCssLoadSelector),document.createStyleSheet?document.createStyleSheet(t):e("head").append('<link rel="stylesheet" type="text/css" href="'+t+'">'),e("#rh-snippet").length?e("#rh-snippet").append('<div id="'+n+'"></div>'):e("#rh-snippet").append('<div id="'+n+'"></div>'),this._listenCssLoad(n,i)))},_listenCssLoad:function(r,o){n+=i._checkLoadInterval,"1"===e("#"+r).css("z-index")||n>2e3?void 0!==o?t.fire(o):t.fire("cssLoaded"):setTimeout(function(){i._listenCssLoad(r,o)},i._checkLoadInterval)}};return i}),define("common/extensions/boxUtils",{isInside:function(e,t){return e.top>=t.top&&e.top+e.height<=t.top+t.height&&e.left>=t.left&&e.left+e.width<=t.left+t.width},hasXIntersection:function(e,t){return e.left+e.width>t.left&&t.left+t.width>e.left},hasYIntersection:function(e,t){return e.top+e.height>t.top&&t.top+t.height>e.top},hasIntersection:function(e,t){return this.hasXIntersection(e,t)&&this.hasYIntersection(e,t)},xIntersectionLength:function(e,t){var n=Math.max(0,Math.min(t.left-e.left,e.width)),i=Math.max(0,Math.min(t.left+t.width-e.left,e.width));return Math.abs(n-i)},yIntersectionLength:function(e,t){var n=Math.max(0,Math.min(t.top-e.top,e.height)),i=Math.max(0,Math.min(t.top+t.height-e.top,e.height));return Math.abs(n-i)},isAbove:function(e,t,n){return n=n||0,e.top+e.height-n<=t.top},isBelow:function(e,t,n){return n=n||0,e.top+n>=t.top+t.height},isLeft:function(e,t,n){return n=n||0,e.left+e.width-n<=t.left},isRight:function(e,t,n){return n=n||0,e.left+n>=t.left+t.width},placeableAbove:function(e,t,n){var i=t.width,r=n-t.top;return i>e.width&&r>e.height},placeableBelow:function(e,t,n){var i=t.width,r=t.height-(n-t.top);return i>e.width&&r>e.height},placeableLeft:function(e,t,n){var i=n-t.left,r=t.height;return i>e.width&&r>e.height},placeableRight:function(e,t,n){var i=t.width-(n-t.left),r=t.height;return i>e.width&&r>e.height},placeInRange:function(e,t,n,i){var r=Math.max(n.first+i-e,0),o=Math.max(0,Math.min(n.second-i,t-e));return r>o?o:(r+o)/2}}),require(["jquery","application/dispatcher","application/session.objects","config/lang","config/setup","common/application/viewUtils","common/extensions/boxUtils"],function(e,t,n,i,r,o,a){function s(){var t=o.getBoundingBox(c),n=o.getIndents(h),i=50,r={height:h.height()+n.padding.top+n.padding.bottom+n.border.top+n.border.bottom,width:h.width()+n.padding.left+n.padding.right+n.border.left+n.border.right,bottom:"auto",right:"auto"},s={left:e(window).scrollLeft(),top:e(window).scrollTop(),width:e(window).width(),height:e(window).height()},d={first:t.left-s.left,second:t.left-s.left+t.width},l={first:t.top-s.top,second:t.top-s.top+t.height},f=a.xIntersectionLength(t,s)>=Math.min(t.width,i),g=a.yIntersectionLength(t,s)>=Math.min(t.height,i);if(h.removeClass("rh-below rh-above rh-left rh-right"),u.left=!1,u.right=!1,u.below=!1,u.above=!1,h.find(".rh-arrow_itself").css({top:"",left:""}),a.hasIntersection(t,s)){if(h.removeClass("rh-outside"),p=!1,a.placeableAbove(r,s,t.top)&&f?(r.bottom=s.height-(t.top-s.top),r.top="auto",r.left=a.placeInRange(r.width,s.width,d,20),h.addClass("rh-above"),u.above=!0):a.placeableBelow(r,s,t.top+t.height)&&f?(r.bottom="auto",r.top=t.top+t.height-s.top,r.left=a.placeInRange(r.width,s.width,d,20),h.addClass("rh-below"),u.below=!0):a.placeableLeft(r,s,t.left)&&g?(r.right=s.width-(t.left-s.left),r.left="auto",r.top=a.placeInRange(r.height,s.height,l,20),h.addClass("rh-left"),u.left=!0):a.placeableRight(r,s,t.left+t.width)&&g?(r.left=t.left+t.width-s.left,r.right="auto",r.top=a.placeInRange(r.height,s.height,l,20),h.addClass("rh-right"),u.right=!0):a.placeableAbove(r,s,t.top)?(r.bottom=s.height-(t.top-s.top),r.top="auto",r.left=a.placeInRange(r.width,s.width,d,20),h.addClass("rh-above"),u.above=!0):a.placeableBelow(r,s,t.top+t.height)?(r.bottom="auto",r.top=t.top+t.height-s.top,r.left=a.placeInRange(r.width,s.width,d,20),h.addClass("rh-below"),u.below=!0):a.placeableLeft(r,s,t.left)?(r.right=s.width-(t.left-s.left),r.left="auto",r.top=a.placeInRange(r.height,s.height,l,20),h.addClass("rh-left"),u.left=!0):a.placeableRight(r,s,t.left)&&(r.left=t.left+t.width-s.left,r.right="auto",r.top=a.placeInRange(r.height,s.height,l,20),h.addClass("rh-right"),u.right=!0),!u.left&&!u.right){var v={first:Math.max(s.left+r.left,t.left)-s.left-r.left,second:Math.min(s.left+r.left+r.width,t.left+t.width)-s.left-r.left};h.find(".rh-arrow_itself").css({left:Math.max(5,Math.min(a.placeInRange(20,r.width,v,10),r.width-35))})}if(!u.below&&!u.above){var m={first:Math.max(s.top+r.top,t.top)-s.top-r.top,second:Math.min(s.top+r.top+r.height,t.top+t.height)-s.left-r.height};h.find(".rh-arrow_itself").css({top:Math.max(5,Math.min(a.placeInRange(20,r.height,m,10),r.height-35))})}}else h.addClass("rh-outside"),p=!0,r.width+=90,a.isBelow(t,s)&&(r.bottom=0,r.top="auto",r.left=a.placeInRange(r.width,s.width,d,20),h.addClass("rh-above"),u.above=!0),a.isAbove(t,s)&&(r.bottom="auto",r.top=0,r.left=a.placeInRange(r.width,s.width,d,20),h.addClass("rh-below"),u.below=!0),a.isRight(t,s)&&(r.right=0,r.left="auto",u.above||u.below||(r.top=a.placeInRange(r.height,s.height,l,20)),h.addClass("rh-left"),u.left=!0),a.isLeft(t,s)&&(r.left=0,r.right="auto",u.above||u.below||(r.top=a.placeInRange(r.height,s.height,l,20)),h.addClass("rh-right"),u.right=!0);delete r.height,delete r.width,h.css(r),h.show()}function d(){var t=o.getBoundingBox(l);if(t.left-=parseInt(c.css("padding-left"),10)+parseInt(c.css("border-left-width"),10),t.left=t.left>=0?t.left:0,t.top-=parseInt(c.css("padding-top"),10)+parseInt(c.css("border-top-width"),10),t.top=t.top>=0?t.top:0,t.left+t.width+10>e(document).width()&&(t.width=e(document).width()-t.left-10),t.top+t.height+10>e(document).height()&&(t.height=e(document).height()-t.top-10),"static"!==e("body").css("position")){var n=e("body").offset();t.top-=n.top,t.left-=n.left}c.css(t).show(),t.width+=10,t.height+=10,h.find("p").html(i.HIGHLIGHT_LABEL)}var l,c=e('<div id="rhHighlight" class="rh-reset"></div>').css({position:"absolute",background:"#E4F2FD",border:"1px dashed #ba2626",opacity:"0.4",display:"none","z-index":"9999",padding:"3px",cursor:"pointer","box-shadow":"0 0 7px black"}),h=e('<div id="rh-arrow" style="display: none" class="rh-arrow rh-reset"><div class="rh-arrowContainer"><img class="rh-reset rh-face" src=""><p class="rh-reset">'+i.HIGHLIGHT_LABEL+'</p><div style="clear: both"></div></div><a class="rh-close rh-reset"></a><div class="rh-reset rh-arrow_itself"><div class="rh-reset"></div></div></div>'),p=!1,u={left:!1,right:!1,above:!1,below:!1},f=function(){(n.defaultFace||n.operAvatar)&&h.find("img").attr("src",n.currentOperAvatar||r.getImageUrl(n.operAvatar||n.defaultFace))};n.dispatcher.addEventListener("onDefaultFaceChanged",f),n.dispatcher.addEventListener("onOperAvatarChanged",f),c.click(function(){t.fire("stopHighlight")}),h.click(function(){var t=c.offset();e("html, body").animate({scrollTop:t.top-(e(window).height()-c.height())/2,scrollLeft:t.left-(e(window).width()-c.width())/2},"slow")}),h.children("a.rh-close").click(function(e){return e.stopPropagation(),t.fire("stopHighlight"),!1});var g=location.href;setInterval(function(){g!==location.href&&(g=location.href,t.fire("stopHighlight"))},100),e("#rh-snippet").length?(c.appendTo("#rh-snippet"),h.appendTo("#rh-snippet")):t.addEventListener("snippetAppended",function(){c.appendTo("#rh-snippet"),h.appendTo("#rh-snippet")});var v=0,m=!1,w=function(){if(!p)return void(m=!1);m||(m=!0,v=0);var e=.5*Math.abs((v+20)%40-20),t={top:0,left:0};u.above&&(t.top=e+"px"),u.below&&(t.top=-e+"px"),u.left&&(t.left=e+"px"),u.right&&(t.left=-e+"px"),h.find(".rh-arrow_itself div").css(t),v+=1};setInterval(w,20),t.addEventListener("highlight",function(t){try{if(!t.selector)return;l=t.selector,m=!1,d(),s(),h.css("opacity",1),c.css("opacity","0.4"),h.children(".rh-shadow").css("display","block"),setTimeout(function(){h.children(".rh-shadow").fadeOut()},2e3),t.isCached&&h.click(),e(window).bind("scroll resize",s),e(window).bind("resize",d)}catch(n){}}),t.addEventListener("stopHighlight",function(){e(window).unbind("scroll resize",s),e(window).unbind("resize",d),c.fadeOut(),h.is(":visible")&&h.fadeOut()}),t.addEventListener("redirect",function(e){e.link&&(location.href=e.link)})}),define("common/extensions/cobrowseHighlight",function(){}),define("view/sendFile",["common/extensions/jquery.plugins","application/chatWindow","application/session.objects"],function(e,t,n){function i(e){if(e.dataTransfer.types)for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"==e.dataTransfer.types[t])return!0;return!1}if(!n.free){var r=!1,o=null;e(document).on({dragover:function(e){return i(e.originalEvent)?(e.preventDefault(),clearInterval(o),o=setInterval(function(){r&&t.send("endDrag"),r=!1},400),r||(r=!0,t.send("fileDragged")),!1):!0}})}}),define("view/visitorCode",["common/extensions/jquery.plugins","application/session.objects","application/dispatcher","config/lang","application/chatWindow"],function(e,t,n,i,r){n.addEventListener("sessionLoaded",function(){if(t.visitorCode.enabled){var n=t.visitorCode.height,i=t.visitorCode.width,o=t.visitorCode.headerFontSize,a=t.visitorCode.bodyFontSize,s=t.visitorCode.backgroundColor,d=Math.round(i/10),l=Math.round(d/12),c=parseInt(s.substr(1,2),16),h=parseInt(s.substr(3,2),16),p=parseInt(s.substr(5,2),16),u=Math.sqrt(c*c*.241+h*h*.391+p*p*.068)>160?"#000000":"#ffffff",f="<div style='margin: 0 "+l+"px; float: left; width: "+d+"px; height: "+d+"px;'><div class='redhlp_round' style='display: none; background: "+s+"; border-radius: 50%; width: "+d+"px; height: "+d+"px;'></div></div>";if(f=f+f+f,f="<div class='redhlp_visitor-code-rounds' style='margin: "+(n/2-d/2)+"px auto; width: "+3*(d+2*l)+"px;'>"+f+"</div>",e(".redhlp_visitor-code").length){e(".redhlp_visitor-code").css({width:i+"px",height:n+"px"}).show().html("<div class='redhlp_visitor-code-header' style='display: none; font-size:"+o+"px'>"+t.visitorCode.headerText+"</div><div class='redhlp_code' style='display: none; color: "+u+"; background: "+s+"; font-size: "+a+"px'>"+(t.vid?(t.vid+"").substr((t.vid+"").length-4):"")+"</div>"+f);var g=0;if(parseInt(t.vid||"0",10))e(".redhlp_visitor-code-header, .redhlp_visitor-code .redhlp_code").show(),e(".redhlp_visitor-code-rounds").hide();else{var v=0,m=!1;g=setInterval(function(){m?e(".redhlp_visitor-code .redhlp_round:eq("+v+")").fadeOut(300):e(".redhlp_visitor-code .redhlp_round:eq("+v+")").fadeIn(300),2===v&&(m=!m),v=(v+1)%3},300),t.dispatcher.addEventListener("onVidChanged",function(){parseInt(t.vid||"0",10)&&(clearInterval(g),e(".redhlp_visitor-code-header, .redhlp_visitor-code .redhlp_code").show(),e(".redhlp_visitor-code-rounds").hide())})}t.isPartiallyOnline||r.send("getOfflineVid")}}})}),define("view/viewManager",["application/session.objects","config/setup","common/extensions/jquery.plugins","view/badge","view/chat","application/dispatcher","view/loader","common/constants/chatState","common/extensions/performance","common/extensions/cobrowseHighlight","config/api","view/sendFile","view/visitorCode","common/extensions/browserDetect"],function(e,t,n,i,r,o,a,s,d,l,c,h,p,u){var f={_showVisualContent:function(a){(e.defaultFace||e.operAvatar)&&n("#rh-chatTop img, img.redhlp_face, img.rh-face").attr("src",t.getImageUrl(e.operAvatar||e.defaultFace)),e.dispatcher.addEventListener("onDefaultFaceChanged",function(){(e.operAvatar||e.defaultFace)&&n("#rh-chatTop img, img.redhlp_face, img.rh-face").attr("src",t.getImageUrl(e.operAvatar||e.defaultFace))}),e.dispatcher.addEventListener("onOperAvatarChanged",function(){(e.operAvatar||e.defaultFace)&&n("#rh-chatTop img, img.redhlp_face, img.rh-face").attr("src",t.getImageUrl(e.operAvatar||e.defaultFace))}),n("#rh-chatHeader").html(e.defaultHeader),"modern"==e.skin&&n("#rh-chatTitle").html(e.defaultHeader),n("#rh-topPanel").removeClass(e.isOnline?"rh-chatOff":"").addClass(e.isOnline?"":"rh-chatOff"),e.dispatcher.addEventListener("onHeaderChanged",function(){n("#rh-chatHeader").html(e.defaultHeader),"modern"==e.skin&&n("#rh-chatTitle").html(e.defaultHeader)}),n("#rh-chatText").html(e.defaultText),e.dispatcher.addEventListener("onTopTextChanged",function(){n("#rh-chatText").html(e.defaultText)}),n("#rh-chatName").html(e.operDisplayName),e.dispatcher.addEventListener("onOperDisplayNameChanged",function(){n("#rh-chatName, .redhlp_operDisplayName").html(e.operDisplayName)}),n("#rh-badge").addClass("rh-"+e.badgePosition),a.addClass("rh-"+e.badgePosition);var s=e.badgePosition;e.dispatcher.addEventListener("onBadgePositionChanged",function(){n("#rh-badge").removeClass("rh-"+s),n("#rh-badge").addClass("rh-"+e.badgePosition),a.removeClass("rh-"+s),a.addClass("rh-"+e.badgePosition)}),e.dispatcher.addEventListener("onActiveSalesShownChanged",function(){e.activeSalesShown&&clearTimeout(f._activeSalesId)}),i.init(),r.init(),a.disableTextSelect(),a.mousedown(function(){}),a.addClass("rh-reset"),t.eachSubelement(a,function(e){e.addClass("rh-reset")}),o.fire("viewLoaded")},init:function(){d.addPoint("viewInitStart"),"Explorer"===u.browser&&parseInt(u.version,10)<9&&n("head").append("<link rel='stylesheet' href='"+t.APP_URL+"container/css/ie8.css'/>");try{n("embed").each(function(){var e=this;setTimeout(function(){void 0===n(e).attr("wmode")&&void 0===n(e).attr("WMODE")&&n(e).attr("wmode","opaque")},2e3)}),n("object").each(function(e,t){var i=this;setTimeout(function(){0===n("param[name='wmode']",i).length&&0===n("param[name='WMODE']",i).length&&n(i).html('<param name="wmode" value="opaque">'+n(i).html())},2e3)})}catch(a){}var l=n("body"),c=n('<div id="rh-snippet" style="display: none;"><div id="rh-settings" style="display: none;"></div></div>');if(c.css("position","static"),l.prepend(c),n('<div id="rh-snippet-end" style="display: none !important;"></div>').insertAfter(c),o.fire("snippetAppended"),e.free&&c.addClass("rh-free"),e.chatState!==s.MINIMIZED&&(t.IS_PHONE||window.redhlpSettings&&window.redhlpSettings.showInSeparateWindow)&&(e.chatState=s.MINIMIZED),e.dispatcher.addEventListener("onIsOnlineChanged",function(){l.removeClass(e.isOnline?"redhlp_offline":"redhlp_online"),l.addClass(e.isOnline?"redhlp_online":"redhlp_offline")}),l.removeClass(e.isOnline?"redhlp_offline":"redhlp_online"),l.addClass(e.isOnline?"redhlp_online":"redhlp_offline"),o.addEventListener("start",function(){f.show()}),o.addEventListener("openChat",function(){e.chatState=s.WINDOW}),o.addEventListener("openChat",function(){l.removeClass("redhlp_closeChat").addClass("redhlp_openChat")}),o.addEventListener("closeChat",function(){e.chatState=s.MINIMIZED}),o.addEventListener("closeChat",function(){l.removeClass("redhlp_openChat").addClass("redhlp_closeChat")}),o.addEventListener("attachedBottom",function(){c.addClass("redhlp_attachedBottom")}),o.addEventListener("unattachedBottom",function(){c.removeClass("redhlp_attachedBottom")}),o.addEventListener("message.displayed",function(){e.chatState!==s.WINDOW&&o.fire("openChat")}),i.append(c),r.append(c),e.skin?c.show():o.addEventListener("cssLoaded",function(){c.show()}),e.chatState===s.MINIMIZED&&e.skin)try{f._showVisualContent(c)}catch(h){}else o.addEventListener("cssLoaded",function(){f._showVisualContent(c)})},show:function(){return e.skin?(n("#rh-snippet").addClass("redhlp_state"+(e.isOnline?"Online":"Offline")+" rh-state"+(e.isOnline?"Online":"Offline")),c.outerCSS?a.loadCss(c.outerCSS):a.loadCss(t.APP_URL+"container/css/skins/"+e.skin+".css?version=3.1.570.1459872528712"),void d.addPoint("viewShow")):void e.dispatcher.addEventListener("onSkinChanged",function(){f.show()})},hide:function(){},hideSound:function(){n("#rh-sound").hide()},setIframeUrl:function(e,t){n("#redhlp_chatFrame, #rh-chatFrame").attr("src",e).load(function(){t()})},showChat:function(){r.open()},closeChat:function(){r.close()}};return f}),define("common/application/basicActivity",["application/dispatcher"],function(e){function t(e,t){this._prefix=t||"",this._dispatcher=null,this._CHECK_INTERVAL=e,this._intervalId=null,this._isUserAway=!1,this._flag=!1,this._children=[]}t.prototype={check:function(){return this._flag||this._isUserAway?void(this._flag=!1):(this._dispatcher.fire(this._prefix+"userAway"),void(this._isUserAway=!0))},isActive:function(){return!this._isUserAway},update:function(){var e;for(this._flag=!0,this._isUserAway&&(this._dispatcher.fire(this._prefix+"userBack"),this._isUserAway=!1),e=0;e<this._children.length;e++)this._children[e].update()},start:function(){if(!this._intervalId){var e=this;this._intervalId=setInterval(function(){e.check()},this._CHECK_INTERVAL)}},stop:function(){this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},init:function(e,t){t&&(this._CHECK_INTERVAL=t),this._dispatcher=e},changeInterval:function(e){this._CHECK_INTERVAL!==e&&(this._CHECK_INTERVAL=e,this._intervalId&&(this.stop(),this.start()))},getChild:function(e,n){var i=new t(e,n);return i.init(this._dispatcher),this._children.push(i),i}};var n=window.redhlpSettings?window.redhlpSettings.activityInterval||3e5:3e5,i=new t(n);return i.init(e),i}),define("view/commonEvents",["common/application/basicActivity","application/session.objects"],function(e,t){return{bind:function(n){var i=function(){return e.update(),t.lastActivity=(new Date).getTime(),!0};window.addEventListener?(window.addEventListener("click",i,!1),window.addEventListener("mousemove",i,!1),window.addEventListener("keydown",i,!1)):window.attachEvent&&(window.attachEvent("onclick",i),window.attachEvent("onmousemove",i),window.attachEvent("onkeydown",i));var r=this;n.addHandler("inactive",function(){r._userIsActive=!1}),n.addHandler("active",function(){r._userIsActive=!0})}}}),define("common/extensions/mouse",["common/extensions/jquery.plugins"],function(e){function t(e){return{x:e.x||0,y:e.y||0,width:e.width,height:e.height,scrollX:e.scrollX,scrollY:e.scrollY,windowHeight:e.windowHeight,windowWidth:e.windowWidth}}function n(){if(b){var e=0;for(e=0;e<c.length;e+=1)c[e].send("getMouse");for(e=0;e<h.length;e+=1)h[e].send("getMouse");f()}}var i="unknown",r=50,o={},a={},s=!1,d=!1,l=0,c=[],h=[],p={},u={},f=function(){},g=function(e){},v=!1,m=!1,w=!1,b=!1,E=function(){return"innerHeight"in window?window.innerHeight:e(window).height()};return{init:function(){return e("body").hover(function(){s=!0},function(){s=!1}).mouseleave(function(){s=!1,d=!1,l=0}).mouseenter(function(){s=!0,d=!0}),o.width=Math.max(e("html").width(),e(window).width()),o.height=Math.max(e("html").height(),e(window).height()),o.windowHeight=E(),o.windowWidth=e(window).width(),o.scrollX=e("body").scrollLeft(),o.scrollY=e("body").scrollTop(),o.x=0,o.y=0,e("body").bind("scroll",function(){o.scrollX=e("body").scrollLeft(),o.scrollY=e("body").scrollTop()}),e(window).mousemove(function(t){l+=1,!d&&1>=l||(s=!0,o={x:t.pageX-e("body").scrollLeft(),y:t.pageY-e("body").scrollTop(),width:Math.max(e(document).width(),e(window).width()),height:Math.max(e(document).height(),e(window).height()),windowHeight:E(),windowWidth:e(window).width(),scrollX:e("body").scrollLeft(),scrollY:e("body").scrollTop()})}),e(window).bind("scroll",function(){o.scrollX=e("body").scrollLeft(),o.scrollY=e("body").scrollTop(),s=!0}),e("html").bind("click",function(t){v=!0,m=!1,w=!1,s=!0,o={x:t.pageX-e("body").scrollLeft(),y:t.pageY-e("body").scrollTop(),width:Math.max(e(document).width(),e(window).width()),height:Math.max(e(document).height(),e(window).height()),windowHeight:E(),windowWidth:e(window).width(),scrollX:e("body").scrollLeft(),scrollY:e("body").scrollTop()}}),e("html").bind("mouseup",function(t){w=!0,m=!1,o={x:t.pageX-e("body").scrollLeft(),y:t.pageY-e("body").scrollTop(),width:Math.max(e("html").width(),e(window).width()),height:Math.max(e(document).height(),e(window).height()),windowHeight:E(),windowWidth:e(window).width(),scrollX:e("body").scrollLeft(),scrollY:e("body").scrollTop()}}),e("html").bind("mousedown",function(t){m=!0,w=!1,o={x:t.pageX-e("body").scrollLeft(),y:t.pageY-e("body").scrollTop(),width:Math.max(e("html").width(),e(window).width()),height:Math.max(e(document).height(),e(document).height()),windowHeight:E(),windowWidth:e(window).width(),scrollX:e("body").scrollLeft(),scrollY:e("body").scrollTop()}}),this},enable:function(){b=!0},disable:function(){b=!1},setAsSlave:function(n){i="slave",n.addHandler("getMouse",function(){var e=t(o);e.isInside=s,e.clicked=v,e.mouseDown=m,e.mouseUp=w,v=!1,m=!1,w=!1,"function"==typeof g&&g(e),n.send("mouseData",e)});var r=function(){n.send("forceLeave"),e("html").unbind("mousemove",r),setTimeout(function(){e("html").mousemove(r)},1500)};return e("html").mousemove(r),this},setAsMaster:function(){return i="master",setInterval(n,r),this},addParentSlave:function(e){return"function"==typeof e.send&&(c.push(e),e.addHandler("mouseData",function(e){p=e}),e.addHandler("forceLeave",function(){s=!1})),this},addChildSlave:function(e){return"function"==typeof e.send&&(h.push(e),e.addHandler("mouseData",function(e){e.isInside&&(u=e)})),this},setHandler:function(e){return f=e,this},force:function(){return f(),this},setOffsetFunction:function(e){return g=e,this},getMouseData:function(){var e=t(o);return e.isInside=s,e.clicked=v,e.mouseDown=m,e.mouseUp=w,v=!1,m=!1,w=!1,"function"==typeof g&&g(e),u.isInside?(u.mouseUp|=e.mouseUp,a=t(u),u):(p.windowHeight&&(e.scrollX=p.scrollX,e.scrollY=p.scrollY,e.width=p.width,e.height=p.height,e.windowHeight=p.windowHeight,e.windowWidth=p.windowWidth),!e.isInside&&p.isInside?(p.mouseUp|=e.mouseUp,a=t(p),p):(p.x=e.x,p.y=e.y,a=t(e),e))},getParentMouseData:function(){return p},getChildMouseData:function(){return u}}}),define("application/redhelper",["application/dispatcher","application/chatWindow","application/session.objects","view/viewManager"],function(e,t,n,i){var r,o,a=function(e){window.RedHelper.session[e]=n[e],n.dispatcher.addEventListener("on"+e.charAt(0).toUpperCase()+e.substr(1)+"Changed",function(){window.RedHelper.session[e]=n[e]})};if(n.free&&!n.openApi)return void(window.RedHelper={started:!1});for(window.RedHelper={onChanged:function(e,t){n.dispatcher.addEventListener("on"+e.charAt(0).toUpperCase()+e.substr(1)+"Changed",function(){t()})},addEventListener:function(t,n){e.addEventListener(t,n)},removeEventListener:function(t,n){e.removeEventListener(t,n)},fireEvent:function(t,n){e.fire(t,n)},sendEvent:function(e,n){t.send(e,n)},openChat:function(){e.fire("openChat")},closeChat:function(){i.closeChat()},sendMessage:function(t,n){e.fire("sendMessage",{text:t,show:!!n})},started:!1,execFunction:function(t,i){(!n.free||n.openApi)&&e.fire("sendExecFunction",{name:t,args:i})},clearUser:function(){t.send("clearUser",function(){n.clear(!0),location.reload()})},invite:function(t,n){e.fire("invite",{msg:t,avatar:n})},disableInvitations:function(t){e.fire("invitation:disable",{manualAlso:t})},refreshOperator:function(){n.currentOperator="",t.send("refreshOperator")},clearOperator:function(){n.chatStarted="",n.currentOperator="",t.send("refreshOperator")},clearOperatorAndDepartment:function(){n.chatStarted="",n.currentDepartment="",n.realDepartment="",n.currentOperator="",t.send("refreshOperator")},hideOldMessages:function(){t.send("hideOldMessages")},setOperator:function(e,i){i||(n.onlineOperators.forEach(function(t){t.name===e&&(i=t.departments[0])}),i||(i=0)),n.lastChat=Date.now(),n.chatStarted="",n.currentDepartment=i,n.realDepartment=i,n.currentOperator=e,t.send("refreshOperator")},setDepartment:function(e){n.currentDepartment!==e&&(n.lastChat=Date.now(),n.chatStarted="",n.currentDepartment=e,n.realDepartment=e,n.currentOperator="",t.send("refreshOperator"))}},window.RedHelper.session={},r=0,o=n.fields.length;o>r;r++)a(n.fields[r])}),define("common/extensions/balloon",["common/extensions/jquery.plugins","common/application/viewUtils","common/extensions/boxUtils","common/extensions/color"],function(e,t,n,i){return function(r){function o(){var i=t.getBoundingBox(e(r)),o=t.getIndents(v),a=50,s={height:v.height()+o.padding.top+o.padding.bottom+o.border.top+o.border.bottom,width:v.width()+o.padding.left+o.padding.right+o.border.left+o.border.right,bottom:"auto",right:"auto"},d={left:e(window).scrollLeft(),top:e(window).scrollTop(),width:e(window).width(),height:e(window).height()},l=({first:i.left-d.left,second:i.left-d.left+i.width},{first:i.top-d.top,second:i.top-d.top+i.height},n.xIntersectionLength(i,d)>=Math.min(i.width,a)),c=n.yIntersectionLength(i,d)>=Math.min(i.height,a);f.left=!1,f.right=!1,f.above=!1,f.below=!1;var h;return n.hasIntersection(i,d)?n.placeableAbove(s,d,i.top-10)&&l?h="above":n.placeableBelow(s,d,i.top+i.height+10)&&l?h="below":n.placeableLeft(s,d,i.left-10)&&c?h="left":n.placeableRight(s,d,i.left+i.width+10)&&c?h="right":n.placeableAbove(s,d,i.top)?h="above":n.placeableBelow(s,d,i.top+i.height)?h="below":n.placeableLeft(s,d,i.left)?h="left":n.placeableRight(s,d,i.left)&&(h="right"):(v.addClass("rh-outside"),s.width+=90,n.isBelow(i,d)&&(h="above"),n.isAbove(i,d)&&(h="below"),n.isRight(i,d)&&(h="left"),n.isLeft(i,d)&&(h="right")),h}function a(i){try{c=0;var o=t.getBoundingBox(e(r));if(!(o.top||o.left||o.width||o.height))return c++,void(h>c?setTimeout(function(){a(i)},p):c=0);c=0,i?(v.is(":visible")||w(),v.fadeIn()):v.show();var s=t.getIndents(v),d=50,l={height:v.height()+s.padding.top+s.padding.bottom+s.border.top+s.border.bottom,width:v.width()+s.padding.left+s.padding.right+s.border.left+s.border.right,bottom:"auto",right:"auto"},u={left:e(window).scrollLeft(),top:e(window).scrollTop(),width:e(window).width(),height:e(window).height()},g={first:o.left-u.left,second:o.left-u.left+o.width},m={first:o.top-u.top,second:o.top-u.top+o.height},b=n.xIntersectionLength(o,u)>=Math.min(o.width,d),E=n.yIntersectionLength(o,u)>=Math.min(o.height,d);if(v.removeClass("rh-below rh-above rh-left rh-right"),f.left=!1,f.right=!1,f.above=!1,f.below=!1,v.find(".rh-arrow_itself").css({top:"",left:""}),n.hasIntersection(o,u)){if(v.removeClass("rh-outside"),n.placeableAbove(l,u,o.top-10)&&b?(l.bottom=u.height-(o.top-u.top),l.top="auto",l.left=n.placeInRange(l.width,u.width,g,20),v.addClass("rh-above"),f.above=!0):n.placeableBelow(l,u,o.top+o.height+10)&&b?(l.bottom="auto",l.top=o.top+o.height-u.top,l.left=n.placeInRange(l.width,u.width,g,20),v.addClass("rh-below"),f.below=!0):n.placeableLeft(l,u,o.left-10)&&E?(l.right=u.width-(o.left-u.left),l.left="auto",l.top=n.placeInRange(l.height,u.height,m,20),v.addClass("rh-left"),f.left=!0):n.placeableRight(l,u,o.left+o.width+10)&&E?(l.left=o.left+o.width-u.left,l.right="auto",l.top=n.placeInRange(l.height,u.height,m,20),v.addClass("rh-right"),f.right=!0):n.placeableAbove(l,u,o.top)?(l.bottom=u.height-(o.top-u.top),l.top="auto",l.left=n.placeInRange(l.width,u.width,g,20),v.addClass("rh-above"),f.above=!0):n.placeableBelow(l,u,o.top+o.height)?(l.bottom="auto",l.top=o.top+o.height-u.top,l.left=n.placeInRange(l.width,u.width,g,20),v.addClass("rh-below"),f.below=!0):n.placeableLeft(l,u,o.left)?(l.right=u.width-(o.left-u.left),l.left="auto",l.top=n.placeInRange(l.height,u.height,m,20),v.addClass("rh-left"),f.left=!0):n.placeableRight(l,u,o.left)&&(l.left=o.left+o.width-u.left,l.right="auto",l.top=n.placeInRange(l.height,u.height,m,20),v.addClass("rh-right"),f.right=!0),!f.left&&!f.right){var y={first:Math.max(u.left+l.left,o.left)-u.left-l.left,second:Math.min(u.left+l.left+l.width,o.left+o.width)-u.left-l.left};v.find(".rh-arrow_itself").css({left:Math.max(5,Math.min(n.placeInRange(20,l.width,y,10),l.width-35))})}if(!f.below&&!f.above){var _={first:Math.max(u.top+l.top,o.top)-u.top-l.top,second:Math.min(u.top+l.top+l.height,o.top+o.height)-u.left-l.height};v.find(".rh-arrow_itself").css({top:Math.max(5,Math.min(n.placeInRange(20,l.height,_,10),l.height-35))})}}else v.addClass("rh-outside"),l.width+=90,n.isBelow(o,u)&&(l.bottom=0,l.top="auto",l.left=n.placeInRange(l.width,u.width,g,20),v.addClass("rh-above"),f.above=!0),n.isAbove(o,u)&&(l.bottom="auto",l.top=0,l.left=n.placeInRange(l.width,u.width,g,20),v.addClass("rh-below"),f.below=!0),n.isRight(o,u)&&(l.right=0,l.left="auto",f.above||f.below||(l.top=n.placeInRange(l.height,u.height,m,20)),v.addClass("rh-left"),f.left=!0),n.isLeft(o,u)&&(l.left=0,l.right="auto",f.above||f.below||(l.top=n.placeInRange(l.height,u.height,m,20)),v.addClass("rh-right"),f.right=!0);delete l.height,delete l.width,v.css(l),v.show()}catch(S){setTimeout(function(){a(i)},200)}}var s="",d=function(){},l=!1,c=0,h=5,p=500,u=this,f={left:!1,right:!1,below:!1,above:!1},g=e("<style type='text/css'></style>");g.appendTo("head");var v;v=e('<div id="rh-arrow" style="padding: 0;" class="rh-reset"><div class="placeholder rh-reset"></div><a class="rh-close rh-reset"></a><div class="rh-reset rh-arrow_itself"></div></div>');var m=v.find(".placeholder > *");v.appendTo("#rh-snippet"),v.children("a.rh-close").click(function(e){return e.stopPropagation(),u.hide(),d(),!1});var w=function(){var t=v.children(),n=o(),i=e('<div id="rh-arrow" style="display: none; padding: 0;" class="rh-reset rh-'+n+'">');i.appendTo("#rh-snippet"),t.appendTo(i),v.remove(),v=i},b=0,E=!1,y=!1,_=function(){if(!v.hasClass("rh-outside"))return void(E=!1);if(l){E||(E=!0,b=0);var e=.5*Math.abs((b+20)%40-20),t={top:0,left:0};f.above&&(t.top=e+"px"),f.below&&(t.top=-e+"px"),f.left&&(t.left=e+"px"),f.right&&(t.left=-e+"px"),v.find(".rh-arrow_itself div").css(t),b+=1}};setInterval(_,20),this.appendTo=function(e){r=e},this.setHTML=function(t){s=t,m=e(s),v.find(".placeholder").html(""),v.find(".placeholder").append(m),"absolute"===m.css("position")&&v.css("padding","0"),y&&a()},this.show=function(t){if(t){var n=i.rgb2hsl(i.parseRGB(t));n[2]*=1.1;var r=i.hsl2rgb(n);try{g.html("#rh-arrow .rh-arrow_itself:after, #rh-arrow, #rh-arrow .rh-arrow_itself { border-color: rgba("+r.join(",")+", 0.2) !important; }")}catch(o){}}y=!0,v.children(".rh-shadow").css("display","block"),
E=!1,a(!0),l=!0,e(window).bind("scroll resize",a)},this.hide=function(){y=!1,e(window).unbind("scroll resize",a),v.is(":visible")&&v.hide(),l=!1},this.getElement=function(){return v},this.resetPosition=function(){a()},this.close=function(e){d=e}}}),define("view/invitation.html",[],function(){return'    <div id="rh-invitation" class="rh-arrowContainer" style="display: none;">     <div class="rh-text">       <img alt="" class="rh-face" src=""/>        <div style="height: 8px;"></div><span id="rh-welcome"></span></div>       <div id="rh-choice">          <a id="rh-choiceYes" class="rh-btn"></a>          <a id="rh-choiceNo" class="rh-btn"></a>       </div>      <div style="clear: both"></div>   </div>  '}),define("view/invitation",["common/extensions/jquery.plugins","application/session.objects","application/dispatcher","view/badge","common/extensions/balloon","view/invitation.html","config/lang","config/setup"],function(e,t,n,i,r,o,a,s){var d=e("body"),l=o,c=null,h=null,p=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\n/g,"<br>")},u=[],f={fillTexts:function(){e("#rh-choiceYes").html(a.YES_LABEL),e("#rh-choiceNo").html(a.NO_LABEL)},acceptedClicked:function(e){h?h.click(e):u.push(e)},init:function(){c||(c=new r(i.getActiveElement())),c.setHTML(l),c.close(function(){e("#rh-choiceNo").trigger("click")}),h=e("#rh-invitation"),e("#rh-choiceNo").click(function(){return d.removeClass("rh-invitation"),c&&c.hide(),d.addClass("rh-rejected"),n.fire("closeChat"),n.fire("rejected"),n.fire("invitationButtonNo"),!1}),h.click(function(){d.removeClass("rh-invitation"),d.addClass("rh-accepted"),n.fire("invitationButtonYes"),c&&c.hide(),f.hide(function(){n.fire("openChat")}),n.fire("accepted")}),u.forEach(function(e){h.click(e)}),u=[],s.eachSubelement(h,function(e){e.addClass("rh-reset")}),f.updateAvatar(t.operAvatar||t.defaultFace),t.dispatcher.addEventListener("onDefaultFaceChanged",function(){(t.operAvatar||t.defaultFace)&&f.updateAvatar(t.operAvatar||t.defaultFace)}),t.dispatcher.addEventListener("onOperAvatarChanged",function(){(t.operAvatar||t.defaultFace)&&f.updateAvatar(t.operAvatar||t.defaultFace)})},show:function(e,i){d.addClass("rh-invitation"),i&&f.updateAvatar(i),e&&f.updateText(e),f.fillTexts(),h.show(),c.show(t.badgeColor),c.resetPosition(),n.fire("invitation.shown",{text:e})},hide:function(e){c&&c.hide(),h.hide(),e&&e()},updateAvatar:function(t){e(".rh-face",c.getElement()).attr("src",s.getImageUrl(t))},updateText:function(t){t=p(t),e("#rh-welcome").html(t)}};return window.InvitationView=f,f}),define("application/appStages",["application/dispatcher"],function(e){var t=!1,n=!1;return e.addOneShotEventListener("sessionLoaded",function(){t=!0}),e.addOneShotEventListener("viewLoaded",function(){n=!0}),{afterSessionLoaded:function(n){t?n():e.addOneShotEventListener("sessionLoaded",n)},afterViewLoaded:function(t){n?t():e.addOneShotEventListener("viewLoaded",t)}}}),define("application/tools",[],function(){return{reduce:function(e,t,n){if(null===e||"undefined"==typeof e)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var i,r,o=e.length>>>0,a=!1;for(2<arguments.length&&(r=n,a=!0),i=0;o>i;++i)e.hasOwnProperty(i)&&(a?r=t(r,e[i],i,e):(r=e[i],a=!0));if(!a)throw new TypeError("Reduce of empty array with no initial value");return r}}}),define("model/invitation",["application/session.objects","application/appStages","application/tools"],function(e,t,n){function i(e,t){if("string"!=typeof e)return!1;if(""===t)return!1;if(-1!==t.indexOf(","))return t.split(",").some(function(t){return i(e,t)});if(e=e.toLowerCase(),t=t.toLowerCase().trim(),!t)return!1;var r=[e].concat(t.split("*")),o=n.reduce(r,function(e,t){return-1==e?-1:-1==e.indexOf(t)?-1:e.slice(e.indexOf(t)+t.length)});return-1!==o}var r=!1,o=function(){};t.afterSessionLoaded(function(){(!e.siteVisitLastTime||e.siteVisitLastTime<Date.now()-108e5)&&(e.siteVisitLastTime=Date.now()),o(),r=!0});var a={condition:function(e,t,n){this.type=e,"undefined"!=typeof n?this.value=t*a.timeUnit[n]:this.value=t},scenario:function(e,t,n){this.text=e,this.avatar=t,this.online=n,this.conditions=[],this.wasTriggered=!1}};return a.condition.type={SITE_DELAY:"SITE_DELAY",FREQUENCY:"FREQUENCY",MAX_SHOWS:"MAX_SHOWS",OPERATOR_ONLINE:"OPERATOR_ONLINE",PAGE_DELAY:"PAGE_DELAY",PLACE_CONTAINS:"PLACE_CONTAINS",URL_CONTAINS:"URL_CONTAINS"},a.timeUnit={second:1,minute:60,hour:3600,day:86400},a.scenario.fromJson=function(e){var t=new a.scenario(e.text,e.avatar,e.online);return t.conditions=e.conditions.map(function(e){return new a.condition(e.type,e.value,e.timeUnit)}),t},a.scenario.prototype={isFulfilled:function(){if(e.lastMessageTime&&Date.now()-+e.lastMessageTime<864e5)return!1;var t={};return this.conditions.forEach(function(e){t[e.type]=t[e.type]||e.isFulfilled}),this.conditions.every(function(e){return t[e.type]})},getWeight:function(){return n.reduce(this.conditions.map(function(e){return e.getWeight()}),function(e,t){return e+t})},moreSpecificThan:function(e){return this.goes()?e.goes()?this.getWeight()>e.getWeight():!0:!1},goes:function(){var t={};return e.isOnline!=this.online&&-1!=this.online?!1:(this.conditions.forEach(function(e){t[e.type]=t[e.type]||a.condition.goes[e.type](e)}),this.conditions.every(function(e){return t[e.type]}))},start:function(){var e=this.conditions,t=this;e.forEach(function(e){e.onFulfilled(function(){t.isFulfilled()&&t.trigger()})}),e.forEach(function(e){e.start()})},clear:function(){this.conditions.forEach(function(e){e.clear()}),this.conditions=[]},trigger:function(){return this.wasTriggered||e.isOnline!=this.online?void 0:(this.handler&&(this.handler(this),this.wasTriggered=!0,e.invitationsShown=e.invitationsShown+1,e.lastInvitationTime=Date.now()),this)},onTriggered:function(e){return this.handler=e,this}},a.condition.prototype={start:function(){var e=this;r?a.condition.behaviors[e.type](e):o=function(){a.condition.behaviors[e.type](e)}},onFulfilled:function(e){this.handler=e},clear:function(){this.handler=function(){}},getWeight:function(){return a.condition.weight[this.type](this)},isFulfilled:!1},a.condition.weight={NEW_VISITOR:function(){return 1e3},URL_CONTAINS:function(e){return 1e6*e.value.length},PLACE_CONTAINS:function(e){return 1e9*e.value.length},REFERRER_CONTAINS:function(e){return 1e12*e.value.length},DEPARTMENT_ONLINE:function(){return 1e15},OPERATOR_ONLINE:function(){return 1e18},FREQUENCY:function(){return 0},MAX_SHOWS:function(){return 0},SITE_DELAY:function(e){return 100-e.value},PAGE_DELAY:function(e){return 100-e.value}},a.condition.goes={NEW_VISITOR:function(t){return e.visits>1?!t.value:t.value},URL_CONTAINS:function(e){return i(location.href,e.value)},FREQUENCY:function(t){return!e.lastInvitationTime||e.lastInvitationTime+1e3*t.value<=Date.now()},MAX_SHOWS:function(t){return e.invitationsShown<=t.value},OPERATOR_ONLINE:function(t){return e.onlineOperators.some(function(e){return e.name===t.value&&e.status&&"online"===e.status})},DEPARTMENT_ONLINE:function(t){return e.onlineOperators.some(function(e){return e.status&&"online"===e.status&&e.departments&&-1!==e.departments.indexOf(+t.value)})},PLACE_CONTAINS:function(t){return e.city.toLowerCase().indexOf(t.value.toLowerCase())>-1||e.country.toLowerCase().indexOf(t.value.toLowerCase())>-1||e.city_ru.toLowerCase().indexOf(t.value.toLowerCase())>-1||e.country_ru.toLowerCase().indexOf(t.value.toLowerCase())>-1},REFERRER_CONTAINS:function(t){return i(e.referrer,t.value)},SITE_DELAY:function(){return!0},PAGE_DELAY:function(){return!0}},a.condition.behaviors={URL_CONTAINS:function(e){i(location.href,e.value)&&(e.isFulfilled=!0,e.handler())},NEW_VISITOR:function(t){(e.visits>1?!t.value:t.value)&&(t.isFulfilled=!0,t.handler())},FREQUENCY:function(t){function n(){r=0,t.isFulfilled=!0,o||(t.handler(),o=!0)}function i(){r&&clearTimeout(r),t.isFulfilled=!1,r=0,!e.lastInvitationTime||e.lastInvitationTime+1e3*t.value<=Date.now()?n():r=setTimeout(function(){n()},e.lastInvitationTime+1e3*t.value-Date.now())}var r=0,o=!1;i(),e.dispatcher.addEventListener("onLastInvitationTimeChanged",function(){i()})},MAX_SHOWS:function(t){e.invitationsShown<=t.value&&(t.isFulfilled=!0,t.handler()),e.dispatcher.addEventListener("onInvitationsShownChanged",function(){t.isFulfilled=e.invitationsShown<=t.value})},OPERATOR_ONLINE:function(t){function n(){return e.onlineOperators.some(function(e){return e.name===t.value&&e.status&&"online"===e.status})}var i=n();i&&(t.isFulfilled=!0,t.handler()),e.dispatcher.addEventListener("onOnlineOperatorsChanged",function(){var e=t.isFulfilled,i=n();t.isFulfilled=i,i&&!e&&t.handler()})},DEPARTMENT_ONLINE:function(e){a.condition.goes.DEPARTMENT_ONLINE(e)&&(e.isFulfilled=!0,e.handler())},REFERRER_CONTAINS:function(e){a.condition.goes.REFERRER_CONTAINS(e)&&(e.isFulfilled=!0,e.handler())},PAGE_DELAY:function(e){setTimeout(function(){e.isFulfilled=!0,e.handler()},1e3*e.value)},PLACE_CONTAINS:function(t){(i(e.city,t.value)||i(e.country,t.value)||i(e.city_ru,t.value)||i(e.country_ru,t.value))&&(t.isFulfilled=!0,t.handler())},SITE_DELAY:function(t){var n=Date.now()-e.siteVisitLastTime-1e3*t.value;n>0?(t.isFulfilled=!0,t.handler()):setTimeout(function(){t.isFulfilled=!0,t.handler()},-n)}},a}),define("common/constants/sender",{VISITOR:0,OPERATOR:1}),define("common/extensions/guid",[],function(){return{generate:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})}}}),define("application/invitationController",["application/session.objects","application/dispatcher","view/invitation","view/chat","model/invitation","config/nxSettings","config/settings","config/setup","common/constants/sender","application/chatWindow","common/constants/chatState","application/appStages","common/extensions/guid","application/tools"],function(e,t,n,i,r,o,a,s,d,l,c,h,p,u){var f,g=[],v=!1,m=!1,w=0,b={setupScenarios:function(t){if("undefined"!=typeof e.currentInviteTime&&+e.currentInviteTime>-1)g.push(r.scenario.fromJson({conditions:[{type:"MAX_SHOWS",value:0},{type:"SITE_DELAY",value:+e.currentInviteTime}],text:e.currentWelcome||e.defaultWelcome,avatar:e.defaultFace,online:!0}));else if(t.inviteScenarios){t.inviteScenarios.forEach(function(e){var t=r.scenario.fromJson(e);t.id=e.scenarioId,g.push(t)});var n=u.reduce(g,function(e,t){return e.moreSpecificThan(t)?e:t});g=[n],w=e.currentInvitation=n.id}else{var i=e.currentWelcome||e.defaultWelcome,o=e.defaultFace,a=e.inviteTime;if(!i||!o||!a)return;var s=new r.scenario(i,o,e.isOnline);s.conditions.push(new r.condition(r.condition.type.SITE_DELAY,a)),s.conditions.push(new r.condition(r.condition.type.MAX_SHOWS,0)),g.push(s)}},triggerHandler:function(t){v||e.chatState!==c.WINDOW&&e.chatState!==c.INVITATION&&(n.show(t.text,t.avatar),l.send("invitationSniff",{trigger:"time",msg:t.text}),l.send("state",{chatState:"browse",inviteState:"received",trigger:"time"}),f||(f=p.generate()),l.send("invitation-history.shown",{id:f,text:t.text,kind:"scenario",time:+new Date}),(!e.hideBadge||a.button||a.buttonBadge)&&(e.chatState=c.INVITATION,e.lastShownInvitation=w))},eventListeners:{accepted:function(){f&&(l.send("invitation-history.accepted",{id:f}),f="")},rejected:function(){f&&l.send("invitation-history.declined",{id:f})},invite:function(t){if(!m){var i=t.msg||e.currentWelcome||e.defaultWelcome,r=t.avatar||e.operAvatar||e.defaultFace;"manual"===t.trigger&&f!=t.id&&(f=t.id,l.send("invitation-history.shown",{id:f,text:i,kind:"personal",time:+new Date})),e.chatState===c.WINDOW?l.send("message.invitation",{type:"message",sender:d.OPERATOR,text:i,displayName:e.operDisplayName}):(n.show(i,r),l.send("invitationSniff",{trigger:t.trigger,msg:t.msg}),t.trigger||l.send("state",{chatState:"browse",inviteState:"received",trigger:"time"}))}},closeChat:function(){n.hide()},openChat:function(){n.hide()},"invitation:disable":function(e){v=!0,e.manualAlso&&(m=!0)}},listenToEvents:function(){for(var e in b.eventListeners)b.eventListeners.hasOwnProperty(e)&&t.addEventListener(e,b.eventListeners[e]);l.addHandler("invitation",function(e){t.fire("invite",{msg:e.message,id:e.id,trigger:"manual"})})},clear:function(){g.forEach(function(e){e.clear()}),g=[]},init:function(t){e.chatState===c.INVITATION&&(e.chatState=c.MINIMIZED),("undefined"==typeof t.enableActiveInvitations||t.enableActiveInvitations)&&b.setupScenarios(t),b.listenToEvents(),g.forEach(function(e){e.onTriggered(b.triggerHandler),e.start()})},start:function(){e.free||s.IS_PHONE||(window.redhlpSettings&&window.redhlpSettings.showInSeparateWindow&&n.acceptedClicked(function(){i.runChatInSeparateWindow(window.redhlpSettings.windowWidth||350,window.redhlpSettings.windowHeight||450)}),h.afterSessionLoaded(function(){n.init(),b.init(o),b.listenToEvents()}))}};return b}),define("config/customFields",["application/dispatcher","application/session.objects","common/communication/encoder"],function(e,t,n){window.redhlpSettings||(window.redhlpSettings={}),window.redhlpSettings.keys||(window.redhlpSettings.keys=[]),"[object Array]"!==Object.prototype.toString.call(window.redhlpSettings.keys)&&(window.redhlpSettings.keys=[window.redhlpSettings.keys]),t.customFields=n.serialize(window.redhlpSettings.keys||{}),rhlpSetInterval(function(){if(t.customFields!==n.serialize(window.redhlpSettings.keys||{})){var e=(n.parse(t.customFields),window.redhlpSettings.keys||{});t.customFields=n.serialize(e)}},5e3)}),define("application/eventTracking",["application/dispatcher","jquery","application/session.objects"],function(e,t,n){function i(e,t){try{"object"==typeof _gaq&&_gaq.push&&_gaq.push(["_trackEvent","RedHelper",e,e,t,!0]),"function"==typeof ga&&ga("send",{hitType:"event",eventCategory:"RedHelper",eventAction:e,eventLabel:e,eventValue:t,nonInteraction:!0}),window.dataLayer&&window.dataLayer.push&&window.dataLayer.push({event:e}),"object"==typeof r&&r.reachGoal("RedHelper."+e.replace(" ","_")),window.redhlpSettings&&"function"==typeof window.redhlpSettings.onEvent&&window.redhlpSettings.onEvent(e)}catch(n){}}if("undefined"==typeof window.redhlpSettings||"undefined"==typeof window.redhlpSettings.tracking||window.redhlpSettings.tracking!==!1){var r;for(var o in window)0==o.indexOf("yaCounter")&&(r=window[o]);var a={invitation:function(){i("Invitation shown",1)},invitationAccepted:function(){i("Invitation accepted",1)},invitationRejected:function(){i("Invitation rejected",1)},chatOpen:function(){i("Chat opened",1)},chatClose:function(){i("Chat closed",1)},chatStarted:function(){i("Chat started",1),n.dispatcher.removeEventListener("onChatStartedChanged",a.chatStarted)},badgeInit:function(){i("Badge shown",1),e.removeEventListener("badgeInit",a.badgeInit)},highlight:function(){i("Highlight",1)},messageSent:function(){i("Message sent",1)},messageReceived:function(){i("Message received",1)},like:function(){i("Like",1)},dislike:function(){i("Dislike",1)}};e.addEventListener("invitation.shown",a.invitation),e.addEventListener("invitationButtonYes",a.invitationAccepted),e.addEventListener("invitationButtonNo",a.invitationRejected),e.addEventListener("openChatButtonClicked",a.chatOpen),e.addEventListener("minifyChat",a.chatClose),e.addEventListener("highlight",a.highlight),e.addEventListener("chat.message.send",a.messageSent),e.addEventListener("chat.message.received",a.messageReceived),e.addEventListener("chat.rateOperator.like",a.like),e.addEventListener("chat.rateOperator.dislike",a.dislike),n.dispatcher.addEventListener("onChatStartedChanged",a.chatStarted),e.addEventListener("badgeInit",a.badgeInit)}}),define("common/extensions/historyAPI",["application/dispatcher","config/setup","application/session.objects"],function(e,t,n){if(history.pushState&&"function"==typeof history.pushState){var i=location.href;setInterval(function(){i!==location.href&&(i=location.href,t.CURRENT_URL=i,t.CURRENT_TITLE=document.title,n.viewedPages+=1,e.fire("urlChanged"))},1e3)}}),define("application/cloneSession",["application/chatWindow","application/session.objects","application/dispatcher"],function(e,t,n){e.addHandler("stopSessionView",function(e){var n=t.sessionViewers||[];-1!==n.indexOf(e.from)&&n.splice(n.indexOf(e.from),1),t.sessionViewers=n,t.isCloneSessionActive=!!n.length}),e.addHandler("startSessionView",function(e){var i=t.sessionViewers||[];-1===i.indexOf(e.from)&&i.push(e.from),t.sessionViewers=i,t.isCloneSessionActive=!0,n.fire("cloneSession")});var i=function(){var t,n,i={localStorage:{},sessionStorage:{},cookie:{},currentUrl:""};for(n=0;n<window.localStorage.length;n++)t=window.localStorage.key(n),i.localStorage[t]=window.localStorage.getItem(t);for(n=0;n<window.sessionStorage.length;n++)t=window.sessionStorage.key(n),i.sessionStorage[t]=window.sessionStorage.getItem(t);var r,o=document.cookie.split(";");for(t in o)o.hasOwnProperty(t)&&(r=o[t].split("="),i.cookie[r[0]]=r[1]);i.currentUrl=location.href,e.send("sendSession",{data:i})};e.addHandler("cloneSession",i),n.addEventListener("cloneSession",i)}),require(["application/session.objects","common/extensions/jquery.plugins","application/DOMObserver","application/dispatcher"],function(e,t,n,i){e.currentHeader="",e.currentTopText="",e.currentWelcome="",e.preferredOperator="",e.requiredOperator="",e.preferredOperatorError="",e.currentOperAvatar="",e.animateBadge=!0,e.disableDOMObserver=!1,e.cloneSession=!1,e.disableCobrowse=!1,e.disableForms=!1,e.currentInviteTime=-1,t(function(){try{i.addEventListener("onlineOperatorsReceived",function(){window.redhlpSettings.chooseOperator&&"function"==typeof window.redhlpSettings.chooseOperator&&(e.requiredOperator=(window.redhlpSettings.chooseOperator(e.operators)+"").toLowerCase()||"-","-"===e.requiredOperator&&(e.isOnline=!1),-1===e.requiredOperator.indexOf(",")&&(e.currentOperator=e.requiredOperator))}),window.redhlpSettings&&(void 0!==window.redhlpSettings.chatX&&((window.redhlpSettings.chatX+"").indexOf("%")>-1&&(window.redhlpSettings.chatX=parseFloat(window.redhlpSettings.chatX+"")*t(window).width()/100),e.chatX=window.redhlpSettings.chatX,e.currentChatX=window.redhlpSettings.chatX),void 0!==window.redhlpSettings.chatY&&((window.redhlpSettings.chatY+"").indexOf("%")>-1&&(window.redhlpSettings.chatY=parseFloat(window.redhlpSettings.chatY+"")*t(window).height()/100),e.chatY=window.redhlpSettings.chatY,e.currentChatY=window.redhlpSettings.chatY),void 0!==window.redhlpSettings.chatWidth&&(e.chatWidth=parseInt(window.redhlpSettings.chatWidth,10)),void 0!==window.redhlpSettings.chatHeight&&(e.chatHeight=parseInt(window.redhlpSettings.chatHeight,10)),void 0!==window.redhlpSettings.header&&(e.currentHeader=window.redhlpSettings.header),void 0!==window.redhlpSettings.topText&&(e.currentTopText=window.redhlpSettings.topText),void 0!==window.redhlpSettings.inviteTime&&(e.currentInviteTime=parseInt(window.redhlpSettings.inviteTime,10)),void 0!==window.redhlpSettings.welcome&&(e.currentWelcome=window.redhlpSettings.welcome),void 0!==window.redhlpSettings.preferredOperator&&(e.preferredOperator=window.redhlpSettings.preferredOperator.toLowerCase()),void 0!==window.redhlpSettings.requiredOperator&&(e.requiredOperator=(window.redhlpSettings.requiredOperator+"").toLowerCase()),void 0!==window.redhlpSettings.preferredOperatorError&&(e.preferredOperatorError=window.redhlpSettings.preferredOperatorError),void 0!==window.redhlpSettings.badgeX&&(e.badgeX=window.redhlpSettings.badgeX),void 0!==window.redhlpSettings.badgeY&&(e.badgeY=window.redhlpSettings.badgeY),void 0!==window.redhlpSettings.avatar&&(e.currentOperAvatar=window.redhlpSettings.avatar),void 0!==window.redhlpSettings.badgePosition&&(e.badgePosition=window.redhlpSettings.badgePosition),void 0!==window.redhlpSettings.firstMessage&&(e.currentFirstMessage=window.redhlpSettings.firstMessage),void 0!==window.redhlpSettings.cloneSession&&(e.cloneSession=window.redhlpSettings.cloneSession),void 0!==window.redhlpSettings.offlineHeader&&(e.currentOfflineHeader=window.redhlpSettings.offlineHeader),void 0!==window.redhlpSettings.offlineText&&(e.currentOfflineText=window.redhlpSettings.offlineText))}catch(n){}});var r={onstart:"function () { ... } - starts a function after RedHelper is loaded",onEvent:"function (name) {} - like GA and YM integration but with custom handler",page:"string that is passed to site definition patterns (from Control Panel preferences)",chooseOperator:"function (operators) { ... return oper; }",chatX:"x-position of the chat window",chatY:"y-position of the chat window",chatWidth:"width of the chat window",chatHeight:"height of the chat window",header:"header text in online chat (at the top of the window)",topText:"text below the header in online chat window",inviteTime:"(Deprecated)",welcome:"(Deprecated)",avatar:"(Deprecated)",badgeX:"if badgePosition==bottom, changes x-coodrinate of badge center, can be set in percent or in pixels",badgeY:"if badgePosition==left/right, changes y-coodrinate of badge center, can be set in percent or in pixels",badgePosition:"bottom/left/right",firstMessage:"automatic welcome message from operator",offlineHeader:"header in the offline form",offlineText:"text below header in offline form",preferredOperator:"if this operator is online, distributes visitor to him, if not then distributes visitor to another online operator (not dynamic, use RedHelper.setOperator instead)",requiredOperator:"if this operator is online, distributes visitor to him, if not then shows offline form (not dynamic, use RedHelper.setOperator instead)"};window.redhlpSettings?window.redhlpSettings.help=r:window.redhlpSettings={help:r},void 0!==window.redhlpSettings.chatX&&(e.chatX=window.redhlpSettings.chatX,e.currentChatX=window.redhlpSettings.chatX),void 0!==window.redhlpSettings.chatY&&(e.chatY=window.redhlpSettings.chatY,e.currentChatY=window.redhlpSettings.chatY),void 0!==window.redhlpSettings.chatWidth&&(e.chatWidth=parseInt(window.redhlpSettings.chatWidth,10)),void 0!==window.redhlpSettings.chatHeight&&(e.chatHeight=parseInt(window.redhlpSettings.chatHeight,10)),void 0!==window.redhlpSettings.header&&(e.currentHeader=window.redhlpSettings.header),void 0!==window.redhlpSettings.topText&&(e.currentTopText=window.redhlpSettings.topText),window.redhlpSettings&&void 0!==window.redhlpSettings.inviteTime&&(e.currentInviteTime=parseInt(window.redhlpSettings.inviteTime,10)),window.redhlpSettings&&window.redhlpSettings.disableCobrowse&&(e.disableCobrowse=!0),window.redhlpSettings&&window.redhlpSettings.disableForms&&(e.disableForms=!0),void 0!==window.redhlpSettings.hideBadge&&(e.hideBadge=window.redhlpSettings.hideBadge),window.redhlpSettings.disableCobrowse&&(e.disableCobrowse=!0),window.redhlpSettings.disableForms&&(e.disableForms=!0),void 0!==window.redhlpSettings.disableDOMObserver&&(e.disableDOMObserver=!!window.redhlpSettings.disableDOMObserver),void 0!==window.redhlpSettings.animateBadge&&(e.animateBadge=!!window.redhlpSettings.animateBadge),i.addEventListener("sessionLoaded",function(){void 0!=window.redhlpSettings.disableCobrowse&&(e.disableCobrowse=!!window.redhlpSettings.disableCobrowse),void 0!==window.redhlpSettings.disableForms&&(e.disableForms=!!window.redhlpSettings.disableForms),void 0!==window.redhlpSettings.disableDOMObserver&&(e.disableDOMObserver=!!window.redhlpSettings.disableDOMObserver),n.init()})}),define("application/redhlpSettings",function(){}),define("application/DOMObserver",["common/extensions/jquery.plugins","application/chatWindow","application/session.objects","application/redhlpSettings","application/dispatcher"],function(e,t,n,i,r){var o=!1;return window._lvl_=100,window._rhlp_thresholdSize=Math.round(4*e("html").html().length/3),"_rhlp_html_index_"in window||(window._rhlp_html_index_=-1),{init:function(){function i(){c||(c=new MutationObserver(d),c.observe(e("body")[0],{attributes:!0,subtree:!0,characterData:!0,childList:!0}))}function a(){try{c&&(c.disconnect(),c=null),f=!0,clearTimeout(h),h=setTimeout(function(){w=[],g=0,m={},v=new Date,i(),r.fire("retrieveHTML",{})},1200)}catch(e){}}function s(t){if(!(window._lvl_<3)){var n=e(t.target);if(!n.hasClass("rh-reset")){var i;switch(t.type){case"attributes":var r="class"===t.attributeName||"id"===t.attributeName;i={type:"attr",path:n.getPath(r),attribute:t.attributeName,value:n.attr(t.attributeName)},void 0===i.value&&(i.value="");break;case"characterData":var o=n.parent();i={type:"text",path:o.getPath(),value:o.html()};break;case"childList":i={type:"tree",path:n.getPath(),value:n.html()};break;default:return}b.push(i)}}}function d(e){window._lvl_<1||void 0!==window._rhlp_html_index_&&-1!==window._rhlp_html_index_&&(window._rhlp_html_index_!==p&&(p=window._rhlp_html_index_,u=0,f=!1),f||(w.length+b.length+e.length>1e4?a():e.forEach(s)))}function l(){r.fire("DomObserver.start")}if(!window.MutationObserver||n.disableDOMObserver)return void(o=!0);var c,h,p=-1,u=0,f=!1,g=0,v=new Date,m={},w=[],b=[];r.addEventListener("DomObserver.start",function(){i(),o=!0}),r.addEventListener("DomObserver.stop",function(){null!=c&&c.disconnect(),c=null}),t.addHandler("sniffMouse",function(){f||r.fire("DomObserver.start")}),t.addHandler("stopSniffMouse",function(){r.fire("DomObserver.stop")}),r.addEventListener("sniffFormData",function(){window._lvl_<10||n.disableForms||(e("input, textarea").each(function(t,n){var i=e(n);i.val()&&(b.push({type:"input",path:i.getPath(),value:"password"===i.attr("type")?i.val().replace(/\s\S/g,"*"):i.val()}),i[0].oldValue=i.val())}),e("input[type=checkbox],input[type=radio]").each(function(t,n){e(n).val()&&b.push({type:"checkbox",path:e(n).getPath(),value:e(n).prop("checked")})}))}),n.disableForms||(e("body").on("focus","input, textarea",function(t){b.push({type:"focus",path:e(t.target).getPath(),value:!0})}),e("body").on("blur","input, textarea",function(t){b.push({type:"focus",path:e(t.target).getPath(),value:!1})}),e("body").on("input","input, textarea",function(t){var n=e(t.target).val();b.push({type:"input",path:e(t.target).getPath(),value:"password"===e(t.target).attr("type")?n.replace(/\s\S/g,"*"):n})}),e("input[type=checkbox],input[type=radio]").on("click",function(){e("input[type=checkbox],input[type=radio]").each(function(t,n){b.push({type:"checkbox",path:e(n).getPath(),value:e(n).prop("checked")})})}),e("body").on("keyup","input, textarea",function(t){var n=e(t.target).val();b.push({type:"input",path:e(t.target).getPath(),value:"password"===e(t.target).attr("type")?n.replace(/\s\S/g,"*"):n}),e(t.target)[0].oldValue=n}),setInterval(function(){e("input, textarea").each(function(t,n){var i=e(n),r=i.val();r!==i[0].oldValue&&b.push({type:"input",path:i.getPath(),value:"password"===i.attr("type")?r.replace(/\s\S/g,"*"):r}),i[0].oldValue=r})},200)),e("*:not(body)").scroll(function(t){b.push({type:"scroll",path:e(t.target).getPath(),value:{scrollTop:e(t.target).scrollTop(),scrollLeft:e(t.target).scrollLeft()}})});var E=function(){try{if(window._lvl_<5)return;if(f)return;if(b.length>0){var e=b;b=[];var n;e.reduce(function(e,t){if(!f){var n=t.type+"://"+("attr"===t.type?t.attribute+"://":"")+t.path;if(void 0!==m[n])switch(t.type){case"attr":if("class"===t.attribute||"id"===t.attribute)return e.push(t),e;case"tree":case"focus":case"scroll":case"text":return e[m[n]]=t,e}else if(t.value&&t.value.length&&(g+=t.value.length+100,(t.value.indexOf("<input ")>=0||t.value.indexOf("<textarea ")>=0)&&r.fire("sniffFormData")),g>window._rhlp_thresholdSize)return void a();return m[n]=e.push(t)-1,e}},w)}else{var i=new Date;if(i-v>1200&&w.length>0){var o=w;for(var n in o)o[n].i=++u;t.send("sendMutations",{mutationsList:o}),w=[],m={},v=i,g=0}}}catch(s){}};setInterval(E,10),l()},isStarted:function(){return o}}}),define("application/cobrowseContent",["application/dispatcher","application/chatWindow","jquery","application/session.objects","application/redhlpSettings","application/DOMObserver"],function(e,t,n,i,r,o){function a(e){if(!(i.disableCobrowse||window.redhlpSettings&&window.redhlpSettings.disableCobrowse)){if(!o.isStarted())return void setTimeout(function(){a(e)},100);void 0===window._rhlp_html_index_&&(window._rhlp_html_index_=0),window._rhlp_html_index_++;var r=document.documentElement.innerHTML,l=n("html"),c=l.attr("id")||"",h=l.attr("class");window._rhlp_thresholdSize=Math.round(4*r.length/3),t.send("sendHTML",{html:r,htmlId:c,htmlClass:h,url:location.href,to:e.to?e.to:"",windowWidth:n(window).width(),windowHeight:d()}),s=location.href}}var s=location.href,d=function(){return"innerHeight"in window?window.innerHeight:jQuery(window).height()};e.addEventListener("retrieveHTML",a),t.addHandler("retrieveHTML",a),t.addHandler("retrieveURL",function(e){(s!=location.href||e.force)&&(s=location.href,t.send("sendURL",{url:location.href,to:e.to||""}))}),t.addHandler("sniffFormData",function(){i.disableCobrowse||e.fire("sniffFormData")})}),define("application/pageVisibilityTracker",["application/dispatcher","jquery","application/session.objects","application/chatWindow"],function(e,t,n,i){function r(e){e=e||window.event,a(e.type in evtMap?evtMap[e.type]:!this.hidden)}var o=!0;n.IsPageFocused=!0;var a=function(e){o!==e&&(o=e,n.IsPageFocused=o,i.send("page.focus",{focused:o}))};evtMap={focus:!0,focusin:!0,pageshow:!0,blur:!1,focusout:!1,pagehide:!1},"onfocusin"in document?window.onfocusin=window.onfocusout=document.onfocusin=document.onfocusout=r:(t(window).blur(function(){a(!1)}),t(window).focus(function(){a(!0)})),t(window).click(function(e){a(!0)}),t("html").click(function(e){a(!0)})}),define("application/main",["common/extensions/jquery.plugins","application/session.objects","view/viewManager","application/chatWindow","application/dispatcher","common/application/basicActivity","view/commonEvents","common/extensions/mouse","config/setup","config/settings","config/lang","common/constants/chatState","common/communication/messageTarget","common/extensions/performance","application/redhelper","config/api","application/invitationController","config/customFields","application/eventTracking","common/extensions/historyAPI","common/communication/encoder","application/cloneSession","application/DOMObserver","application/cobrowseContent","application/redhlpSettings","application/pageVisibilityTracker","application/command"],function(e,t,n,i,r,o,a,s,d,l,c,h,p,u,f,g,v,m,w,b,E,y,_,S,O,A,I){return function(h){!function(){function p(){!e(".redhlp_button").length||t.free&&!t.openApi||(l.button=".redhlp_button"),!e(".redhlp_button.redhlp_withBadge").length||t.free&&!t.openApi||(l.buttonBadge=".redhlp_button",l.button=!1)}if(h.allowed!==!1&&t.allowed!==!1){(!t.vid||0==t.vid&&h.vid>0)&&(t.visIdFromNx=h.vid);var f;if(!(window.RedHelper&&window.RedHelper.started||(h.hideRedHelper&&e("head").append(e("<style>#rh-badge, #rh-chatWrapper { display: none !important; }</style>")),window.RedHelper.started=!0,u.addPoint("main"),d.BLOCK))){setInterval(p,1e3),p();for(f in h)if(h.hasOwnProperty(f)){if("extra"===f)continue;if("operators"!==f)try{var g=JSON.parse(JSON.parse(e("<div></div>").text(JSON.stringify(h[f])).html()));null===g?h[f]=JSON.parse(e("<div></div>").text(JSON.stringify(h[f])).html()):h[f]=g}catch(m){h[f]=JSON.parse(e("<div></div>").text(JSON.stringify(h[f])).html())}if("true"===h[f]&&(h[f]=!0),"false"===h[f]&&(h[f]=!1),"operators"!==f)"offlineMode"===f?t.offlineEnabled="yes"===h[f]||"limited"===h.clientType:"clientType"===f?t.free=!("limited"!==h[f]||h.openApi&&parseInt(h.openApi,10)&&"false"!==h.openApi):"storeCookies"===f?t.cloneSession=!!h[f]:"vid"===f||"status"!==f&&(t[f]=h[f]);else if(t.isOnline=!1,t.isPartiallyOnline=!1,h.operators.length)for(var w=h.operators.length,b=0;w>b;b++)("online"===h.operators[b].status&&(void 0===h.operators[b].onPage||h.operators[b].onPage)||"offline"!==h.operators[b].status&&h.operators[b].name.match(new RegExp("^"+t.currentOperator+"$","i")))&&(!t.realDepartment||h.operators[b].departments&&h.operators[b].departments.indexOf(t.realDepartment)>-1)&&(t.isOnline=!0),"offline"===h.operators[b].status||void 0!==h.operators[b].onPage&&!h.operators[b].onPage||(t.isPartiallyOnline=!0);
}if(h.extra){var y;for(y in h.extra)if(h.extra.hasOwnProperty(y))try{h.extra[y]=e("<div></div>").text(h.extra[y]).html(),t[y]=h.extra[y]}catch(_){}t.extraAuth=E.serialize(h.extra)}if("string"==typeof h.operators)try{h.operators=E.parse(h.operators)}catch(m){}t.onlineOperators=h.operators||[],r.fire("onlineOperatorsReceived"),e("#redhlp_chatFrame").length&&!t.free&&(l.iframe=!0),c.initLanguage(),r.addEventListener("chatOpened",function(){i.send("scrollMessages")}),v.start(),n.init(),t.isOnline||t.offlineEnabled||e("#redhlp_snippet, #rh-snippet").hide(),i.init(e("#redhlp_chatFrame, #rh-chatFrame")[0].contentWindow,d.APP_URL,d.IFRAME_URL.split("#")[0]),i.addHandler("hide",function(){e("#redhlp_snippet, #rh-snippet").hide()}),i.addHandler("show",function(){e("#redhlp_snippet, #rh-snippet").show()}),i.addHandler("message.send",function(){r.fire("chat.message.send")}),i.addHandler("message.received",function(){r.fire("chat.message.received")}),i.addHandler("rateOperator",function(e){e.value?r.fire("chat.rateOperator.like"):r.fire("chat.rateOperator.dislike")}),i.addHandler("displayChat",function(){e("#rh-chat").show(),i.send("displayedChat")}),i.addHandler("hideChat",function(){e("#rh-chat").hide()}),i.addHandler("ready",function(){u.addPoint("ready"),t.onLoad(function(){window.redhlpSettings&&"function"==typeof window.redhlpSettings.onstart&&setTimeout(function(){window.redhlpSettings.onstart()},200),t.referrerStored||(t.referrer=d.referrer||"",t.referrerStored=!0),r.fire("sessionLoaded");var n=window.redhlpSettings&&window.redhlpSettings.page?window.redhlpSettings.page:n=location.href.substr(0,256);i.send("start",{url:location.href,title:document.title,page:n,rhSettings:window.redhlpSettings||{}});var o="_rhlp_oper=";if(location.href.indexOf(o)>-1){var a=location.href.substr(location.href.indexOf(o)+o.length).split("&")[0];i.send("chOper",a)}e("body").addClass("redhlp_ready"),e("#rh-frameLoading").hide()}),t.sendRequest()}),i.addHandler("authenticated",function(){u.addPoint("authenticated"),c.initLanguage(),r.fire("start")}),i.addHandler("message.displayed",function(e){r.fire("message.displayed",e)}),i.addHandler("templateRequest",function(){r.fire("templateRequest")}),r.addEventListener("templateReceived",function(e){i.send("templateReceived",{template:e.template,isDefault:!!e.isDefault})}),i.addHandler("minimize",function(){r.fire("minifyChat")}),i.addHandler("redirect",function(e){e.link.indexOf("http://")<0&&e.link.indexOf("https://")<0&&"/"!==e.link[0]&&"."!==e.link[0]&&"?"!==e.link[0]&&"#"!==e.link[0]&&(e.link="http://"+e.link),location.href=e.link}),i.addHandler("disconnected",function(){e("#redhlp_chatFrame").hide(),i.addHandler("authenticated",function(){e("#redhlp_chatFrame").show()})}),i.send("init"),s.init().setAsSlave(i),r.addEventListener("chatBoxChanged",function(e){t.currentChatX=e.left,t.currentChatY=e.top,t.currentChatHeight=e.height,t.currentChatWidth=e.width}),r.addEventListener("invitation.shown",function(e){i.send("invitation.shown",{text:e.text})}),r.addEventListener("openChat",function(){r.fire("accepted")}),r.addEventListener("closeChat",function(){i.send("closeChat")}),r.addEventListener("accepted",function(){i.send("invitation.accepted"),i.send("state",{chatState:"chat",inviteState:"accepted"})}),r.addEventListener("rejected",function(){i.send("invitation.declined"),i.send("state",{chatState:"browse",inviteState:"rejected"})}),i.addHandler("openChat",function(){r.fire("openChat")}),o.start(),r.addEventListener("userAway",function(){i.send("inactive")}),r.addEventListener("userBack",function(){i.send("active")}),r.addEventListener("timer_userAway",function(){i.send("timer_inactive")}),r.addEventListener("timer_userBack",function(){i.send("timer_active")}),r.addEventListener("urlChanged",function(){i.send("urlChanged",{url:location.href,title:document.title})}),r.addEventListener("sendExecFunction",function(e){i.send("execFunction",{name:e.name,args:e.args})}),r.addEventListener("sendMessage",function(e){i.send("sendMessage",{text:e.text,show:!!e.show})}),i.addHandler("execFunction",function(e){try{window[e.name].apply(null,e.args)}catch(t){console}}),i.addHandler("hideSoundButton",function(){n.hideSound()}),i.addHandler("highlight",function(e){r.fire(e)}),i.addHandler("redirect",function(e){r.fire("redirect",{link:e.link})}),n.setIframeUrl(d.IFRAME_URL.replace("&version=","&skin="+t.skin+"&version="),function(){i.startMessaging()}),a.bind(i),n.show(),new Date-new Date(t.lastVisitTime)>108e5&&t.visits++,t.lastVisitTime=(new Date).getTime(),t.viewedPages++,i.addHandler("operator",function(){r.fire("operator")}),e("html").bind("click",function(e){t.IsPageFocused=!0,i.send("focus.force")})}}}()}}),require(["config/default","common/extensions/jquery.plugins","application/dispatcher","application/main","config/core","config/setup","common/extensions/compatibility","config/api","common/communication/encoder","config/nxSettings","common/extensions/browserDetect"],function(e,t,n,i,r,o,a,s,d,l,c){function h(e){try{o.COMPANY_ID=e.companyId||0,o.IFRAME_URL=o.APP_URL+"chat/?c="+o.CLIENT_NAME+"&version=3.1.570.1459872528712#"+d.compress({url:location.href,companyId:o.COMPANY_ID,settings:s}),i(e),window.$RedHelper={fire:function(e,t){n.fire(e,t)}}}catch(t){}}if(!(void 0!==navigator.userAgent&&navigator.userAgent.indexOf("Awesomium")>-1)&&document.getElementById("rhlpscrtg")&&document.getElementById("rhlpscrtg").src&&!("Explorer"===c.browser&&c.version<8)){t.fx.interval=11;var p=t("#rhlpscrtg").attr("src");if(~p.indexOf(".com/")?r.__APP_URL=r.__PROTOCOL+"//web.redhelper.com/":p.indexOf("//dev/")>-1?r.__APP_URL=r.__PROTOCOL+"//dev/":p.indexOf("//development/")>-1?r.__APP_URL=r.__PROTOCOL+"//development/":r.__APP_URL=r.__PROTOCOL+(p.indexOf("://test.")>-1?"//test.web.redhelper.ru/":"//web.redhelper.ru/"),o.APP_URL=r.__APP_URL,o.TEST_MODE){var u=t("#rhlpscrtg").attr("src");u=u.split("://").pop();var f=u.substr(u.indexOf("/test")+1).split("/")[0];o.APP_URL+=f+"/"}h(l)}}),define("namespace",function(){});var rhLocal={define:define,require:require,requirejs:requirejs,protocol:rhGlobal.protocol||"http:",host:rhGlobal.host||"web.redhelper.ru",name:rhLocalName};try{var tag=document.getElementById("rhlpscrtg"),src=tag?tag.src:location.href;rhLocal.protocol=src.split("//")[0]||"http:";var host;host=src.split("?")[0].indexOf("/development/")>-1?"development":src.indexOf("/dev/")>-1?"dev":src.indexOf("/test.web.redhelper.ru/")>-1?"test.web.redhelper.ru":"web.redhelper.ru",rhLocal.host=host}catch(e){rhLocal.host="web.redhelper.ru",rhLocal.protocol="https:"}window[rhLocal.name]=rhLocal,require.config({waitSeconds:200,paths:{jquery:rhLocal.protocol+"//"+rhLocal.host+"/vendor/jquery-new.min"},map:{"*":{jquery:"jquery-private"},"jquery-private":{jquery:"jquery"}}}),define("../../../build/requirejs-production-config",function(){});for(var i=0;i<rhGlobal.modules.length;i++){var m=rhGlobal.modules[i];define(m.a,m.b,m.c)}}();
//# sourceMappingURL=maps/main.js.map
