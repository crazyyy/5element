{"version":3,"sources":["ngg.slideshow.min.js"],"names":["jQuery","fn","nggSlideshow","args","loadImage","num","stackLength","img","Image","src","stack","shift","one","appendImage","each","this","complete","trigger","hide","obj","append","imageResize","s","width","height","startSlideshow","empty","remove","fadeIn","cycle","fx","containerResize","fit","timeout","next","before","jCycle_onBefore","maxWidth","maxHeight","bind","Math","round","css","curr","opts","addSlide","defaults","id","domain","extend","selector","url","getJSON","r","stat","images","photo","push","decodeURI","length"],"mappings":"AAAAA,OAAOC,GAAGC,aAAa,SAASC,GAAsb,QAASC,GAAUC,GAAK,GAAGC,EAAY,GAAQ,GAALD,EAAO,CAAC,GAAIE,GAAI,GAAIC,MAAQD,GAAIE,IAAIC,EAAMC,QAAQL,IAAcN,OAAOO,GAAKK,IAAI,OAAO,WAAWC,EAAYN,EAAIF,KAAOS,KAAK,WAAcC,KAAKC,UAAShB,OAAOe,MAAME,QAAQ,WAAW,QAASJ,GAAYN,EAAIF,GAAKL,OAAOO,GAAKW,OAAOlB,OAAOmB,GAAKC,OAAOC,EAAYd,EAAIe,EAAEC,MAAMD,EAAEE,SAAiB,GAALnB,GAAqB,GAAbC,EAAgBmB,IAAsBrB,IAAYC,GAAM,QAASoB,KAAiBzB,OAAOmB,EAAI,WAAWO,QAAQC,SAAS3B,OAAOmB,EAAI,cAAcS,OAAO,IAAK,WAAW5B,OAAOmB,GAAKU,OAAOC,GAAGR,EAAEQ,GAAGC,gBAAgB,EAAEC,IAAI,EAAEC,QAAQX,EAAEW,QAAQC,KAAKf,EAAIgB,OAAOC,MAAoB,QAASf,GAAYd,EAAI8B,EAASC,GAAqG,GAAtF/B,EAAIS,UAAShB,OAAOO,GAAKgC,KAAK,OAAO,WAAWlB,EAAYd,EAAI8B,EAASC,KAA4B,GAAZ/B,EAAIiB,QAAsB,GAAXjB,EAAIgB,MAAS,MAAOhB,EAAI,IAAIgB,GAAMC,CAA6R,OAAnRjB,GAAIgB,MAAMe,EAAU/B,EAAIiB,OAAOa,EAAa9B,EAAIgB,MAAMc,IAAUd,EAAMc,EAASb,EAAOgB,KAAKC,MAAMlC,EAAIiB,OAAOjB,EAAIgB,MAAMc,IAAmB9B,EAAIiB,OAAOc,IAAWd,EAAOc,EAAUf,EAAMiB,KAAKC,MAAMlC,EAAIgB,MAAMhB,EAAIiB,OAAOc,IAAYtC,OAAOO,GAAKmC,KAAKlB,OAASA,EAAOD,MAAQA,IAAehB,EAAK,QAAS6B,GAAgBO,EAAKT,EAAKU,GAAM,GAAGA,EAAKC,UAAYvC,EAAY,EAAE,CAAC,GAAIC,GAAI,GAAIC,MAAQD,GAAIE,IAAIC,EAAMC,QAAQL,IAAcN,OAAOO,GAAKgC,KAAK,OAAO,WAAWK,EAAKC,SAASxB,EAAYN,KAAKO,EAAEC,MAAMD,EAAEE,YAA5sD,GAAIsB,IAAUC,GAAG,EAAExB,MAAM,IAAIC,OAAO,IAAIM,GAAG,OAAOkB,OAAO,GAAGf,QAAQ,KAAUX,EAAEtB,OAAOiD,UAAUH,EAAS3C,GAAUgB,EAAIJ,KAAKmC,SAAaxC,KAAayC,EAAI7B,EAAE0B,OAAO,sEAAsE1B,EAAEyB,GAAOzC,EAAY,CAAEN,QAAOoD,QAAQD,EAAI,SAASE,GAAG,GAAW,MAARA,EAAEC,KAAW,CAAC,IAAI/C,MAAO8C,GAAEE,OAAO,CAAC,GAAIC,GAAMH,EAAEE,OAAOhD,IAAKG,GAAM+C,KAAKC,UAAUF,EAAgB,WAAIlD,EAAYI,EAAMiD,OAAOvD,EAAU","file":"ngg.slideshow.min.js","sourcesContent":["jQuery.fn.nggSlideshow=function(args){var defaults={id:1,width:320,height:240,fx:'fade',domain:'',timeout:5000};var s=jQuery.extend({},defaults,args);var obj=this.selector;var stack=[];var url=s.domain+'index.php?callback=json&api_key=true&format=json&method=gallery&id='+s.id;var stackLength=0;jQuery.getJSON(url,function(r){if(r.stat==\"ok\"){for(img in r.images){var photo=r.images[img];stack.push(decodeURI(photo['imageURL']))}stackLength=stack.length;loadImage(1)}});function loadImage(num){if(stackLength>0&&num<=3){var img=new Image();img.src=stack.shift();stackLength--;jQuery(img).one('load',function(){appendImage(img,num)}).each(function(){if(this.complete)jQuery(this).trigger('load')})}}function appendImage(img,num){jQuery(img).hide();jQuery(obj).append(imageResize(img,s.width,s.height));if(num==3||stackLength==0){startSlideshow()}else{loadImage(++num)}}function startSlideshow(){jQuery(obj+'-loader').empty().remove();jQuery(obj+' img:first').fadeIn(1000,function(){jQuery(obj).cycle({fx:s.fx,containerResize:1,fit:1,timeout:s.timeout,next:obj,before:jCycle_onBefore})})}function imageResize(img,maxWidth,maxHeight){if(!img.complete)jQuery(img).bind('load',function(){imageResize(img,maxWidth,maxHeight)});if(img.height==0||img.width==0)return img;var width,height;if(img.width*maxHeight>img.height*maxWidth){if(img.width>maxWidth){width=maxWidth;height=Math.round(img.height/img.width*maxWidth)}}else{if(img.height>maxHeight){height=maxHeight;width=Math.round(img.width/img.height*maxHeight)}}jQuery(img).css({'height':height,'width':width});return img};function jCycle_onBefore(curr,next,opts){if(opts.addSlide)if(stackLength>0){var img=new Image();img.src=stack.shift();stackLength--;jQuery(img).bind('load',function(){opts.addSlide(imageResize(this,s.width,s.height))})}}}"],"sourceRoot":"/source/"}